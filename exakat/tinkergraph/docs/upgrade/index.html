<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<title>TinkerPop Upgrade Information</title>
<style>
/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */

/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
@import url(http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.css);
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased, body { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .mathblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption { line-height: 1.4; color: #6c818f; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #444444; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #111111; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.5; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: ff-meta-web-pro-1, ff-meta-web-pro-2, Arial, "Helvetica Neue", sans-serif; font-weight: bold; font-style: normal; color: #465158; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #909ea7; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: "Consolas", "Deja Vu Sans Mono", "Bitstream Vera Sans Mono", monospace; font-weight: normal; color: #444444; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.5; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 0; }
ul.no-bullet, ol.no-bullet { margin-left: 0; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3em; font-weight: bold; }
dl dd { margin-bottom: 0.75em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: black; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #748590; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #748590; }

blockquote, blockquote p { line-height: 1.5; color: #909ea7; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Print styles.  Inlined to avoid required HTTP connection: www.phpied.com/delay-loading-your-print-css/ Credit to Paul Irish and HTML5 Boilerplate (html5boilerplate.com)
*/
.print-only { display: none !important; }

@media print { * { background: transparent !important; color: #000 !important; /* Black prints faster: h5bp.com/s */ box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; /* h5bp.com/t */ }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 0 #dddddd; }
table thead, table tfoot { background: none; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 1px 8px 1px 5px; font-size: 1em; color: #222222; text-align: left; }
table tr th, table tr td { padding: 1px 8px 1px 5px; font-size: 1em; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: none; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.5; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: 0.95em; padding: 0; white-space: nowrap; background-color: #f2f2f2; border: 0 solid #dddddd; -webkit-border-radius: 6px; border-radius: 6px; text-shadow: none; }

pre, pre > code { line-height: 1.2; color: inherit; font-family: "Consolas", "Deja Vu Sans Mono", "Bitstream Vera Sans Mono", monospace; font-weight: normal; }

.keyseq { color: #333333; }

kbd:not(.keyseq) { display: inline-block; color: black; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: black; }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

p a > code:hover { color: #373737; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#header { margin-bottom: 2.5em; }
#header > h1 { color: #111111; font-weight: bold; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #909ea7; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }

#toc { border-bottom: 1px solid #dddddd; padding-bottom: 1.25em; }
#toc > ul { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul { list-style-type: none; }

#toctitle { color: #6c818f; }

@media only screen and (min-width: 768px) { body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #dddddd; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: .90em; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; border-width: 0; -webkit-border-radius: 6px; border-radius: 6px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#content #toc a { text-decoration: none; }

#content #toctitle { font-weight: bold; font-family: ff-meta-web-pro-1, ff-meta-web-pro-2, Arial, "Helvetica Neue", sans-serif; font-size: 1em; padding-left: 0.125em; }

#footer { max-width: 100%; background-color: black; padding: 1.25em; }

#footer-text { color: white; line-height: 1.35; }

.sect1 { padding-bottom: 1.25em; }

.sect1 + .sect1 { border-top: 1px solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #465158; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #3b444a; }

.imageblock, .literalblock, .listingblock, .mathblock, .verseblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .mathblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-align: left; font-weight: bold; }

.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #909ea7; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 6px; border-radius: 6px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }

.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 6px; border-radius: 6px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #6c818f; margin-top: 0; line-height: 1.5; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre:not([class]), .listingblock pre:not([class]) { background: #eeeeee; }
.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { border-width: 1px; border-style: solid; border-color: #cccccc; -webkit-border-radius: 6px; border-radius: 6px; padding: 0.5em; word-wrap: break-word; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock pre > code, .literalblock pre[class] > code, .listingblock pre > code, .listingblock pre[class] > code { display: block; }
@media only screen { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.76em; } }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.855em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.95em; } }

.listingblock pre.highlight { padding: 0; }
.listingblock pre.highlight > code { padding: 0.5em; }

.listingblock > .content { position: relative; }

.listingblock:hover code[class*=" language-"]:before { text-transform: uppercase; font-size: 0.9em; color: #999; position: absolute; top: 0.375em; right: 0.375em; }

.listingblock:hover code.asciidoc:before { content: "asciidoc"; }
.listingblock:hover code.clojure:before { content: "clojure"; }
.listingblock:hover code.css:before { content: "css"; }
.listingblock:hover code.groovy:before { content: "groovy"; }
.listingblock:hover code.html:before { content: "html"; }
.listingblock:hover code.java:before { content: "java"; }
.listingblock:hover code.javascript:before { content: "javascript"; }
.listingblock:hover code.python:before { content: "python"; }
.listingblock:hover code.ruby:before { content: "ruby"; }
.listingblock:hover code.sass:before { content: "sass"; }
.listingblock:hover code.scss:before { content: "scss"; }
.listingblock:hover code.xml:before { content: "xml"; }
.listingblock:hover code.yaml:before { content: "yaml"; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: '$'; }

table.pyhltable { border: 0; margin-bottom: 0; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

.highlight.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }

.highlight.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background-color: transparent !important; padding-right: 0 !important; }

.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: 0.8125em; color: #748590; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }

table thead th, table tfoot th { font-weight: bold; }

table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 6px; border-radius: 6px; border-top: 0 solid #dddddd; border-bottom: 0 solid #dddddd; }

table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }

table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }

table.tableblock td .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }

th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }

th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }

th.tableblock.valign-top, td.tableblock.valign-top { vertical-align: top; }

th.tableblock.valign-bottom, td.tableblock.valign-bottom { vertical-align: bottom; }

th.tableblock.valign-middle, td.tableblock.valign-middle { vertical-align: middle; }

tbody tr th { display: table-cell; line-height: 1.5; background: none; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: #222222; font-weight: bold; }

td > div.verse { white-space: pre; }

ol { margin-left: 0.25em; }

ul li ol { margin-left: 0; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }

ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }

ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1 { padding-right: .75em; font-weight: bold; }

td.hdlist1, td.hdlist2 { vertical-align: top; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 .75em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.qanda > ol > li > p > em:only-child { color: #373737; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; }

span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > [class^="icon-"], span.icon > [class*=" icon-"] { cursor: default; }

.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #444444; color: #333333; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum { display: inline-block; color: white !important; background-color: black; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }

.listingblock code { white-space: pre; overflow: auto; overflow-wrap: normal; /* needed for webkit browsers */ }

#toc ul.sectlevel0 > li > a { font-style: normal; font-weight: bold; }

h4 { color: #6c818f; }

.literalblock > .content > pre, .listingblock > .content > pre { -webkit-border-radius: 6px; border-radius: 6px; margin-left: 2em; margin-right: 2em; }

.admonitionblock { margin-left: 2em; margin-right: 2em; }
.admonitionblock > table { border: 1px solid #609060; border-top-width: 1.5em; background-color: #e9ffe9; border-collapse: separate; -webkit-border-radius: 0; border-radius: 0; }
.admonitionblock > table td.icon { padding-top: .5em; padding-bottom: .5em; }
.admonitionblock > table td.content { padding: .5em 1em; color: black; font-size: .9em; border-left: none; }

.sidebarblock { background-color: #e8ecef; border-color: #ccc; }
.sidebarblock > .content > .title { color: #444444; }

table.tableblock.grid-all { border-collapse: collapse; -webkit-border-radius: 0; border-radius: 0; }
table.tableblock.grid-all th.tableblock, table.tableblock.grid-all td.tableblock { border-bottom: 1px solid #aaa; }

#footer { background-color: #465158; padding: 2em; }

#footer-text { color: #eee; font-size: 0.8em; text-align: center; }
.tabs{position:relative;margin:40px auto;width:1024px;max-width:100%;overflow:hidden;padding-top:10px;margin-bottom:60px}.tabs input{position:absolute;z-index:1000;height:50px;left:0;top:0;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0);cursor:pointer;margin:0}.tabs input:hover+label{background:#e08f24}.tabs label{background:#e9ffe9;color:#1a1a1a;font-size:15px;line-height:50px;height:60px;position:relative;top:0;padding:0 20px;float:left;display:block;letter-spacing:1px;text-transform:uppercase;font-weight:bold;text-align:center;box-shadow:2px 0 2px rgba(0,0,0,0.1),-2px 0 2px rgba(0,0,0,0.1);box-sizing:border-box;-webkit-transition:all 150ms ease 0s;transition:all 150ms ease 0s}.tabs label:hover{cursor:pointer}.tabs label:after{content:'';background:#609060;position:absolute;bottom:-2px;left:0;width:100%;height:2px;display:block}.tabs-2 input{width:50%}.tabs-2 input.tab-selector-1{left:0%}.tabs-2 input.tab-selector-2{left:50%}.tabs-2 label{width:50%}.tabs-3 input{width:33.33333%}.tabs-3 input.tab-selector-1{left:0%}.tabs-3 input.tab-selector-2{left:33.33333%}.tabs-3 input.tab-selector-3{left:66.66667%}.tabs-3 label{width:33.33333%}.tabs-4 input{width:25%}.tabs-4 input.tab-selector-1{left:0%}.tabs-4 input.tab-selector-2{left:25%}.tabs-4 input.tab-selector-3{left:50%}.tabs-4 input.tab-selector-4{left:75%}.tabs-4 label{width:25%}.tabs-5 input{width:20%}.tabs-5 input.tab-selector-1{left:0%}.tabs-5 input.tab-selector-2{left:20%}.tabs-5 input.tab-selector-3{left:40%}.tabs-5 input.tab-selector-4{left:60%}.tabs-5 input.tab-selector-5{left:80%}.tabs-5 label{width:20%}.tabs-6 input{width:16.66667%}.tabs-6 input.tab-selector-1{left:0%}.tabs-6 input.tab-selector-2{left:16.66667%}.tabs-6 input.tab-selector-3{left:33.33333%}.tabs-6 input.tab-selector-4{left:50%}.tabs-6 input.tab-selector-5{left:66.66667%}.tabs-6 input.tab-selector-6{left:83.33333%}.tabs-6 label{width:16.66667%}.tabs label:first-of-type{z-index:4}.tab-label-2{z-index:4}.tab-label-3{z-index:3}.tab-label-4{z-index:2}.tabs input:checked+label{background:#609060;color:#fefefe;z-index:6}.clear-shadow{clear:both}.tabcontent{height:auto;width:100%;float:left;position:relative;z-index:5;background:#eee;top:-10px;box-sizing:border-box}.tabcontent>div{position:relative;float:left;width:0;height:0;box-sizing:border-box;top:0;left:0;z-index:1;opacity:0;background:#eee}.tabcontent .CodeRay{background-color:#fefefe}.tabs .tab-selector-1:checked ~ .tabcontent .tabcontent-1{z-index:100;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:alpha(opacity=100);opacity:1;width:100%;height:auto;width:100%;height:auto;padding-top:30px}.tabs .tab-selector-2:checked ~ .tabcontent .tabcontent-2{z-index:100;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:alpha(opacity=100);opacity:1;width:100%;height:auto;width:100%;height:auto;padding-top:30px}.tabs .tab-selector-3:checked ~ .tabcontent .tabcontent-3{z-index:100;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:alpha(opacity=100);opacity:1;width:100%;height:auto;width:100%;height:auto;padding-top:30px}.tabs .tab-selector-4:checked ~ .tabcontent .tabcontent-4{z-index:100;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:alpha(opacity=100);opacity:1;width:100%;height:auto;width:100%;height:auto;padding-top:30px}.tabs .tab-selector-5:checked ~ .tabcontent .tabcontent-5{z-index:100;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:alpha(opacity=100);opacity:1;width:100%;height:auto;width:100%;height:auto;padding-top:30px}.tabs .tab-selector-6:checked ~ .tabcontent .tabcontent-6{z-index:100;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:alpha(opacity=100);opacity:1;width:100%;height:auto;width:100%;height:auto;padding-top:30px}

.invisible {color: rgba(0,0,0,0); font-size: 0;}
</style>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_tinkerpop_upgrade_information">TinkerPop Upgrade Information</a></li>
<li><a href="#_tinkerpop_3_4_0">TinkerPop 3.4.0</a>
<ul class="sectlevel1">
<li><a href="#_tinkerpop_3_4_3">TinkerPop 3.4.3</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_deprecated_store">Deprecated store()</a></li>
<li><a href="#_deprecate_gryo_in_gremlin_server">Deprecate Gryo in Gremlin Server</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_driver_providers">Graph Driver Providers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_4_2">TinkerPop 3.4.2</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_2">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_per_request_options">Per Request Options</a></li>
<li><a href="#_gremlin_console_timeout">Gremlin Console Timeout</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_2">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_system_providers">Graph System Providers</a></li>
<li><a href="#_graph_driver_providers_2">Graph Driver Providers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_4_1">TinkerPop 3.4.1</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_3">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_mix_sparql_and_gremlin">Mix SPARQL and Gremlin</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_3">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_database_providers">Graph Database Providers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_4_0_2">TinkerPop 3.4.0</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_4">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_sparql_gremlin">sparql-gremlin</a></li>
<li><a href="#_gremlin_net_driver_improvements">Gremlin.NET Driver Improvements</a></li>
<li><a href="#_indexing_of_collections">Indexing of Collections</a></li>
<li><a href="#_modulation_of_valuemap">Modulation of valueMap()</a></li>
<li><a href="#_predicate_number_comparison">Predicate Number Comparison</a></li>
<li><a href="#_referenceelementstrategy">ReferenceElementStrategy</a></li>
<li><a href="#_text_predicates">Text Predicates</a></li>
<li><a href="#_changed_infix_behavior">Changed Infix Behavior</a></li>
<li><a href="#_graphbinary">GraphBinary</a></li>
<li><a href="#_status_attributes">Status Attributes</a></li>
<li><a href="#_with_step">with() Step</a></li>
<li><a href="#_shortestpath_step">shortestPath() Step</a></li>
<li><a href="#_connectedcomponent_step">connectedComponent() Step</a></li>
<li><a href="#_io_step">io() Step</a></li>
<li><a href="#_per_request_options_2">Per Request Options</a></li>
<li><a href="#_min_max_and_comparable">min() max() and Comparable</a></li>
<li><a href="#_nested_loop_support">Nested Loop Support</a></li>
<li><a href="#_eventstrategy_api">EventStrategy API</a></li>
<li><a href="#_reducing_barrier_steps">Reducing Barrier Steps</a></li>
<li><a href="#_order_of_select_scopes">Order of select() Scopes</a></li>
<li><a href="#_graphson_bulkset">GraphSON BulkSet</a></li>
<li><a href="#_python_bindings">Python Bindings</a></li>
<li><a href="#_deprecation_and_removal">Deprecation and Removal</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_4">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_database_providers_2">Graph Database Providers</a></li>
<li><a href="#_graph_driver_providers_3">Graph Driver Providers</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_3_0">TinkerPop 3.3.0</a>
<ul class="sectlevel1">
<li><a href="#_tinkerpop_3_3_8">TinkerPop 3.3.8</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_5">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_branch_steps_accept_predicates_and_traversals">Branch Steps Accept Predicates and Traversals</a></li>
<li><a href="#_python_datetime">Python DateTime</a></li>
<li><a href="#_javascript_withcomputer">JavaScript withComputer()</a></li>
<li><a href="#_javascript_and_net_hasnext">JavaScript and .NET hasNext()</a></li>
<li><a href="#_deprecated_getsideeffects">Deprecated getSideEffects()</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_3_7">TinkerPop 3.3.7</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_6">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_javascript_dsl_pattern">JavaScript DSL Pattern</a></li>
<li><a href="#_gremlin_console_interrupt">Gremlin Console Interrupt</a></li>
<li><a href="#_removed_gperfutils_dependency">Removed gperfutils Dependency</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_5">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_database_providers_3">Graph Database Providers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_3_6">TinkerPop 3.3.6</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_7">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_anti_patterns_documentation">Anti-Patterns Documentation</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_3_5">TinkerPop 3.3.5</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_8">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_anonymoustraversalsource">AnonymousTraversalSource</a></li>
<li><a href="#_bytecode_command">Bytecode Command</a></li>
<li><a href="#_configurable_class_map_cache">Configurable Class Map Cache</a></li>
<li><a href="#_rangestep_optimizing_strategy">RangeStep Optimizing Strategy</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_6">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_database_providers_4">Graph Database Providers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_3_4">TinkerPop 3.3.4</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_9">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_introducing_order_asc_and_order_desc">Introducing Order.asc and Order.desc</a></li>
<li><a href="#_timedinterrupt">TimedInterrupt</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_3_3">TinkerPop 3.3.3</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_10">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_credential_dsl_changes">Credential DSL Changes</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_3_2">TinkerPop 3.3.2</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_11">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_gremlin_python_sets">Gremlin Python Sets</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_3_1">TinkerPop 3.3.1</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_12">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_gremlin_python_path">Gremlin Python path()</a></li>
<li><a href="#_added_code_math_code_step_for_scientific_traversal_computing">Added <code>math()</code>-step for Scientific Traversal Computing</a></li>
<li><a href="#_changed_typing_on_code_from_code_and_code_to_code">Changed Typing on <code>from()</code> and <code>to()</code></a></li>
<li><a href="#_addv_traversal_and_adde_traversal">addV(traversal) and addE(traversal)</a></li>
<li><a href="#_pagerankvertexprogram">PageRankVertexProgram</a></li>
<li><a href="#_io_defaults">IO Defaults</a></li>
<li><a href="#_upgrade_neo4j">Upgrade Neo4j</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_7">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_database_providers_5">Graph Database Providers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_3_0_2">TinkerPop 3.3.0</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_13">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_packaged_data_files">Packaged Data Files</a></li>
<li><a href="#_graphtraversal_has_methods_re_organized">GraphTraversal Has-Methods Re-Organized</a></li>
<li><a href="#_changes_to_io">Changes to IO</a></li>
<li><a href="#_graphite_and_ganglia">Graphite and Ganglia</a></li>
<li><a href="#_selectstep_defaults_to_pop_last">SelectStep Defaults to Pop.last</a></li>
<li><a href="#_optionalstep_and_side_effects">OptionalStep and Side-Effects</a></li>
<li><a href="#_gremlin_console_initialization">Gremlin Console Initialization</a></li>
<li><a href="#_graphtraversal_valuemap_signature_updated">GraphTraversal valueMap() Signature Updated</a></li>
<li><a href="#_hadoop_gremlin_libs_and_spark">HADOOP_GREMLIN_LIBS and Spark</a></li>
<li><a href="#_deprecation_removal_2">Deprecation Removal</a></li>
<li><a href="#_gremlin_server_sh_and_init_scripts">Gremlin-server.sh and Init Scripts</a></li>
<li><a href="#_removal_of_usemapperfromgraph">Removal of useMapperFromGraph</a></li>
<li><a href="#_gremlin_server_bat">Gremlin-server.bat</a></li>
<li><a href="#_sparkgraphcomputer_gryoregistrator">SparkGraphComputer GryoRegistrator</a></li>
<li><a href="#_scriptinputformat">ScriptInputFormat</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_8">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_system_providers_2">Graph System Providers</a></li>
<li><a href="#_graph_database_providers_6">Graph Database Providers</a></li>
<li><a href="#_driver_providers">Driver Providers</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_2_0">TinkerPop 3.2.0</a>
<ul class="sectlevel1">
<li><a href="#_tinkerpop_3_2_11">TinkerPop 3.2.11</a></li>
<li><a href="#_tinkerpop_3_2_10">TinkerPop 3.2.10</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_14">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_sasl_in_gremlin_net">SASL in Gremlin.Net</a></li>
<li><a href="#_ssl_security">SSL Security</a></li>
<li><a href="#_bulk_import_and_export">Bulk Import and Export</a></li>
<li><a href="#_docker_images">Docker Images</a></li>
<li><a href="#_timedinterruptcustomizerprovider">TimedInterruptCustomizerProvider</a></li>
<li><a href="#_tinkerfactory_creategratefuldead">TinkerFactory.createGratefulDead()</a></li>
<li><a href="#_gremlin_javascript_script_submission">Gremlin Javascript Script Submission</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_9">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_database_providers_7">Graph Database Providers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_2_9">TinkerPop 3.2.9</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_15">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_lambda_construction">Lambda Construction</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_2_8">TinkerPop 3.2.8</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_16">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_improved_connection_monitoring">Improved Connection Monitoring</a></li>
<li><a href="#_gremlin_net_lambdas">Gremlin.Net Lambdas</a></li>
<li><a href="#_gremlin_net_tokens_improved">Gremlin.Net Tokens Improved</a></li>
<li><a href="#_gremlin_net_traversal_predicate_classes_merged">Gremlin.Net: Traversal Predicate Classes Merged</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_10">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_system_providers_3">Graph System Providers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_2_7">TinkerPop 3.2.7</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_17">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_gremlin_python_core_types">Gremlin-Python Core Types</a></li>
<li><a href="#_eventstrategy_detachment">EventStrategy Detachment</a></li>
<li><a href="#_embedded_remote_connection">Embedded Remote Connection</a></li>
<li><a href="#_dsl_type_specification">DSL Type Specification</a></li>
<li><a href="#_specify_a_cluster_object">Specify a Cluster Object</a></li>
<li><a href="#_remote_traversal_timeout">Remote Traversal Timeout</a></li>
<li><a href="#_modifications_to_match">Modifications to match()</a></li>
<li><a href="#_clone_a_graph">Clone a Graph</a></li>
<li><a href="#_mutationlistener_changes">MutationListener Changes</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_11">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_direction_both_requires_duplication_of_self_edges">Direction.BOTH Requires Duplication of Self-Edges</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_2_6">TinkerPop 3.2.6</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_18">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_deprecated_usemapperfromgraph">Deprecated useMapperFromGraph</a></li>
<li><a href="#_wsandhttpchannelizer">WsAndHttpChannelizer</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_12">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_referencevertex_label">ReferenceVertex Label</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_2_5">TinkerPop 3.2.5</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_19">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_dsl_support">DSL Support</a></li>
<li><a href="#_graphson_path_serialization">GraphSON Path Serialization</a></li>
<li><a href="#_authentication_configuration">Authentication Configuration</a></li>
<li><a href="#_default_maximum_parameters">Default Maximum Parameters</a></li>
<li><a href="#_gremlinscriptengine_metrics">GremlinScriptEngine Metrics</a></li>
<li><a href="#_additional_error_information">Additional Error Information</a></li>
<li><a href="#_gremlin_console_scripting">Gremlin Console Scripting</a></li>
<li><a href="#_path_support_for_by_from_to_modulation">Path support for by()-, from()-, to()-modulation</a></li>
<li><a href="#_graphmanager_versus_defaultgraphmanager">GraphManager versus DefaultGraphManager</a></li>
<li><a href="#_gremlin_python_driver">Gremlin-Python Driver</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_13">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_database_providers_8">Graph Database Providers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_2_4">TinkerPop 3.2.4</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_20">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_tinkergraph_deserialization">TinkerGraph Deserialization</a></li>
<li><a href="#_traversal_promises">Traversal Promises</a></li>
<li><a href="#_if_then_semantics_with_choose_step">If/Then-Semantics with Choose Step</a></li>
<li><a href="#_fastnosuchelementexception_converted_to_regular_nosuchelementexception">FastNoSuchElementException converted to regular NoSuchElementException</a></li>
<li><a href="#_scriptengine_support_in_gremlin_core">ScriptEngine support in gremlin-core</a></li>
<li><a href="#_ssl_client_authentication">SSL Client Authentication</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_14">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_database_providers_9">Graph Database Providers</a></li>
<li><a href="#_drivers_providers">Drivers Providers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_2_3">TinkerPop 3.2.3</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_21">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_renamed_null_result_preference">Renamed Null Result Preference</a></li>
<li><a href="#_java_driver_keep_alive">Java Driver Keep-Alive</a></li>
<li><a href="#_where_step_supports_by_modulation">Where Step Supports By-Modulation</a></li>
<li><a href="#_change_in_has_method_signatures">Change In has() Method Signatures</a></li>
<li><a href="#_deprecated_reconnectinitialdelay">Deprecated reconnectInitialDelay</a></li>
<li><a href="#_traversalsource_close">TraversalSource.close()</a></li>
<li><a href="#_io_reference_documentation">IO Reference Documentation</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_15">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_system_providers_4">Graph System Providers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_2_2">TinkerPop 3.2.2</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_22">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_graphson_2_0">GraphSON 2.0</a></li>
<li><a href="#_log4j_dependencies">Log4j Dependencies</a></li>
<li><a href="#_default_for_gremlinpool">Default for gremlinPool</a></li>
<li><a href="#_new_console_features">New Console Features</a></li>
<li><a href="#_rest_api_renamed_to_http_api">REST API Renamed to HTTP API</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_16">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_system_providers_5">Graph System Providers</a></li>
<li><a href="#_drivers_providers_2">Drivers Providers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_2_1">TinkerPop 3.2.1</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_23">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_gephi_plugin">Gephi Plugin</a></li>
<li><a href="#_gryomapper_construction">GryoMapper Construction</a></li>
<li><a href="#_traversalvertexprogram">TraversalVertexProgram</a></li>
<li><a href="#_interrupting_traversals">Interrupting Traversals</a></li>
<li><a href="#_gremlin_console_flags">Gremlin Console Flags</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_17">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_system_providers_6">Graph System Providers</a></li>
<li><a href="#_graph_database_providers_10">Graph Database Providers</a></li>
<li><a href="#_graph_language_providers">Graph Language Providers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_2_0_2">TinkerPop 3.2.0</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_24">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_hadoop_filesystem_variable">Hadoop FileSystem Variable</a></li>
<li><a href="#_hadoop_configurations">Hadoop Configurations</a></li>
<li><a href="#_traversalsideeffects_update">TraversalSideEffects Update</a></li>
<li><a href="#_profilestep_update_and_graphtraversal_api_change">ProfileStep Update and GraphTraversal API Change</a></li>
<li><a href="#_branchstep_bug_fix">BranchStep Bug Fix</a></li>
<li><a href="#_memorycomputekey_and_vertexcomputekey">MemoryComputeKey and VertexComputeKey</a></li>
<li><a href="#_sparkgraphcomputer_and_giraphgraphcomputer_persistence">SparkGraphComputer and GiraphGraphComputer Persistence</a></li>
<li><a href="#_remotegraph">RemoteGraph</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_18">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_system_providers_7">Graph System Providers</a></li>
<li><a href="#_graph_processor_providers">Graph Processor Providers</a></li>
<li><a href="#_graph_language_providers_2">Graph Language Providers</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_1_0">TinkerPop 3.1.0</a>
<ul class="sectlevel1">
<li><a href="#_tinkerpop_3_1_8">TinkerPop 3.1.8</a></li>
<li><a href="#_tinkerpop_3_1_7">TinkerPop 3.1.7</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_25">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_graphml_xslt">GraphML XSLT</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_1_6">TinkerPop 3.1.6</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_providers_19">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_driver_providers_2">Driver Providers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_1_5">TinkerPop 3.1.5</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_26">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_java_driver_and_close">Java Driver and close()</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_1_4">TinkerPop 3.1.4</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_27">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_gremlin_server_workers">Gremlin Server Workers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_1_3">TinkerPop 3.1.3</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_28">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_reserved_gremlin_server_keys">Reserved Gremlin Server Keys</a></li>
<li><a href="#_remote_timeout">Remote Timeout</a></li>
<li><a href="#_gremlin_server_workers_2">Gremlin Server Workers</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_20">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_database_providers_11">Graph Database Providers</a></li>
<li><a href="#_graph_language_providers_3">Graph Language Providers</a></li>
<li><a href="#_driver_providers_3">Driver Providers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_1_2">TinkerPop 3.1.2</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_29">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_aliasing_sessions">Aliasing Sessions</a></li>
<li><a href="#_remote_console">Remote Console</a></li>
<li><a href="#_console_remote_sessions">Console Remote Sessions</a></li>
<li><a href="#_tinkerpop_archetypes">TinkerPop Archetypes</a></li>
<li><a href="#_session_transaction_management">Session Transaction Management</a></li>
<li><a href="#_session_timeout_setting">Session Timeout Setting</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_21">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_all_providers">All Providers</a></li>
<li><a href="#_graph_system_providers_8">Graph System Providers</a></li>
<li><a href="#_driver_providers_4">Driver Providers</a></li>
<li><a href="#_plugin_providers">Plugin Providers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_1_1">TinkerPop 3.1.1</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_30">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_storage_i_o">Storage I/O</a></li>
<li><a href="#_gremlin_server_transaction_management">Gremlin Server Transaction Management</a></li>
<li><a href="#_deprecated_credentialsdblocation">Deprecated credentialsDbLocation</a></li>
<li><a href="#_tinkergraph_supports_any_i_o">TinkerGraph Supports Any I/O</a></li>
<li><a href="#_authenticator_method_deprecation">Authenticator Method Deprecation</a></li>
<li><a href="#_spark_persistence_updates">Spark Persistence Updates</a></li>
<li><a href="#_logging">Logging</a></li>
<li><a href="#_gremlin_server_sandboxing">Gremlin Server Sandboxing</a></li>
<li><a href="#_deprecated_supportsaddproperty">Deprecated supportsAddProperty()</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_22">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_system_providers_9">Graph System Providers</a></li>
<li><a href="#_graph_database_providers_12">Graph Database Providers</a></li>
<li><a href="#_graph_processor_providers_2">Graph Processor Providers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_1_0_2">TinkerPop 3.1.0</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_31">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_shading_jackson">Shading Jackson</a></li>
<li><a href="#_partitionstrategy_and_vertexproperty">PartitionStrategy and VertexProperty</a></li>
<li><a href="#_gremlin_server_and_epoll">Gremlin Server and Epoll</a></li>
<li><a href="#_rebindings_deprecated">Rebindings Deprecated</a></li>
<li><a href="#_configurable_driver_channelizer">Configurable Driver Channelizer</a></li>
<li><a href="#_graphson_and_strict_option">GraphSON and Strict Option</a></li>
<li><a href="#_transaction_close_default_behavior">Transaction.close() Default Behavior</a></li>
<li><a href="#_threadlocal_transaction_settings">ThreadLocal Transaction Settings</a></li>
<li><a href="#_hadoop_gremlin">Hadoop-Gremlin</a></li>
<li><a href="#_spark_gremlin">Spark-Gremlin</a></li>
<li><a href="#_tinkergraph_serialization">TinkerGraph Serialization</a></li>
<li><a href="#_deprecation_in_tinkergraph">Deprecation in TinkerGraph</a></li>
<li><a href="#_deprecation_in_gremlin_groovy">Deprecation in Gremlin-Groovy</a></li>
<li><a href="#_gephi_traversal_visualization">Gephi Traversal Visualization</a></li>
<li><a href="#_alterations_to_graphtraversal">Alterations to GraphTraversal</a></li>
<li><a href="#_aliasing_remotes_in_the_console">Aliasing Remotes in the Console</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_23">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_system_providers_10">Graph System Providers</a></li>
<li><a href="#_driver_providers_5">Driver Providers</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_0_0">TinkerPop 3.0.0</a>
<ul class="sectlevel1">
<li><a href="#_tinkerpop_3_0_2">TinkerPop 3.0.2</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_32">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_bulkloadervertexprogram_blvp">BulkLoaderVertexProgram (BLVP)</a></li>
<li><a href="#_tinkergraph">TinkerGraph</a></li>
<li><a href="#_gremlin_driver_and_server">Gremlin Driver and Server</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_24">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_driver_providers_4">Graph Driver Providers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tinkerpop_3_0_1">TinkerPop 3.0.1</a>
<ul class="sectlevel2">
<li><a href="#_upgrading_for_users_33">Upgrading for Users</a>
<ul class="sectlevel3">
<li><a href="#_gremlin_server">Gremlin Server</a></li>
<li><a href="#_neo4j">Neo4j</a></li>
</ul>
</li>
<li><a href="#_upgrading_for_providers_25">Upgrading for Providers</a>
<ul class="sectlevel3">
<li><a href="#_graph_system_providers_11">Graph System Providers</a></li>
<li><a href="#_graph_driver_providers_5">Graph Driver Providers</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#appendix">Appendix</a>
<ul class="sectlevel1">
<li><a href="#_tinkerpop_2_x">TinkerPop 2.x</a>
<ul class="sectlevel2">
<li><a href="#graphml-format">GraphML Format</a></li>
<li><a href="#_tinkerpop2_data_migration">TinkerPop2 Data Migration</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<a class="image" href="http://tinkerpop.apache.org"><img src="../images/apache-tinkerpop-logo.png" alt="apache tinkerpop logo" width="500"></a>
</div>
</div>
</div>
</div>
<h1 id="_tinkerpop_upgrade_information" class="sect0">TinkerPop Upgrade Information</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>This document helps users of Apache TinkerPop to understand the changes that come with each software release.  It
outlines new features, how to resolve breaking changes and other information specific to a release.  This document is
useful to end-users who are building applications on TinkerPop, but it is equally useful to TinkerPop providers, who
build libraries and other systems on the core APIs and protocols that TinkerPop exposes.</p>
</div>
<div class="paragraph">
<p>These providers include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Graph System Provider</p>
<div class="ulist">
<ul>
<li>
<p>Graph Database Provider</p>
</li>
<li>
<p>Graph Processor Provider</p>
</li>
</ul>
</div>
</li>
<li>
<p>Graph Driver Provider</p>
</li>
<li>
<p>Graph Language Provider</p>
</li>
<li>
<p>Graph Plugin Provider</p>
</li>
</ul>
</div>
</div>
</div>
<h1 id="_tinkerpop_3_4_0" class="sect0">TinkerPop 3.4.0</h1>
<div class="openblock partintro">
<div class="content">
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/apache/tinkerpop/master/docs/static/images/avant-gremlin.png" alt="avant gremlin" width="225">
</div>
</div>
<div class="paragraph">
<p><strong>Avant-Gremlin Construction #3 for Theremin and Flowers</strong></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_4_3">TinkerPop 3.4.3</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: August 5, 2019</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.4.3/CHANGELOG.asciidoc#release-3-4-3">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_deprecated_store">Deprecated store()</h4>
<div class="paragraph">
<p>The <code>store()</code>-step and <code>aggregate()</code>-step do the same thing in different ways, where the former is lazy and the latter
is eager in the side-effect collection of objects from the traversal. The different behaviors can be thought of as
differing applications of <code>Scope</code> where <code>global</code> is eager and <code>local</code> is lazy. As a result, there is no need for both
steps when one will do.</p>
</div>
<div class="paragraph">
<p>As of 3.4.3, <code>store(String)</code> is now deprecated in favor of <code>aggregate(Scope, String)</code> where the <code>Scope</code> should be set
to <code>local</code> to ensure the same functionality as <code>store()</code>. Note that <code>aggregate('x')</code> is the same as
<code>aggregate(global,'x')</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1553">TINKERPOP-1553</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_deprecate_gryo_in_gremlin_server">Deprecate Gryo in Gremlin Server</h4>
<div class="paragraph">
<p>Gryo is now deprecated as a serialization format for Gremlin Server, however, it is still configured as a default
option in the sample configuration files packaged with the server. The preferred serialization option should now be
GraphBinary. Note that Gremlin Console is now configured to use GraphBinary by default.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2250">TINKERPOP-2250</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers">Upgrading for Providers</h3>
<div class="sect3">
<h4 id="_graph_driver_providers">Graph Driver Providers</h4>
<div class="sect4">
<h5 id="_gremlin_server_test_configuration">Gremlin Server Test Configuration</h5>
<div class="paragraph">
<p>Gremlin Server has a test configuration built into its Maven build process which all integration tests and Gremlin
Language Variants use to validate their operations. While this approach has worked really well for test automation
within Maven, there are often times where it would be helpful to simply have Gremlin Server running with that
configuration. This need is especially true when developing Gremlin Language Variants which is something that is done
outside of the JVM.</p>
</div>
<div class="paragraph">
<p>This release introduces a Docker script that will start Gremlin Server with this test configuration. It can be started
with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">docker/gremlin-server.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once started, it is then possible to run GLV tests directly from a debugger against this instance which should
hopefully reduce development friction.</p>
</div>
<div class="paragraph">
<p>see: <a href="http://tinkerpop.apache.org/docs/3.4.3/dev/developer/#docker-integration">Developer Documentation</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_4_2">TinkerPop 3.4.2</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: May 28, 2019</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.4.2/CHANGELOG.asciidoc#release-3-4-2">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_2">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_per_request_options">Per Request Options</h4>
<div class="paragraph">
<p>In 3.4.0, the notion of <code>RequestOptions</code> were added so that users could have an easier way to configure settings on
individual requests made through the Java driver. While that change provided a way to set those configurations for
script based requests, it didn&#8217;t include options to make those settings in a <code>Traversal</code> submitted via <code>Bytecode</code>. In
this release those settings become available via <code>with()</code> step on the <code>TraversalSource</code> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">GraphTraversalSource g = traversal().withRemote(conf);
<span class="predefined-type">List</span>&lt;Vertex&gt; vertices = g.with(RemoteConnection.PER_REQUEST_TIMEOUT, <span class="integer">500</span>).V().out(<span class="string"><span class="delimiter">&quot;</span><span class="content">knows</span><span class="delimiter">&quot;</span></span>).toList()</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2211">TINKERPOP-2211</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin_console_timeout">Gremlin Console Timeout</h4>
<div class="paragraph">
<p>The Gremlin Console timeout that is set by <code>:remote config timeout x</code> was client-side only in prior versions, which
meant that if the console timeout was less than the server timeout the client would timeout but the server might still
be processing the request. Similarly, a longer timeout on the console would not change the server and the timeout
would occur sooner than expected. These discrepancies often led to confusion.</p>
</div>
<div class="paragraph">
<p>As of 3.4.0, the Java Driver API allowed for timeout settings to be more easily passed per request, so the console
was modified for this current version to pass the console timeout for each remote submission thus yielding more
consistent and intuitive behavior.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2203">TINKERPOP-2203</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_2">Upgrading for Providers</h3>
<div class="sect3">
<h4 id="_graph_system_providers">Graph System Providers</h4>
<div class="sect4">
<h5 id="_warnings">Warnings</h5>
<div class="paragraph">
<p>It is now possible to pass warnings over the Gremlin Server protocol using a <code>warnings</code> status attribute. The warnings
are expected to be a string value or a <code>List</code> of string values which can be consumed by the user or tools that check
for that status attribute. Note that Gremlin Console is one such tool that will respond to this status attribute - it
will print the messages to the console as they are detected when doing remote script submissions.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2216">TINKERPOP-2216</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_graph_driver_providers_2">Graph Driver Providers</h4>
<div class="sect4">
<h5 id="_graphbinary_api_change">GraphBinary API Change</h5>
<div class="paragraph">
<p>In GraphBinary serialization, Java <code>write()</code> and <code>writeValue()</code> from <code>TypeSerializer&lt;T&gt;</code> interface now take a Netty&#8217;s
<code>ByteBuf</code> instance instead of an <code>ByteBufAllocator</code>, that way the same buffer instance gets reused during the write
of a message. Additionally, we took the opportunity to remove the unused parameter from <code>ResponseMessageSerializer</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2161">TINKERPOP-2161</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_4_1">TinkerPop 3.4.1</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: March 18, 2019</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.4.1/CHANGELOG.asciidoc#release-3-4-1">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_3">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_mix_sparql_and_gremlin">Mix SPARQL and Gremlin</h4>
<div class="paragraph">
<p>In the initial release of <code>sparql-gremlin</code> it was only possible to execute a SPARQL query and have it translate to
Gremlin. Therefore, it was only possible to write a query like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; g.sparql(&quot;SELECT ?name ?age WHERE { ?person v:name ?name . ?person v:age ?age }&quot;)
==&gt;[name:marko,age:29]
==&gt;[name:vadas,age:27]
==&gt;[name:josh,age:32]
==&gt;[name:peter,age:35]
gremlin&gt; g.sparql(&quot;SELECT * WHERE { }&quot;)
==&gt;v[1]
==&gt;v[2]
==&gt;v[3]
==&gt;v[4]
==&gt;v[5]
==&gt;v[6]</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this release, however, it is now possible to further process that result with Gremlin steps:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; g.sparql(&quot;SELECT ?name ?age WHERE { ?person v:name ?name . ?person v:age ?age }&quot;).select(&quot;name&quot;)
==&gt;marko
==&gt;vadas
==&gt;josh
==&gt;peter
gremlin&gt; g.sparql(&quot;SELECT * WHERE { }&quot;).out(&quot;knows&quot;).values(&quot;name&quot;)
==&gt;vadas
==&gt;josh</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2171">TINKERPOP-2171</a>,
<a href="http://tinkerpop.apache.org/docs/3.4.1/reference/#sparql-with-gremlin">Reference Documentation</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_3">Upgrading for Providers</h3>
<div class="sect3">
<h4 id="_graph_database_providers">Graph Database Providers</h4>
<div class="sect4">
<h5 id="_graphbinary_serializer_changes">GraphBinary Serializer Changes</h5>
<div class="paragraph">
<p>In GraphBinary serialization, Java <code>write()</code> and <code>writeValue()</code> from <code>TypeSerializer&lt;T&gt;</code> interface now take a Netty&#8217;s
<code>ByteBuf</code> instance instead of an <code>ByteBufAllocator</code>, that way the same buffer instance gets reused during the write
of a message. Additionally, we took the opportunity to remove the unused parameter from <code>ResponseMessageSerializer</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2161">TINKERPOP-2161</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_4_0_2">TinkerPop 3.4.0</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: January 2, 2019</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.4.0/CHANGELOG.asciidoc#release-3-4-0">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_4">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_sparql_gremlin">sparql-gremlin</h4>
<div class="paragraph">
<p>The <code>sparql-gremlin</code> module is a <a href="https://en.wikipedia.org/wiki/SPARQL">SPARQL</a> to Gremlin compiler, which allows
SPARQL to be executed over any TinkerPop-enabled graph system.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">graph = TinkerFactory.createModern()
g = graph.traversal(SparqlTraversalSource)
g.sparql(<span class="string"><span class="delimiter">&quot;&quot;&quot;</span><span class="content">SELECT ?name ?age
            WHERE { ?person v:name ?name . ?person v:age ?age }
            ORDER BY ASC(?age)</span><span class="delimiter">&quot;&quot;&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1878">TINKERPOP-1878</a>,
<a href="http://tinkerpop.apache.org/docs/3.4.0/reference/#sparql-gremlin">Reference Documentation</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin_net_driver_improvements">Gremlin.NET Driver Improvements</h4>
<div class="paragraph">
<p>The Gremlin.NET driver now uses request pipelining. This allows connections to be reused for different requests in
parallel which should lead to better utilization of connections. The <code>ConnectionPool</code> now also has a fixed size
whereas it could previously create an unlimited number of connections. Each <code>Connection</code> can handle up to
<code>MaxInProcessPerConnection</code> requests in parallel. If this limit is reached for all connections, then a
<code>NoConnectionAvailableException</code> is thrown which makes this a breaking change.</p>
</div>
<div class="paragraph">
<p>These settings can be set as properties on the <code>ConnectionPoolSettings</code> instance that can be passed to the <code>GremlinClient</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1774">TINKERPOP-1774</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1775">TINKERPOP-1775</a>,
<a href="http://tinkerpop.apache.org/docs/3.4.0/reference/#_connection_pool">Reference Documentation</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_indexing_of_collections">Indexing of Collections</h4>
<div class="paragraph">
<p>TinkerPop 3.4.0 adds a new <code>index()</code>-step, which allows users to transform simple collections into index collections or maps.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>gremlin&gt; g.V().hasLabel("software").values("name").fold().
......1&gt;   order(local).
......2&gt;   index().unfold()
==&gt;[lop,0]
==&gt;[ripple,1]
gremlin&gt; g.V().hasLabel("person").values("name").fold().
......1&gt;   order(local).by(decr).
......2&gt;   index().
......3&gt;     with(WithOptions.indexer, WithOptions.map)
==&gt;[0:vadas,1:peter,2:marko,3:josh]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_modulation_of_valuemap">Modulation of valueMap()</h4>
<div class="paragraph">
<p>The <code>valueMap()</code> step now supports <code>by</code> and <code>with</code> modulation, which also led to the deprecation of <code>valueMap(true)</code> overloads.</p>
</div>
<div class="sect4">
<h5 id="_by_modulation">by() Modulation</h5>
<div class="paragraph">
<p>With the help of the <code>by()</code> modulator <code>valueMap()</code> result values can now be adjusted, which is particularly useful to turn multi-/list-values into single values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>gremlin&gt; g.V().hasLabel("person").valueMap()
==&gt;[name:[marko],age:[29]]
==&gt;[name:[vadas],age:[27]]
==&gt;[name:[josh],age:[32]]
==&gt;[name:[peter],age:[35]]
gremlin&gt; g.V().hasLabel("person").valueMap().by(unfold())
==&gt;[name:marko,age:29]
==&gt;[name:vadas,age:27]
==&gt;[name:josh,age:32]
==&gt;[name:peter,age:35]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_with_modulation">with() Modulation</h5>
<div class="paragraph">
<p>The <code>with()</code> modulator can be used to include certain tokens (<code>id</code>, <code>label</code>, <code>key</code> and/or <code>value</code>).</p>
</div>
<div class="paragraph">
<p>The old way (still valid, but deprecated):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>gremlin&gt; g.V().hasLabel("software").valueMap(true)
==&gt;[id:10,label:software,name:[gremlin]]
==&gt;[id:11,label:software,name:[tinkergraph]]
gremlin&gt; g.V().has("person","name","marko").properties("location").valueMap(true)
==&gt;[id:6,key:location,value:san diego,startTime:1997,endTime:2001]
==&gt;[id:7,key:location,value:santa cruz,startTime:2001,endTime:2004]
==&gt;[id:8,key:location,value:brussels,startTime:2004,endTime:2005]
==&gt;[id:9,key:location,value:santa fe,startTime:2005]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The new way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>gremlin&gt; g.V().hasLabel("software").valueMap().with(WithOptions.tokens)
==&gt;[id:10,label:software,name:[gremlin]]
==&gt;[id:11,label:software,name:[tinkergraph]]
gremlin&gt; g.V().has("person","name","marko").properties("location").valueMap().with(WithOptions.tokens)
==&gt;[id:6,key:location,value:san diego,startTime:1997,endTime:2001]
==&gt;[id:7,key:location,value:santa cruz,startTime:2001,endTime:2004]
==&gt;[id:8,key:location,value:brussels,startTime:2004,endTime:2005]
==&gt;[id:9,key:location,value:santa fe,startTime:2005]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Furthermore, now there&#8217;s a finer control over which of the tokens should be included:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>gremlin&gt; g.V().hasLabel("software").valueMap().with(WithOptions.tokens, WithOptions.labels)
==&gt;[label:software,name:[gremlin]]
==&gt;[label:software,name:[tinkergraph]]
gremlin&gt; g.V().has("person","name","marko").properties("location").valueMap().with(WithOptions.tokens, WithOptions.values)
==&gt;[value:san diego,startTime:1997,endTime:2001]
==&gt;[value:santa cruz,startTime:2001,endTime:2004]
==&gt;[value:brussels,startTime:2004,endTime:2005]
==&gt;[value:santa fe,startTime:2005]</code></pre>
</div>
</div>
<div class="paragraph">
<p>As shown above, the support of the <code>with()</code> modulator for <code>valueMap()</code> makes the <code>valueMap(boolean)</code> overload
superfluous, hence this overload is now deprecated. This is a breaking API change, since <code>valueMap()</code> will now always
yield instances of type <code>Map&lt;Object, Object&gt;</code>. Prior this change only the <code>valueMap(boolean)</code> overload yielded
<code>Map&lt;Object, Object&gt;</code> objects, <code>valueMap()</code> without the boolean parameter used to yield instances of type
<code>Map&lt;String, Object&gt;</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2059">TINKERPOP-2059</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_predicate_number_comparison">Predicate Number Comparison</h4>
<div class="paragraph">
<p>In previous versions <code>within()</code> and <code>without()</code> performed strict number comparisons; that means these predicates did
not only compare number values, but also the type. This was inconsistent with how other predicates (like <code>eq</code>, <code>gt</code>,
etc.) work. All predicates will now ignore the number type and instead compare numbers only based on their value.</p>
</div>
<div class="paragraph">
<p>Old behavior:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>gremlin&gt; g.V().has("age", eq(32L))
==&gt;v[4]
gremlin&gt; g.V().has("age", within(32L, 35L))
gremlin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>New behavior:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>gremlin&gt; g.V().has("age", eq(32L))
==&gt;v[4]
gremlin&gt; g.V().has("age", within(32L, 35L))
==&gt;v[4]
==&gt;v[6]</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2058">TINKERPOP-2058</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_referenceelementstrategy">ReferenceElementStrategy</h4>
<div class="paragraph">
<p>Gremlin Server has had some inconsistent behavior in the serialization of the results it returns. Remote traversals
based on Gremlin bytecode always detach returned graph elements to "reference" (i.e. removes properties and only
include the <code>id</code> and <code>label</code>), but scripts would detach graph elements and include the properties. For 3.4.0,
TinkerPop introduces the <code>ReferenceElementStrategy</code> which can be configured on a <code>GraphTraversalSource</code> to always
detach to "reference".</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; graph = TinkerFactory.createModern()
==&gt;tinkergraph[vertices:6 edges:6]
gremlin&gt; g = graph.traversal().withStrategies(ReferenceElementStrategy.instance())
==&gt;graphtraversalsource[tinkergraph[vertices:6 edges:6], standard]
gremlin&gt; v = g.V().has('person','name','marko').next()
==&gt;v[1]
gremlin&gt; v.class
==&gt;class org.apache.tinkerpop.gremlin.structure.util.reference.ReferenceVertex
gremlin&gt; v.properties()
gremlin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The packaged initialization scripts that come with Gremlin Server now pre-configure the sample graphs with this
strategy to ensure that both scripts and bytecode based requests over any protocol (HTTP, websocket, etc) and
serialization format all return a "reference". To revert to the old form, simply remove the strategy in the
initialization script.</p>
</div>
<div class="paragraph">
<p>It is recommended that users choose to configure their <code>GraphTraversalSource</code> instances with <code>ReferenceElementStrategy</code>
as working with "references" only is the recommended method for developing applications with TinkerPop. In the future,
it is possible that <code>ReferenceElementStrategy</code> will be configured by default for all graphs on or off Gremlin Server,
so it would be best to start utilizing it now and grooming existing Gremlin and related application code to account
for it.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2075">TINKERPOP-2075</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_text_predicates">Text Predicates</h4>
<div class="paragraph">
<p>Gremlin now supports simple text predicates on top of the existing <code>P</code> predicates. Both, the new <code>TextP</code> text
predicates and the old <code>P</code> predicates, can be chained using <code>and()</code> and <code>or()</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">gremlin&gt; g.V().has(<span class="string"><span class="delimiter">&quot;</span><span class="content">person</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, containing(<span class="string"><span class="delimiter">&quot;</span><span class="content">o</span><span class="delimiter">&quot;</span></span>)).valueMap()
==&gt;[<span class="key">name</span>:[marko],<span class="key">age</span>:[<span class="integer">29</span>]]
==&gt;[<span class="key">name</span>:[josh],<span class="key">age</span>:[<span class="integer">32</span>]]
gremlin&gt; g.V().has(<span class="string"><span class="delimiter">&quot;</span><span class="content">person</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, containing(<span class="string"><span class="delimiter">&quot;</span><span class="content">o</span><span class="delimiter">&quot;</span></span>).and(gte(<span class="string"><span class="delimiter">&quot;</span><span class="content">j</span><span class="delimiter">&quot;</span></span>).and(endingWith(<span class="string"><span class="delimiter">&quot;</span><span class="content">ko</span><span class="delimiter">&quot;</span></span>)))).valueMap()
==&gt;[<span class="key">name</span>:[marko],<span class="key">age</span>:[<span class="integer">29</span>]]</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2041">TINKERPOP-2041</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_changed_infix_behavior">Changed Infix Behavior</h4>
<div class="paragraph">
<p>The infix notation of <code>and()</code> and <code>or()</code> now supports an arbitrary number of traversals and <code>ConnectiveStrategy</code>
produces a traversal with proper AND and OR semantics.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>Input: a.or.b.and.c.or.d.and.e.or.f.and.g.and.h.or.i

*BEFORE*
Output: or(a, or(and(b, c), or(and(d, e), or(and(and(f, g), h), i))))

*NOW*
Output: or(a, and(b, c), and(d, e), and(f, g, h), i)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Furthermore, previous versions failed to apply 3 or more <code>and()</code> steps using the infix notation, this is now fixed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">gremlin&gt; g.V().has(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">marko</span><span class="delimiter">&quot;</span></span>).and().has(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, lt(<span class="integer">30</span>)).or().has(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">josh</span><span class="delimiter">&quot;</span></span>).and().has(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, gt(<span class="integer">30</span>)).and().out(<span class="string"><span class="delimiter">&quot;</span><span class="content">created</span><span class="delimiter">&quot;</span></span>)
==&gt;v[<span class="integer">1</span>]
==&gt;v[<span class="integer">4</span>]</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2029">TINKERPOP-2029</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_graphbinary">GraphBinary</h4>
<div class="paragraph">
<p>GraphBinary is a new language agnostic, network serialization format designed to replace Gryo and GraphSON. At this
time it is only available on the JVM, but support will be added for other languages in upcoming releases. The
serializer has been configured in Gremlin Server&#8217;s packaged configuration files. The serializer can be configured
using the Java driver as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Cluster cluster = Cluster.build(<span class="string"><span class="delimiter">&quot;</span><span class="content">localhost</span><span class="delimiter">&quot;</span></span>).port(<span class="integer">8182</span>).
                          serializer(Serializers.GRAPHBINARY_V1D0).create();
Client client = cluster.connect();
<span class="predefined-type">List</span>&lt;<span class="predefined-type">Result</span>&gt; r = client.submit(<span class="string"><span class="delimiter">&quot;</span><span class="content">g.V().has('person','name','marko')</span><span class="delimiter">&quot;</span></span>).all().join();</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1942">TINKERPOP-1942</a>,
<a href="http://tinkerpop.apache.org/docs/3.4.0/dev/io/#graphbinary">IO Documentation</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_status_attributes">Status Attributes</h4>
<div class="paragraph">
<p>The Gremlin Server protocol allows for status attributes to be returned in responses. These attributes were typically
for internal use, but were designed with extensibility in mind so that providers could place return their own
attributes to calling clients. Unfortunately, unless the client was being used with protocol level requests (which
wasn&#8217;t convenient) those attributes were essentially hidden from view. As of this version however, status attributes
are fully retrievable for both successful requests and exceptions.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1913">TINKERPOP-1913</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_with_step">with() Step</h4>
<div class="paragraph">
<p>This version of TinkerPop introduces the <code>with()</code>-step to Gremlin. It isn&#8217;t really a step but is instead a step
modulator. This modulator allows the step it is modifying to accept configurations that can be used to alter the
behavior of the step itself. A good example of its usage is shown with the revised syntax of the <code>pageRank()</code>-step
which now uses <code>with()</code> to replace the old <code>by()</code> options:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">g.V().hasLabel(<span class="string"><span class="delimiter">'</span><span class="content">person</span><span class="delimiter">'</span></span>).
  pageRank().
    with(PageRank.edges, __.outE(<span class="string"><span class="delimiter">'</span><span class="content">knows</span><span class="delimiter">'</span></span>)).
    with(PageRank.propertyName, <span class="string"><span class="delimiter">'</span><span class="content">friendRank</span><span class="delimiter">'</span></span>).
  order().
    by(<span class="string"><span class="delimiter">'</span><span class="content">friendRank</span><span class="delimiter">'</span></span>,desc).
  valueMap(<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">friendRank</span><span class="delimiter">'</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>A similar change was made for <code>peerPressure()</code>-step:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">g.V().hasLabel(<span class="string"><span class="delimiter">'</span><span class="content">person</span><span class="delimiter">'</span></span>).
  peerPressure().
    with(PeerPressure.propertyName, <span class="string"><span class="delimiter">'</span><span class="content">cluster</span><span class="delimiter">'</span></span>).
  group().
    by(<span class="string"><span class="delimiter">'</span><span class="content">cluster</span><span class="delimiter">'</span></span>).
    by(<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the <code>by()</code> modulators still work, but should be considered deprecated and open for removal in a future
release where breaking changes are allowed.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1975">TINKERPOP-1975</a>,
<a href="http://tinkerpop.apache.org/docs/3.4.0/reference/#with-step">Reference Documentation</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_shortestpath_step">shortestPath() Step</h4>
<div class="paragraph">
<p>Calculating the <a href="https://en.wikipedia.org/wiki/Shortest_path_problem">shortest path</a> between vertices is a common
graph use case. While the traversal to determine a shortest path can be expressed in Gremlin, this particular problem
is common enough that the feature has been encapsulated into its own step, demonstrated as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; g.withComputer().V().has('name','marko').
......1&gt;   shortestPath().with(ShortestPath.target, has('name','peter'))
==&gt;[v[1],v[3],v[6]]</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1990">TINKERPOP-1990</a>,
<a href="http://tinkerpop.apache.org/docs/3.4.0/reference/#shortestpath-step">Reference Documentation</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_connectedcomponent_step">connectedComponent() Step</h4>
<div class="paragraph">
<p>In prior version of TinkerPop, it was recommended that the identification of
<a href="https://en.wikipedia.org/wiki/Connected_component_(graph_theory)">Connected Component</a> instances in a graph be
computed by way of a reasonably complex bit of Gremlin that looked something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">g.V().emit(cyclicPath().or().not(both())).repeat(both()).until(cyclicPath()).
  path().aggregate(<span class="string"><span class="delimiter">&quot;</span><span class="content">p</span><span class="delimiter">&quot;</span></span>).
  unfold().dedup().
  map(__.as(<span class="string"><span class="delimiter">&quot;</span><span class="content">v</span><span class="delimiter">&quot;</span></span>).select(<span class="string"><span class="delimiter">&quot;</span><span class="content">p</span><span class="delimiter">&quot;</span></span>).unfold().
         filter(unfold().where(eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">v</span><span class="delimiter">&quot;</span></span>))).
         unfold().dedup().order().by(id).fold()).
  dedup()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above approach had a number of drawbacks that included a large execution cost as well as incompatibilities in OLAP.
To simplify usage of this commonly use graph algorithm, TinkerPop 3.4.0 introduces the <code>connectedComponent()</code> step
which reduces the above operation to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">g.withComputer().V().connectedComponent()</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is important to note that this step does require the use of a <code>GraphComputer</code> to work, as it utilizes a
<code>VertexProgram</code> behind the scenes.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1967">TINKERPOP-1967</a>,
<a href="http://tinkerpop.apache.org/docs/3.4.3/reference/#connectedcomponent-step">Reference Documentation</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_io_step">io() Step</h4>
<div class="paragraph">
<p>There have been some important changes to IO operations for reading and writing graph data. The use of <code>Graph.io()</code>
has been deprecated to further remove dependence on the Graph (Structure) API for users and to extend these basic
operations to GLV users by making these features available as part of the Gremlin language.</p>
</div>
<div class="paragraph">
<p>It is now possible to simply use Gremlin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">graph = ...
g = graph.traversal()
g.io(someInputFile).read().iterate()
g.io(someOutputFile).write().iterate()</code></pre>
</div>
</div>
<div class="paragraph">
<p>While <code>io()</code>-step is still single-threaded for OLTP style loading, it can be utilized in conjunction with OLAP which
internally uses <code>CloneVertexProgram</code> and therefore any graph <code>InputFormat</code> or <code>OutputFormat</code> can be configured in
conjunction with this step for parallel loads of large datasets.</p>
</div>
<div class="paragraph">
<p>It is also worth noting that the <code>io()</code>-step may be overridden by graph providers to utilize their native bulk-loading
features, so consult the documentation of the implementation being used to determine if there are any improved
efficiencies there.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1996">TINKERPOP-1996</a>,
<a href="http://tinkerpop.apache.org/docs/3.4.0/reference/#io-step">Reference Documentation</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_per_request_options_2">Per Request Options</h4>
<div class="paragraph">
<p>The Java driver now allows for various options to be set on a per-request basis via new overloads to <code>submit()</code> that
accept <code>RequestOption</code> instances. A good use-case for this feature is to set a per-request override to the
<code>scriptEvaluationTimeout</code> so that it only applies to the current request.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Cluster cluster = Cluster.open();
Client client = cluster.connect();
RequestOptions options = RequestOptions.build().timeout(<span class="integer">500</span>).create();
<span class="predefined-type">List</span>&lt;<span class="predefined-type">Result</span>&gt; result = client.submit(<span class="string"><span class="delimiter">&quot;</span><span class="content">g.V()</span><span class="delimiter">&quot;</span></span>, options).all().get();</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1342">TINKERPOP-1342</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_min_max_and_comparable">min() max() and Comparable</h4>
<div class="paragraph">
<p>Previously <code>min()</code> and <code>max()</code> were only working for numeric values. This has been changed and these steps can now
operate over any <code>Comparable</code> value. The common workaround was the combination of <code>order().by()</code> and <code>limit()</code> as
shown here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">gremlin&gt; g.V().values(<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>).order().by().limit(<span class="integer">1</span>)      <span class="comment">// workaround for min()</span>
==&gt;josh
gremlin&gt; g.V().values(<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>).order().by(decr).limit(<span class="integer">1</span>)  <span class="comment">// workaround for max()</span>
==&gt;vadas</code></pre>
</div>
</div>
<div class="paragraph">
<p>Any attempt to use <code>min()</code> or <code>max()</code> on non-numeric values lead to an exception:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">gremlin&gt; g.V().values(<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>).min()
java.lang.String cannot be cast to java.lang.Number
<span class="predefined-type">Type</span> <span class="string"><span class="delimiter">'</span><span class="content">:help</span><span class="delimiter">'</span></span> or <span class="string"><span class="delimiter">'</span><span class="content">:h</span><span class="delimiter">'</span></span> <span class="keyword">for</span> help.
Display stack trace? [yN]</code></pre>
</div>
</div>
<div class="paragraph">
<p>With the changes in this release these kind of queries became a lot easier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">gremlin&gt; g.V().values(<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>).min()
==&gt;josh
gremlin&gt; g.V().values(<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>).max()
==&gt;vadas</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_nested_loop_support">Nested Loop Support</h4>
<div class="paragraph">
<p>Traversals now support nesting of <code>repeat()</code> loops.</p>
</div>
<div class="paragraph">
<p>These can now be used to repeat another traversal while in a looped context, either inside the body of a <code>repeat()</code> or
in its step modifiers (<code>until()</code> or <code>emit()</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">gremlin&gt; g.V().repeat(__.in(<span class="string"><span class="delimiter">'</span><span class="content">traverses</span><span class="delimiter">'</span></span>).repeat(__.in(<span class="string"><span class="delimiter">'</span><span class="content">develops</span><span class="delimiter">'</span></span>)).emit()).emit().values(<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>)
==&gt;stephen
==&gt;matthias
==&gt;marko</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-967">TINKERPOP-967</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_eventstrategy_api">EventStrategy API</h4>
<div class="paragraph">
<p>There were some minor modifications to how <code>EventStrategy</code> is constructed and what can be expected from events raised
from the addition of new properties.</p>
</div>
<div class="paragraph">
<p>With respect to the change in terms of <code>EventStrategy</code> construction, the <code>detach()</code> builder method formerly took a
<code>Class</code> as an argument and that <code>Class</code> was meant to be one of the various "detachment factories" or <code>null</code>. That
approach was a bit confusing, so that signature has changed to <code>detach(EventStrategy.Detachment)</code> where the argument
is a more handy enum of detachment options.</p>
</div>
<div class="paragraph">
<p>As for the changes related to events themselves, it is first worth noting that the previously deprecated
<code>vertexPropertyChanged(Vertex, Property, Object, Object&#8230;&#8203;)</code> on <code>MutationListener</code> has been removed for what should
have originally been the correct signature of <code>vertexPropertyChanged(Vertex, VertexProperty, Object, Object&#8230;&#8203;)</code>. In
prior versions when this method and its related <code>edgePropertyChanged()</code> and <code>vertexPropertyPropertyChanged()</code> were
triggered by way of the addition of a new property a "fake" property was included with a <code>null</code> value for the
"oldValue" argument to these methods (as it did not exist prior to this event). That was a bit awkward to reason about
when dealing with that event. To make this easier, the event now raises with a <code>KeyedVertexProperty</code> or
<code>KeyedProperty</code> instance, which only contains a property key and no value in them.</p>
</div>
<div class="paragraph">
<p><a href="https://issues.apache.org/jira/browse/TINKERPOP-1831">TINKERPOP-1831</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_reducing_barrier_steps">Reducing Barrier Steps</h4>
<div class="paragraph">
<p>The behavior of <code>min()</code>, <code>max()</code>, <code>mean()</code> and <code>sum()</code> has been modified to return no result if there&#8217;s no input.
Previously these steps yielded the internal seed value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">gremlin&gt; g.V().values(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>).min()
==&gt;NaN
gremlin&gt; g.V().values(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>).max()
==&gt;NaN
gremlin&gt; g.V().values(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>).mean()
==&gt;NaN
gremlin&gt; g.V().values(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>).sum()
==&gt;<span class="integer">0</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>These traversals will no longer emit a result. Note, that this also affects more complex scenarios, e.g. if these
steps are used in <code>by()</code> modulators:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">gremlin&gt; g.V().group().
......<span class="integer">1</span>&gt;   by(label).
......<span class="integer">2</span>&gt;   by(outE().values(<span class="string"><span class="delimiter">&quot;</span><span class="content">weight</span><span class="delimiter">&quot;</span></span>).sum())
==&gt;[<span class="key">software</span>:<span class="integer">0</span>,<span class="key">person</span>:<span class="float">3.5</span>]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since software vertices have no outgoing edges and thus no weight values to sum, <code>software</code> will no longer show up in
the result. In order to get the same result as before, one would have to add a <code>coalesce()</code>-step:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">gremlin&gt; g.V().group().
......<span class="integer">1</span>&gt;   by(label).
......<span class="integer">2</span>&gt;   by(outE().values(<span class="string"><span class="delimiter">&quot;</span><span class="content">weight</span><span class="delimiter">&quot;</span></span>).sum())
==&gt;[<span class="key">person</span>:<span class="float">3.5</span>]
gremlin&gt; g.V().group().
......<span class="integer">1</span>&gt;   by(label).
......<span class="integer">2</span>&gt;   by(coalesce(outE().values(<span class="string"><span class="delimiter">&quot;</span><span class="content">weight</span><span class="delimiter">&quot;</span></span>), constant(<span class="integer">0</span>)).sum())
==&gt;[<span class="key">software</span>:<span class="integer">0</span>,<span class="key">person</span>:<span class="float">3.5</span>]</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1777">TINKERPOP-1777</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_order_of_select_scopes">Order of select() Scopes</h4>
<div class="paragraph">
<p>The order of select scopes has been changed to: maps, side-effects, paths. Previously the order was: side-effects,
maps, paths - which made it almost impossible to select a specific map entry if a side-effect with the same name
existed.</p>
</div>
<div class="paragraph">
<p>The following snippets illustrate the changed behavior:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">gremlin&gt; g.V(<span class="integer">1</span>).
......<span class="integer">1</span>&gt;   group(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>).
......<span class="integer">2</span>&gt;     by(__.constant(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)).
......<span class="integer">3</span>&gt;     by(__.values(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>)).
......<span class="integer">4</span>&gt;   select(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)
==&gt;[<span class="key">a</span>:marko]
gremlin&gt; g.V(<span class="integer">1</span>).
......<span class="integer">1</span>&gt;   group(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>).
......<span class="integer">2</span>&gt;     by(__.constant(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)).
......<span class="integer">3</span>&gt;     by(__.values(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>)).
......<span class="integer">4</span>&gt;   select(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>).select(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)
==&gt;[<span class="key">a</span>:marko]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Above is the old behavior; the second <code>select("a")</code> has no effect, it selects the side-effect <code>a</code> again, although one
would expect to get the map entry <code>a</code>. What follows is the new behavior:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">gremlin&gt; g.V(<span class="integer">1</span>).
......<span class="integer">1</span>&gt;   group(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>).
......<span class="integer">2</span>&gt;     by(__.constant(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)).
......<span class="integer">3</span>&gt;     by(__.values(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>)).
......<span class="integer">4</span>&gt;   select(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)
==&gt;[<span class="key">a</span>:marko]
gremlin&gt; g.V(<span class="integer">1</span>).
......<span class="integer">1</span>&gt;   group(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>).
......<span class="integer">2</span>&gt;     by(__.constant(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)).
......<span class="integer">3</span>&gt;     by(__.values(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>)).
......<span class="integer">4</span>&gt;   select(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>).select(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)
==&gt;marko</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1522">TINKERPOP-1522</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_graphson_bulkset">GraphSON BulkSet</h4>
<div class="paragraph">
<p>In earlier versions of TinkerPop, <code>BulkSet</code> was coerced to a <code>List</code> for GraphSON which was convenient in that it
didn&#8217;t add a new data type to support, but inconvenient in that it meant that certain process tests were not consistent
in terms of how they ran and the benefits of the <code>BulkSet</code> were "lost" in that the "bulk" was being resolved server
side. With the addition of <code>BulkSet</code> as a GraphSON type the "bulk" is now resolved on the client side by the language
variant. How that resolution occurs depends upon the language variant. For Java, there is a <code>BulkSet</code> object which
maintains that structure sent from the server. For the other variants, the <code>BulkSet</code> is deserialized to a <code>List</code> form
which results in a much larger memory footprint than what is contained the <code>BulkSet</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2111">TINKERPOP-2111</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_python_bindings">Python Bindings</h4>
<div class="paragraph">
<p>Bindings were formerly created using a Python 2-tuple as a bit of syntactic sugar, but all other language variants
used an explicit <code>Bindings</code> object which <code>gremlin-python</code> already had in place. To make all work variants behave
consistently, the 2-tuple syntax has been removed in favor of the explicit <code>Bindings.of()</code> option.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python">g.V(Bindings.of(<span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>,<span class="integer">1</span>)).out(<span class="string"><span class="delimiter">'</span><span class="content">created</span><span class="delimiter">'</span></span>).map(<span class="keyword">lambda</span>: (<span class="string"><span class="delimiter">&quot;</span><span class="content">it.get().value('name').length()</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">gremlin-groovy</span><span class="delimiter">&quot;</span></span>)).sum()</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2116">TINKERPOP-2116</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_deprecation_and_removal">Deprecation and Removal</h4>
<div class="paragraph">
<p>This section describes newly deprecated classes, methods, components and patterns of usage as well as which previously
deprecated features have been officially removed or repurposed.</p>
</div>
<div class="sect4">
<h5 id="_moving_of_remotegraph">Moving of RemoteGraph</h5>
<div class="paragraph">
<p><code>RemoteGraph</code> was long ago deprecated in favor of <code>withRemote()</code>. It became even less useful with the introduction of
the <code>AnonymousTraversalSource</code> concept in 3.3.5. It&#8217;s only real use was for testing remote bytecode based traversals
in the test suite as the test suite requires an actual <code>Graph</code> object to function properly. As such, <code>RemoteGraph</code> has
been moved to <code>gremlin-test</code>. It should no longer be used in any capacity besides that.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2079">TINKERPOP-2079</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_removal_of_giraph_support">Removal of Giraph Support</h5>
<div class="paragraph">
<p>Support for Giraph has been removed as of this version. There were a number of reasons for this decision which were
discussed in the community prior to taking this step. Users should switch to Spark for their OLAP based graph-computing
needs.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1930">TINKERPOP-1930</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_removal_of_rebindings_options">Removal of Rebindings Options</h5>
<div class="paragraph">
<p>The "rebindings" option is no longer supported for clients. It was deprecated long ago at 3.1.0. The server will not
respond to them on any channel - websockets, nio or HTTP. Use the "aliases" option instead.</p>
</div>
<div class="paragraph">
<p><a href="https://issues.apache.org/jira/browse/TINKERPOP-1705">TINKERPOP-1705</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_gremlin_server_sh_i_removal">gremlin-server.sh -i Removal</h5>
<div class="paragraph">
<p>The <code>-i</code> option for installing dependencies in Gremlin Server was long ago deprecated and has now been removed. Please
use <code>install</code> as its replacement going forward.</p>
</div>
<div class="paragraph">
<p><a href="https://issues.apache.org/jira/browse/TINKERPOP-2031">TINKERPOP-2031</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_deprecation_removal">Deprecation Removal</h5>
<div class="paragraph">
<p>The following deprecated classes, methods or fields have been removed in this version:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>gremlin-core</code></p>
<div class="ulist">
<ul>
<li>
<p><code>org.apache.tinkerpop.gremlin.jsr223.ImportCustomizer#GREMLIN_CORE</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.remote.RemoteGraph</code> - moved to <code>gremlin-test</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.remote.RemoteConnection.submit(Traversal)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.remote.RemoteConnection.submit(Bytecode)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.remote.traversal.strategy.decoration.RemoteStrategy#identity()</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.TraversalEngine</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.engine.*</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.PartitionStrategy.Builder#addReadPartition(String)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.SubgraphStrategy.Builder#edgeCriterion(Traversal)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.SubgraphStrategy.Builder#vertexCriterion(Traversal)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.step.map.LambdaCollectingBarrierStep.Consumers</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.step.util.HasContainer#makeHasContainers(String, P)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.step.util.event.MutationListener#vertexPropertyChanged(Vertex, Property, Object, Object&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.structure.Element.Exceptions#elementAlreadyRemoved(Class, Object)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.structure.Graph.Exceptions#elementNotFound(Class, Object)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.structure.Graph.Exceptions#elementNotFound(Class, Object, Exception)</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>gremlin-driver</code></p>
<div class="ulist">
<ul>
<li>
<p><code>org.apache.tinkerpop.gremlin.driver.Client#rebind(String)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.driver.Client.ReboundClusterdClient</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.driver.Tokens#ARGS_REBINDINGS</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>gremlin-groovy</code></p>
<div class="ulist">
<ul>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.jsr223.GremlinGroovyScriptEngine.close()</code> - no longer implements <code>AutoCloseable</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>gremlin-server</code></p>
<div class="ulist">
<ul>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.GraphManager#getGraphs()</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.GraphManager#getTraversalSources()</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.Settings#serializedResponseTimeout</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.Settings.AuthenticationSettings#className</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.handler.OpSelectorHandler(Settings, GraphManager, GremlinExecutor, ScheduledExecutorService)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.op.AbstractOpProcessor#makeFrame(ChannelHandlerContext, RequestMessage, MessageSerializer serializer, boolean, List, ResponseStatusCode code)</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>hadoop-graph</code></p>
<div class="ulist">
<ul>
<li>
<p><code>org.apache.tinkerpop.gremlin.hadoop.structure.HadoopConfiguration#getGraphInputFormat()</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.hadoop.structure.HadoopConfiguration#getGraphOutputFormat()</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please see the javadoc deprecation notes or upgrade documentation specific to when the deprecation took place to
understand how to resolve this breaking change.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1143">TINKERPOP-1143</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1296">TINKERPOP-1296</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1705">TINKERPOP-1705</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1707">TINKERPOP-1707</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1954">TINKERPOP-1954</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1986">TINKERPOP-1986</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-2079">TINKERPOP-2079</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-2103">TINKERPOP-2103</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_deprecated_graphsonmessageserializergremlinv2d0">Deprecated GraphSONMessageSerializerGremlinV2d0</h5>
<div class="paragraph">
<p>The <code>GraphSONMessageSerializerGremlinV2d0</code> serializer is now analogous to <code>GraphSONMessageSerializerV2d0</code> and therefore
redundant. It has technically always been equivalent in terms of functionality as both serialized to the same format
(i.e. GraphSON 2.0 with embedded types). It is no longer clear why these two classes were established this way, but
it does carry the negative effect where multiple serializer versions could not be bound to Gremlin Server&#8217;s HTTP
endpoint as the MIME types conflicted on <code>application/json</code>. By simply making both message serializers support
<code>application/json</code> and <code>application/vnd.gremlin-v2.0+json</code>, it then became possible to overcome that limitation. In
short, prefer use of <code>GraphSONMessageSerializerV2d0</code> when possible.</p>
</div>
<div class="paragraph">
<p>Note that this is a breaking change in the sense that <code>GraphSONMessageSerializerV2d0</code> will no longer set the header of
requests messages to <code>application/json</code>. As a result, older versions of Gremlin Server not configured with
<code>GraphSONMessageSerializerGremlinV2d0</code> will not find a deserializer to match the request.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1984">TINKERPOP-1984</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_removed_groovy_sql_dependency">Removed groovy-sql Dependency</h5>
<div class="paragraph">
<p>Gremlin Console and Gremlin Server no longer include groovy-sql.  If you depend on groovy-sql,
you can install it in Gremlin Console or Gremlin Server using the plugin system.</p>
</div>
<div class="paragraph">
<p>Console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>:install org.codehaus.groovy groovy-sql 2.5.2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>bin/gremlin-server.sh install org.codehaus.groovy groovy-sql 2.5.2</code></pre>
</div>
</div>
<div class="paragraph">
<p>If your project depended on groovy-sql transitively, simply include it in your project&#8217;s build file (e.g. maven: pom.xml).</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2037">TINKERPOP-2037</a></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_4">Upgrading for Providers</h3>
<div class="sect3">
<h4 id="_graph_database_providers_2">Graph Database Providers</h4>
<div class="sect4">
<h5 id="_io_step_2">io() Step</h5>
<div class="paragraph">
<p>The new <code>io()</code>-step that was introduced provides some new changes to consider. Note that <code>Graph.io()</code> has been
deprecated and users are no longer instructed to utilize that method. It is not yet decided when that method will be
removed completely, but given the public nature of it and the high chance of common usage, it should be hanging around
for some time.</p>
</div>
<div class="paragraph">
<p>As with any step in Gremlin, it is possible to replace it with a more provider specific implementation that could be
more efficient. Developing a <code>TraversalStrategy</code> to do this is encouraged, especially for those graph providers who
might have special bulk loaders that could be abstracted by this step. Examples of this are already shown with
<code>HadoopGraph</code> which replaces the simple single-threaded loader with <code>CloneVertexProgram</code>. Graph providers are
encouraged to use the <code>with()</code> step to capture any necessary configurations required for their underlying loader to
work. Graph providers should not feel restricted to <code>graphson</code>, <code>gryo</code> and <code>graphml</code> formats either. If a graph
supports CSV or some custom graph specific format, it shouldn&#8217;t be difficult to gather the configurations necessary to
make that available to users.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1996">TINKERPOP-1996</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_caching_graph_features">Caching Graph Features</h5>
<div class="paragraph">
<p>For graph implementations that have expensive creation times, it can be time consuming to run the TinkerPop test suite
as each test run requires a <code>Graph</code> instance even if the test is ultimately ignored becaue it doesn&#8217;t pass the feature
checks. To possibly help alleviate this problem, the <code>GraphProvider</code> interface now includes this method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="keyword">default</span> Optional&lt;Graph.Features&gt; getStaticFeatures() {
    <span class="keyword">return</span> Optional.empty();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This method can be implemented to return a cacheable set of features for a <code>Graph</code> generated from that <code>GraphProvider</code>.
Assuming this method is faster than the cost of creating a new <code>Graph</code> instance, the test suite should execute
significantly faster depending on how many tests end up being ignored.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1518">TINKERPOP-1518</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_configuring_interface">Configuring Interface</h5>
<div class="paragraph">
<p>There were some changes to interfaces that were related to <code>Step</code>. A new <code>Configuring</code> interface was added that was
helpful in the implementation of the <code>with()</code>-step modulator. This new interface extends the <code>Parameterizing</code> interface
(which moved to the <code>org.apache.tinkerpop.gremlin.process.traversal.step</code> package with the other step interfaces) and
in turn is extended by the <code>Mutating</code> interface. Making this change meant that the <code>Mutating.addPropertyMutations()</code>
method could be removed in favor of the new <code>Configuring.configure()</code> method.</p>
</div>
<div class="paragraph">
<p>All of the changes above basically mean, that if the <code>Mutating</code> interface was being used in prior versions, the
<code>addPropertyMutations()</code> method simply needs to be changed to <code>configure()</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1975">TINKERPOP-1975</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_optionsstrategy">OptionsStrategy</h5>
<div class="paragraph">
<p><code>OptionsStrategy</code> is a <code>TraversalStrategy</code> that makes it possible for users to set arbitrary configurations on a
<code>Traversal</code>. These configurations can be used by graph providers to allow for traversal-level configurations to be
accessible to their custom steps. A user would write something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">g.withStrategies(OptionsStrategy.build().with(<span class="string"><span class="delimiter">&quot;</span><span class="content">specialLimit</span><span class="delimiter">&quot;</span></span>, <span class="integer">10000</span>).create()).V();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>OptionsStrategy</code> is really only the carrier for the configurations and while users can choose to utilize that
more verbose method for constructing it shown above, it is more elegantly constructed as follows using <code>with()</code>-step:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">g.with(<span class="string"><span class="delimiter">&quot;</span><span class="content">specialLimit</span><span class="delimiter">&quot;</span></span>, <span class="integer">10000</span>)).V();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The graph provider could then access that value of "specialLimit" in their custom step (or elsewhere) as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">OptionsStrategy strategy = <span class="local-variable">this</span>.getTraversal().asAdmin().getStrategies().getStrategy(OptionsStrategy.class).get();
<span class="type">int</span> specialLimit = (<span class="type">int</span>) strategy.getOptions().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">specialLimit</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2053">TINKERPOP-2053</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_removed_hadoop_gremlin_test_artifact">Removed hadoop-gremlin Test Artifact</h5>
<div class="paragraph">
<p>The <code>hadoop-gremlin</code> module no longer generates a test jar that can be used as a test dependency in other modules.
Generally speaking, that approach tends to be a bad practice and can cause build problems with Maven that aren&#8217;t always
obvious to troubleshoot. With the removal of <code>giraph-gremlin</code> for 3.4.0, it seemed even less useful to have this
test artifact present. All tests are still present. The follow provides a basic summary of how this refactoring
occurred:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A new <code>AbstractFileGraphProvider</code> was created in <code>gremlin-test</code> which provided a lot of the features that
<code>HadoopGraphProvider</code> was exposing. Both <code>HadoopGraphProvider</code> and <code>SparkHadoopGraphProvider</code> extend from that class
now.</p>
</li>
<li>
<p><code>ToyIoRegistry</code> and related classes were moved to <code>gremlin-test</code>.</p>
</li>
<li>
<p>The various tests that validated capabilities of <code>Storage</code> have been moved to <code>spark-gremlin</code> and are part of those
tests now. Obviously, that makes those tests specific to Spark testing now. If that location creates a problem for some
reason, that decision can be revisited at some point.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1410">TINKERPOP-1410</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_traversalengine_moved">TraversalEngine Moved</h5>
<div class="paragraph">
<p>The <code>TraversalEngine</code> interface was deprecated in 3.2.0 along with all related methods that used it and classes that
implemented it. It was replaced by the <code>Computer</code> interface and provided a much nicer way to plug different
implementations of <code>Computer</code> into a traversal. <code>TraversalEngine</code> was never wholly removed however as it had some deep
dependencies in the inner workings of the test suite. That infrastructure has largely remained as is until now.</p>
</div>
<div class="paragraph">
<p>As of 3.4.0, <code>TraversalEngine</code> is no longer in <code>gremlin-core</code> and can instead be found in <code>gremlin-test</code> as it is
effectively a "test-only" component and serves no other real function. As explained in the javadocs going back to
3.2.0, providers should implement the <code>Computer</code> class and use that instead. At this point, graph providers should have
long ago moved to the <code>Computer</code> infrastructure as methods for constructing a <code>TraversalSource</code> with a
<code>TraversalEngine</code> were long ago removed.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1143">TINKERPOP-1143</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_upsert_graph_feature">Upsert Graph Feature</h5>
<div class="paragraph">
<p>Some <code>Graph</code> implementations may be able to offer upsert functionality for vertices and edges, which can help improve
usability and performance. To help make it clear to users that a graph operates in this fashion, the <code>supportsUpsert()</code>
feature has been added to both <code>Graph.VertexFeatures</code> and <code>Graph.EdgeFeatures</code>. By default, both of these methods will
return <code>false</code>.</p>
</div>
<div class="paragraph">
<p>Should a provider wish to support this feature, the behavior of <code>addV()</code> and/or <code>addE()</code> should change such that when
a vertex or edge with the same identifier is provided, the respective step will insert the new element if that value
is not present or update an existing element if it is found. The method by which the provider "identifies" an element
is completely up to the capabilities of that provider. In the most simple fashion, a graph could simply check the
value of the supplied <code>T.id</code>, however graphs that support some form of schema will likely have other methods for
determining whether or not an existing element is present.</p>
</div>
<div class="paragraph">
<p>The extent to which TinkerPop tests "upsert" is fairly narrow. Graph providers that choose to support this feature
should consider their own test suites carefully to ensure appropriate coverage.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1685">TINKERPOP-1685</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_typetranslator_changes">TypeTranslator Changes</h5>
<div class="paragraph">
<p>The <code>TypeTranslator</code> experienced a change in its API and <code>GroovyTranslator</code> a change in expectations.</p>
</div>
<div class="paragraph">
<p><code>TypeTranslator</code> now implements <code>BiFunction</code> and takes the graph traversal source name as an argument along with the
object to translate. This interface is implemented by default for Groovy with <code>GroovyTranslator.DefaultTypeTranslator</code>
which encapsulates all the functionality of what <code>GroovyTranslator</code> formerly did by default. To provide customize
translation, simply extend the <code>DefaultTypeTranslator</code> and override the methods.</p>
</div>
<div class="paragraph">
<p><code>GroovyTranslator</code> now expects that the <code>TypeTranslator</code> provide to it as part of its <code>of()</code> static method overload
is "complete" - i.e. that it provides all the functionality to translate the types passed to it. Thus, a "complete"
<code>TypeTranslator</code> is one that does everything that <code>DefaultTypeTranslator</code> does as a minimum requirement. Therefore,
the extension model described above is the easiest way to get going with a custom <code>TypeTranslator</code> approach.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2072">TINKERPOP-2072</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_graph_driver_providers_3">Graph Driver Providers</h4>
<div class="sect4">
<h5 id="_deprecation_removal_in_remoteconnection">Deprecation Removal in RemoteConnection</h5>
<div class="paragraph">
<p>The two deprecated synchronous <code>submit()</code> methods on the <code>RemoteConnection</code> interface have been removed, which means
that <code>RemoteConnection</code> implementations will need to implement <code>submitAsync(Bytecode)</code> if they have not already done
so.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2103">TINKERPOP-2103</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<h1 id="_tinkerpop_3_3_0" class="sect0">TinkerPop 3.3.0</h1>
<div class="openblock partintro">
<div class="content">
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/apache/tinkerpop/master/docs/static/images/gremlin-mozart.png" alt="gremlin mozart" width="225">
</div>
</div>
<div class="paragraph">
<p><strong>Gremlin Symphony #40 in G Minor</strong></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_3_8">TinkerPop 3.3.8</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: August 5, 2019</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.3.8/CHANGELOG.asciidoc#release-3-3-8">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_5">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_branch_steps_accept_predicates_and_traversals">Branch Steps Accept Predicates and Traversals</h4>
<div class="paragraph">
<p>Prior to this version, branch steps (in particular <code>BranchStep</code> and <code>ChooseStep</code>) could only handle constant values and <code>Pick</code> tokens. Starting in this version, these steps will also accept
predicates and traversals as show in the example below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; g = TinkerFactory.createModern().traversal()
==&gt;graphtraversalsource[tinkergraph[vertices:6 edges:6], standard]
gremlin&gt; g.V().hasLabel(&quot;person&quot;).
......1&gt;   group().
......2&gt;     by(&quot;name&quot;).
......3&gt;     by(branch(values(&quot;age&quot;)).
......4&gt;          option(29, constant(&quot;almost old&quot;)).
......5&gt;          option(__.is(32), constant(&quot;looks like josh&quot;)).
......6&gt;          option(lt(29), constant(&quot;pretty young&quot;)).
......7&gt;          option(lt(35), constant(&quot;younger than peter&quot;)).
......8&gt;          option(gte(30), constant(&quot;pretty old&quot;)).
......9&gt;          option(none, constant(&quot;mysterious&quot;)).fold()).
.....10&gt;   unfold()
==&gt;peter=[pretty old]
==&gt;vadas=[pretty young, younger than peter]
==&gt;josh=[looks like josh, younger than peter, pretty old]
==&gt;marko=[almost old, younger than peter]</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1084">TINKERPOP-1084</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_python_datetime">Python DateTime</h4>
<div class="paragraph">
<p>With GraphSON, the <code>g:Date</code> is meant to represent a millisecond-precision offset from the unix epoch, but earlier
version of Gremlin Python were using the timezone of the local system to handle serialization and deserialization,
thus resulting in incorrect conversion. This issue is now resolved. It may be necessary to remove workarounds that have
been introduced to combat this problem.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2264">TINKERPOP-2264</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_javascript_withcomputer">JavaScript withComputer()</h4>
<div class="paragraph">
<p>Gremlin-Javascript now supports <code>withComputer()</code> syntax, which means that it is now possible in Javascript to utilize
Gremlin steps that require a <code>GraphComputer</code> to execute (e.g. <code>pageRank()</code> and <code>peerPressure()</code>).</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2251">TINKERPOP-2251</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_javascript_and_net_hasnext">JavaScript and .NET hasNext()</h4>
<div class="paragraph">
<p>There is now greater consistency across Gremlin Language Variants with <code>hasNext()</code> support added to both JavaScript
and .NET. Note that in .NET, the proper method name follows C# capitalization semantics and is referred to as
<code>HasNext()</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1921">TINKERPOP-1921</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_deprecated_getsideeffects">Deprecated getSideEffects()</h4>
<div class="paragraph">
<p><code>Traversal.getSideEffects()</code> has been deprecated for purposes of external calls by end-users. While the method is still
present TinkerPop no longer guarantees its existence in future versions or consistency of its behavior, especially for
Gremlin Language Variants and remote traversal execution. If this method is currently in use to gather side-effect
results after traversal execution, please change such code to use <code>cap()</code>-step. For example, code like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; t = g.V().hasLabel('person').aggregate('p').out('created')
==&gt;v[3]
==&gt;v[5]
==&gt;v[3]
==&gt;v[3]
gremlin&gt; t.getSideEffects().get('p')
==&gt;v[1]
==&gt;v[2]
==&gt;v[4]
==&gt;v[6]</code></pre>
</div>
</div>
<div class="paragraph">
<p>should be converted to something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; g.V().hasLabel('person').aggregate('p').out('created').union(fold(),cap('p'))
==&gt;[v[3],v[3],v[3],v[5]]
==&gt;[v[1],v[2],v[4],v[6]]</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://issues.apache.org/jira/browse/TINKERPOP-2265">TINKERPOP-2265</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_3_7">TinkerPop 3.3.7</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: May 28, 2019</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.3.7/CHANGELOG.asciidoc#release-3-3-7">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_6">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_javascript_dsl_pattern">JavaScript DSL Pattern</h4>
<div class="paragraph">
<p>Gremlin DSL developers had to rely on monkey patching to build a Domain Specific Language in JavaScript. With this
latest version, the process is a bit more elegant and largely handled by extending existing core classes of
<code>Gremlin-JavaScript</code> which is a bit more in-line with other language variant patterns for DSL development.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2089">TINKERPOP-2089</a>,
<a href="http://tinkerpop.apache.org/docs/3.3.7/reference/#gremlin-javascript-dsl">Reference Documentation</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin_console_interrupt">Gremlin Console Interrupt</h4>
<div class="paragraph">
<p>There are occasions where a traversal (or other evaluation) takes longer than expected to complete. Common examples
of these situations typically include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Accidentally executing <code>g.V()</code> (i.e. full graph scan) on a very large graph as an OLTP style traversal.</p>
</li>
<li>
<p>Not terminating a <code>repeat()</code> properly which results in an infinite loop.</p>
</li>
<li>
<p>Bad data might create a cycle in the graph where one wasn&#8217;t expected.</p>
</li>
<li>
<p>Failing to properly bound a traversal&#8217;s path through one or more supernodes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In earlier versions, the only option was to kill the Gremlin Console (typically with <code>ctrl+c</code>), but as of this version
<code>ctrl+c</code> will be intercepted and attempt to interrupt whatever process is currently executing.</p>
</div>
<div class="paragraph">
<p>See <a href="https://issues.apache.org/jira/browse/TINKERPOP-2181">TINKERPOP-2181</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_removed_gperfutils_dependency">Removed gperfutils Dependency</h4>
<div class="paragraph">
<p>Gremlin Console included references to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.gperfutils<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>gbench<span class="tag">&lt;/artifactId&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.gperfutils<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>gprof<span class="tag">&lt;/artifactId&gt;</span>
<span class="tag">&lt;/dependency</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>to provide some benchmarking and profiling tools for the Utilities Plugin. Neither project is well maintained at this
point and given that TinkerPop has moved past the versions of Groovy that are supported by these tools it doesn&#8217;t
make sense to retain the dependencies. Users who wish to continue to use these tools can obviously do so still by
manually adding the dependencies to the Gremlin Console or with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; :install org.gperfutils gbench &lt;version&gt;
gremlin&gt; :install org.gperfutils gprof &lt;version&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and then import the appropriate classes and methods to use.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2182">TINKERPOP-2182</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_5">Upgrading for Providers</h3>
<div class="sect3">
<h4 id="_graph_database_providers_3">Graph Database Providers</h4>
<div class="sect4">
<h5 id="_detection_of_anti_patterns">Detection of Anti-Patterns</h5>
<div class="paragraph">
<p>This release adds a strategy named <code>EdgeLabelVerificationStrategy</code>. The strategy will not be added by default to the traversal source, however, providers can add it explicitly to encourage (or enforce)
users to always specify at least one edge label. <code>EdgeLabelVerificationStrategy</code> can be configured to either throw an exception if no edge label was specified, log a warning or do both.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; // throw an exception if edge label was not specified
gremlin&gt; g = TinkerFactory.createModern().traversal().withStrategies(EdgeLabelVerificationStrategy.build().throwException().create())
==&gt;graphtraversalsource[tinkergraph[vertices:6 edges:6], standard]
gremlin&gt; g.V(1).out('knows')
==&gt;v[2]
==&gt;v[4]
gremlin&gt; g.V(1).out()
The provided traversal contains a vertex step without any specified edge label: VertexStep(OUT,vertex)
Type ':help' or ':h' for help.
Display stack trace? [yN]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; // log a warning if edge label was not specified (Log4j has to be configured properly)
gremlin&gt; g = TinkerFactory.createModern().traversal().withStrategies(EdgeLabelVerificationStrategy.build().logWarning().create())
==&gt;graphtraversalsource[tinkergraph[vertices:6 edges:6], standard]
gremlin&gt; g.V(1).out('knows')
==&gt;v[2]
==&gt;v[4]
gremlin&gt; g.V(1).out()
WARN  org.apache.tinkerpop.gremlin.process.traversal.strategy.verification.EdgeLabelVerificationStrategy  - The provided traversal contains a vertex step without any specified edge label: VertexStep(OUT,vertex)
==&gt;v[3]
==&gt;v[2]
==&gt;v[4]</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2191">TINKERPOP-2191</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_3_6">TinkerPop 3.3.6</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: March 18, 2019</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.3.6/CHANGELOG.asciidoc#release-3-3-6">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_7">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_anti_patterns_documentation">Anti-Patterns Documentation</h4>
<div class="paragraph">
<p>The Gremlin Recipes documentation now has a new section which discusses anti-patterns in Gremlin. Its subsections
detail commonly seen approaches to the Gremlin language which can lead to poorly written and/or under-performing
traversals. The new Anti-Patterns Section can be found
<a href="http://tinkerpop.apache.org/docs/3.3.6/recipes/#_anti_patterns">here</a>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2114">TINKERPOP-2114</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_3_5">TinkerPop 3.3.5</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: January 2, 2019</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.3.5/CHANGELOG.asciidoc#release-3-3-5">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_8">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_anonymoustraversalsource">AnonymousTraversalSource</h4>
<div class="paragraph">
<p>The <code>AnonymousTraversalSource</code> provides for a more unified syntax for <code>TraversalSource</code> construction by placing greater
user emphasis on the creation of the source rather than the <code>Graph</code> it is connected to. It has a number of different
static <code>traversal()</code> methods available and when imported as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.apache.tinkerpop.gremlin.process.traversal.AnonymousTraversalSource.traversal</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>allows <code>TraversalSource</code> construction syntax such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; g = traversal().withGraph(TinkerFactory.createModern())
==&gt;graphtraversalsource[tinkergraph[vertices:6 edges:6], standard]
gremlin&gt; g = traversal().withRemote('conf/remote-graph.properties')
==&gt;graphtraversalsource[emptygraph[empty], standard]
gremlin&gt; g = traversal().withRemote(DriverRemoteConnection.using('localhost',8182))
==&gt;graphtraversalsource[emptygraph[empty], standard]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Typically, this syntax is used for "remote" traversal construction for bytecode based requests, but has the option to
bind a local <code>Graph</code> instance to it as well. It doesn&#8217;t save much typing to do so obviously, so it may not be best
used in that situation. Python, Javascript and .NET have similar syntax.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2078">TINKERPOP-2078</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_bytecode_command">Bytecode Command</h4>
<div class="paragraph">
<p>The Gremlin Console now has a new <code>:bytecode</code> command to help users work more directly with Gremlin bytecode. The
command is more of a debugging tool than something that would be used for every day purposes. It is sometimes helpful
to look at Gremlin bytecode directly and the process for viewing it in human readable format is not a single step
process. It is also not immediately clear how to convert bytecode to a Gremlin string. The <code>:bytecode</code> command aims to
help with both of these issues:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; g = TinkerFactory.createModern().traversal()
==&gt;graphtraversalsource[tinkergraph[vertices:6 edges:6], standard]
gremlin&gt; :bytecode from g.V().out('knows')  <span class="invisible">//</span><b class="conum">1</b>
==&gt;{&quot;@type&quot;:&quot;g:Bytecode&quot;,&quot;@value&quot;:{&quot;step&quot;:[[&quot;V&quot;],[&quot;out&quot;,&quot;knows&quot;]]}}
gremlin&gt; :bytecode translate g {&quot;@type&quot;:&quot;g:Bytecode&quot;,&quot;@value&quot;:{&quot;step&quot;:[[&quot;V&quot;],[&quot;out&quot;,&quot;knows&quot;]]}} <span class="invisible">//</span><b class="conum">2</b>
==&gt;g.V().out(&quot;knows&quot;)</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2050">TINKERPOP-2050</a>,
<a href="http://tinkerpop.apache.org/docs/3.3.5/reference/#_console_commands">Reference Documentation - Console Commands</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_configurable_class_map_cache">Configurable Class Map Cache</h4>
<div class="paragraph">
<p>The "class map" cache in Gremlin Server (specifically the <code>GremlinGroovyScriptEngine</code>) that holds compiled scripts is
now fully configurable via the <code>GroovyCompilerGremlinPlugin.classMapCacheSpecification</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-2038">TINKERPOP-2038</a>,
<a href="http://tinkerpop.apache.org/docs/3.3.5/reference/#gremlin-server-cache">Reference Documentation - Cache Management</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_rangestep_optimizing_strategy">RangeStep Optimizing Strategy</h4>
<div class="paragraph">
<p>A new strategy named <code>EarlyLimitStrategy</code> was added. The strategy will try to find a better spot for any <code>RangeStep</code>,
which is as early as possible in the traversal. If possible it will also merge multiple <code>RangeStep`s into a single one
by recalculating the range for the first step and removing the second. If it turns out that the merge of two steps won&#8217;t
produce a valid range (an empty result), then the `EarlyLimitStrategy</code> will remove the <code>RangeStep`s and insert a `NoneStep</code>
instead.</p>
</div>
<div class="paragraph">
<p>This strategy is particularly useful when a provider implementation generates the queries to the underlying database. By
making sure that the ranges are applied as early as possible, we can ensure that the underlying database is only asked
for the least amount of data necessary to continue the traversal evaluation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_6">Upgrading for Providers</h3>
<div class="sect3">
<h4 id="_graph_database_providers_4">Graph Database Providers</h4>
<div class="sect4">
<h5 id="_optout_on_graphprovider">OptOut on GraphProvider</h5>
<div class="paragraph">
<p>It is not uncommon for those utilizing the TinkerPop test suite to have multiple configurations of their graph under
test. The multiple configurations typically manifest as multiple <code>GraphProvider</code> implementations which supply the
different configurations to test. It is sometimes the case, that a particular <code>Graph</code> configuration cannot support all
of the tests in the suite at which point some less than straightforward approaches to dealing with that present as
solutions.</p>
</div>
<div class="paragraph">
<p>It has always been possible to apply an <code>OptOut</code> annotation to a <code>Graph</code> instance, to avoid a particular test
execution. It is now possible to apply that same <code>OptOut</code> to a <code>GraphProvider</code> instance for that same purpose.
Hopefully, this feature will make multiple configuration testing easier.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_3_4">TinkerPop 3.3.4</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: October 15, 2018</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.3.4/CHANGELOG.asciidoc#release-3-3-4">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_9">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_introducing_order_asc_and_order_desc">Introducing Order.asc and Order.desc</h4>
<div class="paragraph">
<p>The <code>Order</code> enum originally introduced <code>incr</code> for ascending order and <code>decr</code> for descending order. It&#8217;s not clear why
they were named this way when common querying parlance would call for <code>asc</code> and <code>desc</code> for those respective cases. Note
that <code>incr</code> and <code>decr</code> have not been removed - just deprecated and thus marked for future removal. Prefer <code>asc</code> and
<code>desc</code> going forward when writing Gremlin and look to update existing code using the deprecated values.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1956">TINKERPOP-1956</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_timedinterrupt">TimedInterrupt</h4>
<div class="paragraph">
<p>In Gremlin Server, it is best not to use the <code>timedInterrupt</code> option on <code>GroovyCompilerGremlinPlugin</code> because it
can compete with the <code>scriptEvaluationTimeout</code> setting and produce a different error path. Simply rely on
<code>scriptEvaluationTimeout</code> as it covers both script evaluation time and result iteration time.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1778">TINKERPOP-1778</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_3_3">TinkerPop 3.3.3</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: May 8, 2018</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.3.3/CHANGELOG.asciidoc#release-3-3-3">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_10">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_credential_dsl_changes">Credential DSL Changes</h4>
<div class="paragraph">
<p>The Credential DSL has been modified to work as a standard Java-based Gremlin DSL. The now deprecated old approach
used a "graph wrapping" style that was developed long before the
<a href="http://tinkerpop.apache.org/docs/current/reference/#gremlin-java-dsl">recommended method</a> for building DSLs was
published. Under this new model, the DSL is initialized via traversal as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">CredentialTraversalSource credentials = graph.traversal(CredentialTraversalSource.class)
credentials.user(<span class="string"><span class="delimiter">&quot;</span><span class="content">stephen</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>).iterate()
credentials.users(<span class="string"><span class="delimiter">&quot;</span><span class="content">stephen</span><span class="delimiter">&quot;</span></span>).valueMap().next()
credentials.users().count().next()
credentials.users(<span class="string"><span class="delimiter">&quot;</span><span class="content">stephen</span><span class="delimiter">&quot;</span></span>).drop().iterate()</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1903">TINKERPOP-1903</a>,
<a href="http://tinkerpop.apache.org/docs/3.3.2/reference/#security">Reference Documentation - Security</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_3_2">TinkerPop 3.3.2</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: April 2, 2018</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.3.2/CHANGELOG.asciidoc#release-3-3-2">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_11">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_gremlin_python_sets">Gremlin Python Sets</h4>
<div class="paragraph">
<p>Graph traversals that return a <code>Set</code> from Java are now coerced to a <code>List</code> in Python. This change ensures that Python
results match Java results for the same traversal. It is possible to see this problem in prior versions of
gremlin-python where a <code>Set</code> of numbers of different types are returned. In Java, a set of:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">[1,1.0d,2,2.0d]</code></pre>
</div>
</div>
<div class="paragraph">
<p>would be deserialized to the following in Python:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">[1,2]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that the Java <code>Set</code> is coerced to a <code>List</code> in Gremin Python, the Java <code>Set</code> can be fully represented. Users who
require a <code>Set</code> will need to manually convert their <code>List</code> to a <code>Set</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1844">TINKERPOP-1844</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_3_1">TinkerPop 3.3.1</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: December 17, 2017</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.3.1/CHANGELOG.asciidoc#release-3-3-1">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_12">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_gremlin_python_path">Gremlin Python path()</h4>
<div class="paragraph">
<p>There was a bug in GraphSON 3.0 serialization that prevented proper handling of results contain <code>Path</code> object. As a
result, traversals that used and returned results from the <code>path()</code>-step in Python would return unusable results,
but did not actually cause an exception condition. This problem is now resolved.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1799">TINKERPOP-1799</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_added_code_math_code_step_for_scientific_traversal_computing">Added <code>math()</code>-step for Scientific Traversal Computing</h4>
<div class="paragraph">
<p><code>GraphTraversal.math(String)</code> was added. This step provides scientific calculator capabilities to a Gremlin traversal.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">gremlin&gt; g.V().as(<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>).out(<span class="string"><span class="delimiter">'</span><span class="content">knows</span><span class="delimiter">'</span></span>).as(<span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>).math(<span class="string"><span class="delimiter">'</span><span class="content">a + b</span><span class="delimiter">'</span></span>).by(<span class="string"><span class="delimiter">'</span><span class="content">age</span><span class="delimiter">'</span></span>)
==&gt;<span class="float">56.0</span>
==&gt;<span class="float">61.0</span>
gremlin&gt; g.V().as(<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>).out(<span class="string"><span class="delimiter">'</span><span class="content">created</span><span class="delimiter">'</span></span>).as(<span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>).
......<span class="integer">1</span>&gt;   math(<span class="string"><span class="delimiter">'</span><span class="content">b + a</span><span class="delimiter">'</span></span>).
......<span class="integer">2</span>&gt;     by(both().count().math(<span class="string"><span class="delimiter">'</span><span class="content">_ + 100</span><span class="delimiter">'</span></span>)).
......<span class="integer">3</span>&gt;     by(<span class="string"><span class="delimiter">'</span><span class="content">age</span><span class="delimiter">'</span></span>)
==&gt;<span class="float">132.0</span>
==&gt;<span class="float">133.0</span>
==&gt;<span class="float">135.0</span>
==&gt;<span class="float">138.0</span>
gremlin&gt; g.withSack(<span class="integer">1</span>).V(<span class="integer">1</span>).repeat(sack(sum).by(constant(<span class="integer">1</span>))).times(<span class="integer">10</span>).emit().sack().math(<span class="string"><span class="delimiter">'</span><span class="content">sin _</span><span class="delimiter">'</span></span>)
==&gt;<span class="float">0.9092974268256817</span>
==&gt;<span class="float">0.1411200080598672</span>
==&gt;-<span class="float">0.7568024953079282</span>
==&gt;-<span class="float">0.9589242746631385</span>
==&gt;-<span class="float">0.27941549819892586</span>
==&gt;<span class="float">0.6569865987187891</span>
==&gt;<span class="float">0.9893582466233818</span>
==&gt;<span class="float">0.4121184852417566</span>
==&gt;-<span class="float">0.5440211108893698</span>
==&gt;-<span class="float">0.9999902065507035</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1632">TINKERPOP-1632</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_changed_typing_on_code_from_code_and_code_to_code">Changed Typing on <code>from()</code> and <code>to()</code></h4>
<div class="paragraph">
<p>The <code>from()</code> and <code>to()</code>-steps of <code>GraphTraversal</code> have a <code>Traversal&lt;E,Vertex&gt;</code> overload. The <code>E</code> has been changed to <code>?</code>
in order to reduce <code>&lt; &gt;</code>-based coersion in strongly type Gremlin language variants.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1793">TINKERPOP-1793</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_addv_traversal_and_adde_traversal">addV(traversal) and addE(traversal)</h4>
<div class="paragraph">
<p>The <code>GraphTraversal</code> and <code>GraphTraversalSource</code> methods of <code>addV()</code> and <code>addE()</code> have been extended to support dynamic
label determination upon element creation. Both these methods can take a <code>Traversal&lt;?, String&gt;</code> where the first <code>String</code>
returned by the traversal is used as the label of the respective element.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">gremlin&gt; g = TinkerFactory.createModern().traversal()
==&gt;graphtraversalsource[tinkergraph[<span class="key">vertices</span>:<span class="integer">6</span> <span class="key">edges</span>:<span class="integer">6</span>], standard]
gremlin&gt; g.addV(V().has(<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">marko</span><span class="delimiter">'</span></span>).label()).
           property(<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">stephen</span><span class="delimiter">'</span></span>)
==&gt;v[<span class="integer">13</span>]
gremlin&gt; g.V().has(<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">stephen</span><span class="delimiter">'</span></span>).valueMap(<span class="predefined-constant">true</span>)
==&gt;[<span class="key">name</span>:[stephen],<span class="key">label</span>:person,<span class="key">id</span>:<span class="integer">13</span>]
gremlin&gt; g.V().has(<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">stephen</span><span class="delimiter">'</span></span>).
           addE(V().hasLabel(<span class="string"><span class="delimiter">'</span><span class="content">software</span><span class="delimiter">'</span></span>).inE().label()).
             to(V().has(<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">lop</span><span class="delimiter">'</span></span>))
==&gt;e[<span class="integer">15</span>][<span class="integer">13</span>-created-&gt;<span class="integer">3</span>]
gremlin&gt; g.V().has(<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">stephen</span><span class="delimiter">'</span></span>).outE().valueMap(<span class="predefined-constant">true</span>)
==&gt;[<span class="key">label</span>:created,<span class="key">id</span>:<span class="integer">15</span>]
gremlin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1793">TINKERPOP-1793</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_pagerankvertexprogram">PageRankVertexProgram</h4>
<div class="paragraph">
<p>There were two major bugs in the way in which PageRank was being calculated in <code>PageRankVertexProgram</code>. First, teleportation
energy was not being distributed correctly amongst the vertices at each round. Second, terminal vertices (i.e. vertices
with no outgoing edges) did not have their full gathered energy distributed via teleportation.</p>
</div>
<div class="paragraph">
<p>For users upgrading, note that while the relative rank orders will remain "the same," the actual PageRank values will differ
from prior TinkerPop versions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>VERTEX  iGRAPH    TINKERPOP
marko   0.1119788 0.11375485828040575
vadas   0.1370267 0.14598540145985406
lop     0.2665600 0.30472082661863686
josh    0.1620746 0.14598540145985406
ripple  0.2103812 0.1757986539008437
peter   0.1119788 0.11375485828040575</code></pre>
</div>
</div>
<div class="paragraph">
<p>Normalization preserved through computation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>0.11375485828040575 +
0.14598540145985406 +
0.30472082661863686 +
0.14598540145985406 +
0.1757986539008437 +
0.11375485828040575
==&gt;1.00000000000000018</code></pre>
</div>
</div>
<div class="paragraph">
<p>Two other additions to <code>PageRankVertexProgram</code> were provided as well.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>It now calculates the vertex count and thus, no longer requires the user to specify the vertex count.</p>
</li>
<li>
<p>It now allows the user to leverage an epsilon-based convergence instead of having to specify the number of iterations to execute.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1783">TINKERPOP-1783</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_io_defaults">IO Defaults</h4>
<div class="paragraph">
<p>While 3.3.0 released Gryo 3.0 and GraphSON 3.0 and these versions were defaulted in a number of places, it seems that
some key defaults were missed. Specifically, calls to <code>Graph.io(graphson())</code> and <code>Graph.io(gryo())</code> were still using
the old versions. The defaults have now been changed to ensure 3.0 is properly referenced in those cases.</p>
</div>
</div>
<div class="sect3">
<h4 id="_upgrade_neo4j">Upgrade Neo4j</h4>
<div class="paragraph">
<p>See Neo4j&#8217;s <a href="https://neo4j.com/guides/upgrade/">3.2 Upgrade FAQ</a> for a complete guide on how to upgrade from the previous 2.3.3 version. Also note that many of the configuration settings have <a href="https://neo4j.com/developer/kb/manually-migrating-configuration-settings-from-neo4j-2x-to-neo4j-3x/">changed from neo4j 2x to 3x</a></p>
</div>
<div class="paragraph">
<p>In particular, these properties referenced in TinkerPop documentation and configuration were renamed:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Neo4j 2.3 (TinkerPop &lt;= 3.3.0)</th>
<th class="tableblock halign-left valign-top">Neo4j 3.2 (TinkerPop 3.3.1)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">node_auto_indexing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dbms.auto_index.nodes.enabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">relationship_auto_indexing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dbms.auto_index.relationships.enabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ha.cluster_server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ha.host.coordination</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ha.server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ha.host.data</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_7">Upgrading for Providers</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
It is recommended that providers also review all the upgrade instructions specified for users. Many of the
changes there may prove important for the provider&#8217;s implementation.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_graph_database_providers_5">Graph Database Providers</h4>
<div class="sect4">
<h5 id="_io_version_check">IO Version Check</h5>
<div class="paragraph">
<p>In the <code>Graph.io()</code> method, providers are to bootstrap the <code>Io</code> instance returned with their own custom serializers
typically provided through a custom <code>IoRegistry</code> instance. Prior to this change it was not possible to easily determine
the version of <code>Io</code> that was expected (nor was it especially necessary as TinkerPop didn&#8217;t have breaking format changes
between versions). As of 3.3.0 however, there could be IO test incompatibilities for some providers who need to
register a different <code>IoRegistry</code> instance depending on the version the user wants.</p>
</div>
<div class="paragraph">
<p>To allow for that check, the <code>Io</code> interface now has the following method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> &lt;V&gt; <span class="type">boolean</span> requiresVersion(<span class="directive">final</span> V version);</code></pre>
</div>
</div>
<div class="paragraph">
<p>which allows the graph provider to check if a specific <code>GryoVersion</code> or <code>GraphSONVersion</code> is required. Using that
information, the provider could then assign the right <code>IoRegistry</code> to match that.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1767">TINKERPOP-1767</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_3_0_2">TinkerPop 3.3.0</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: August 21, 2017</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.3.0/CHANGELOG.asciidoc#release-3-3-0">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_13">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_packaged_data_files">Packaged Data Files</h4>
<div class="paragraph">
<p>TinkerPop has always packaged sample graphs with its zip distributions. As of 3.3.0, the distributions will only
include Gryo 3.0, GraphSON 3.0 and GraphML (which is unversioned) files. Other versions are not included, but could
obviously be generated using the IO API directly.</p>
</div>
</div>
<div class="sect3">
<h4 id="_graphtraversal_has_methods_re_organized">GraphTraversal Has-Methods Re-Organized</h4>
<div class="paragraph">
<p><code>GraphTraversal.hasXXX()</code>, where <code>XXX</code> is <code>Id</code>, <code>Label</code>, <code>Key</code>, <code>Value</code>, was faulty in that they relied on calling an
intermediate method for flattening <code>Object[]</code> arguments and thus, yielding a non 1-to-1 correspondence between <code>GraphTraversal</code>
and <code>Bytecode</code>. This has been remedied. Most users will not notice this change. Perhaps only some users that may use
Java reflection over <code>GraphTraversal</code> might have a simple problem.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1520">TINKERPOP-1520</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_changes_to_io">Changes to IO</h4>
<div class="sect4">
<h5 id="_gryo_3_0">Gryo 3.0</h5>
<div class="paragraph">
<p>With Gryo, TinkerPop skips version 2.0 and goes right to 3.0 (to maintain better parity with GraphSON versioning).
Gryo 3.0 fixes a number of inconsistencies with Gryo 1.0 and hopefully marks a point where Gryo is better versioned
over time. Gryo 3.0 is not compatible with Gryo 1.0 and is now the default version of Gryo exposed by TinkerPop in
Gremlin Server and IO.</p>
</div>
<div class="paragraph">
<p>It isn&#8217;t hard to switch back to use of Gryo 1.0 if necessary. Here is the approach for writing an entire graph:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Graph graph = TinkerFactory.createModern();
GryoMapper mapper = graph.io(IoCore.gryo()).mapper().version(GryoVersion.V1_0).create()
<span class="keyword">try</span> (<span class="predefined-type">OutputStream</span> os = <span class="keyword">new</span> <span class="predefined-type">FileOutputStream</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">tinkerpop-modern.json</span><span class="delimiter">&quot;</span></span>)) {
    graph.io(IoCore.gryo()).writer().mapper(mapper).create().writeGraph(os, graph)
}

<span class="directive">final</span> Graph newGraph = TinkerGraph.open();
<span class="keyword">try</span> (<span class="predefined-type">InputStream</span> stream = <span class="keyword">new</span> <span class="predefined-type">FileInputStream</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">tinkerpop-modern.json</span><span class="delimiter">&quot;</span></span>)) {
    newGraph.io(IoCore.gryo()).reader().mapper(mapper).create().readGraph(stream, newGraph);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Gremlin Server configurations don&#8217;t include Gryo 1.0 by default:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">serializers</span>:
  - <span class="string"><span class="content">{ className: org.apache.tinkerpop.gremlin.driver.ser.GryoMessageSerializerV3d0, config: { ioRegistries: [org.apache.tinkerpop.gremlin.tinkergraph.structure.TinkerIoRegistryV3d0] }}</span></span>             <span class="comment"># application/vnd.gremlin-v3.0+gryo</span>
  - <span class="string"><span class="content">{ className: org.apache.tinkerpop.gremlin.driver.ser.GryoMessageSerializerV3d0, config: { serializeResultToString: true }}</span></span>                                                                       <span class="comment"># application/vnd.gremlin-v3.0+gryo-stringd</span>
  - <span class="string"><span class="content">{ className: org.apache.tinkerpop.gremlin.driver.ser.GraphSONMessageSerializerV3d0, config: { ioRegistries: [org.apache.tinkerpop.gremlin.tinkergraph.structure.TinkerIoRegistryV3d0] }}</span></span>         <span class="comment"># application/json</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>but adding an entry as follows will add it back:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">serializers</span>:
  - <span class="string"><span class="content">{ className: org.apache.tinkerpop.gremlin.driver.ser.GryoMessageSerializerV1d0, config: { ioRegistries: [org.apache.tinkerpop.gremlin.tinkergraph.structure.TinkerIoRegistryV1d0] }}</span></span>             <span class="comment"># application/vnd.gremlin-v1.0+gryo</span>
  - <span class="string"><span class="content">{ className: org.apache.tinkerpop.gremlin.driver.ser.GryoMessageSerializerV3d0, config: { ioRegistries: [org.apache.tinkerpop.gremlin.tinkergraph.structure.TinkerIoRegistryV3d0] }}</span></span>             <span class="comment"># application/vnd.gremlin-v3.0+gryo</span>
  - <span class="string"><span class="content">{ className: org.apache.tinkerpop.gremlin.driver.ser.GryoMessageSerializerV3d0, config: { serializeResultToString: true }}</span></span>                                                                       <span class="comment"># application/vnd.gremlin-v3.0+gryo-stringd</span>
  - <span class="string"><span class="content">{ className: org.apache.tinkerpop.gremlin.driver.ser.GraphSONMessageSerializerV3d0, config: { ioRegistries: [org.apache.tinkerpop.gremlin.tinkergraph.structure.TinkerIoRegistryV3d0] }}</span></span>         <span class="comment"># application/json</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To use Gryo 1.0 with the Java driver, just specify the 1.0 serializer directly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">GryoMapper.Builder builder = GryoMapper.build().
        version(GryoVersion.V1_0).
        addRegistry(TinkerIoRegistryV1d0.instance());
Cluster cluster = Cluster.build().serializer(GryoMessageSerializerV1d0(builder));</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1698">TINKERPOP-1698</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_graphson_3_0">GraphSON 3.0</h5>
<div class="paragraph">
<p>GraphSON 3.0 finishes what GraphSON 2.0 began by taking the extra step to include the following types: <code>g:Map</code>,
<code>g:List</code> and <code>g:Set</code>. With these types it is now possible to get expected Gremlin results in GLVs just as one would
if using Java. This is especially true of the <code>g:Map</code> type, which allows non-string keys values, something not allowed
in regular JSON maps. This allows for common traversals like <code>g.V().groupCount()</code> to work, where the traversal groups
on a <code>Vertex</code> or some other complex object.</p>
</div>
<div class="paragraph">
<p>Note that GraphSON 3.0 does not have an option to be without types. This was a feature of 1.0 and 2.0, but it is no
longer supported. There is little point to such a feature as we see more movement toward GLVs, which require types,
and less usage of scripts with custom parsing of results.</p>
</div>
<div class="paragraph">
<p>Both TinkerGraph and Gremlin Server have been defaulted to work with GraphSON 3.0. For TinkerGraph this means that
the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Graph graph = TinkerFactory.createModern();
graph.io(IoCore.graphson()).writeGraph(<span class="string"><span class="delimiter">&quot;</span><span class="content">tinkerpop-modern.json</span><span class="delimiter">&quot;</span></span>);

<span class="directive">final</span> Graph newGraph = TinkerGraph.open();
newGraph.io(IoCore.graphson()).readGraph(<span class="string"><span class="delimiter">&quot;</span><span class="content">tinkerpop-modern.json</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>will write and read GraphSON 3.0 format rather than 1.0. To use 1.0 (or 2.0 for that matter) format simply set the
<code>version()</code> on the appropriate builder methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Graph graph = TinkerFactory.createModern();
GraphSONMapper mapper = graph.io(IoCore.graphson()).mapper().version(GraphSONVersion.V1_0).create()
<span class="keyword">try</span> (<span class="predefined-type">OutputStream</span> os = <span class="keyword">new</span> <span class="predefined-type">FileOutputStream</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">tinkerpop-modern.json</span><span class="delimiter">&quot;</span></span>)) {
    graph.io(IoCore.graphson()).writer().mapper(mapper).create().writeGraph(os, graph)
}

<span class="directive">final</span> Graph newGraph = TinkerGraph.open();
<span class="keyword">try</span> (<span class="predefined-type">InputStream</span> stream = <span class="keyword">new</span> <span class="predefined-type">FileInputStream</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">tinkerpop-modern.json</span><span class="delimiter">&quot;</span></span>)) {
    newGraph.io(IoCore.graphson()).reader().mapper(mapper).create().readGraph(stream, newGraph);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For Gremlin Server, this change means that the <code>application/json</code> mime type no longer returns GraphSON 1.0 without
type embedding. Instead, Gremlin Server will return GraphSON 3.0 with partial types enabled (i.e. which is equivalent
to <code>application/vnd.gremlin-v3.0+json</code>). The <code>serializers</code> section the sample Gremlin Server YAML files now typically
look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">serializers</span>:
  - <span class="string"><span class="content">{ className: org.apache.tinkerpop.gremlin.driver.ser.GryoMessageSerializerV3d0, config: { ioRegistries: [org.apache.tinkerpop.gremlin.tinkergraph.structure.TinkerIoRegistryV3d0] }}</span></span>             <span class="comment"># application/vnd.gremlin-v3.0+gryo</span>
  - <span class="string"><span class="content">{ className: org.apache.tinkerpop.gremlin.driver.ser.GryoMessageSerializerV3d0, config: { serializeResultToString: true }}</span></span>                                                                       <span class="comment"># application/vnd.gremlin-v3.0+gryo-stringd</span>
  - <span class="string"><span class="content">{ className: org.apache.tinkerpop.gremlin.driver.ser.GraphSONMessageSerializerV3d0, config: { ioRegistries: [org.apache.tinkerpop.gremlin.tinkergraph.structure.TinkerIoRegistryV1d0] }}</span></span>         <span class="comment"># application/json</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It is possible to bring back the original configuration for <code>application/json</code> by changing the last entry as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">  - <span class="string"><span class="content">{ className: org.apache.tinkerpop.gremlin.driver.ser.GryoMessageSerializerV3d0, config: { ioRegistries: [org.apache.tinkerpop.gremlin.tinkergraph.structure.TinkerIoRegistryV3d0] }}</span></span>             <span class="comment"># application/vnd.gremlin-v3.0+gryo</span>
  - <span class="string"><span class="content">{ className: org.apache.tinkerpop.gremlin.driver.ser.GryoMessageSerializerV3d0, config: { serializeResultToString: true }}</span></span>                                                                       <span class="comment"># application/vnd.gremlin-v3.0+gryo-stringd</span>
  - <span class="string"><span class="content">{ className: org.apache.tinkerpop.gremlin.driver.ser.GraphSONMessageSerializerV1d0, config: { ioRegistries: [org.apache.tinkerpop.gremlin.tinkergraph.structure.TinkerIoRegistryV1d0]  }}</span></span>        <span class="comment"># application/json</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1414">TINKERPOP-1414</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1427">TINKERPOP-1427</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1574">TINKERPOP-1574</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_graphite_and_ganglia">Graphite and Ganglia</h4>
<div class="paragraph">
<p>Graphite and Ganglia are no longer packaged with the Gremlin Server distribution. They are considered optional
dependencies and therefore must be installed manually by the user.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1550">TINKERPOP-1550</a>,
<a href="http://tinkerpop.apache.org/docs/3.3.0/reference/#metrics">Reference Documentation - Metrics</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_selectstep_defaults_to_pop_last">SelectStep Defaults to Pop.last</h4>
<div class="paragraph">
<p><code>SelectStep</code> and <code>SelectOneStep</code> (<code>select()</code>) are the only <code>Scoping</code> steps that default to <code>Pop.mixed</code> as their labeled path
selection criteria. All other steps, like <code>match()</code>, <code>where()</code> and <code>dedup()</code>, use <code>Pop.last</code>. In order to better enable optimizations
around total <code>Pop.last</code> traversals, the <code>select()</code>-steps now default to <code>Pop.last</code>. Most users will not notice a difference as
it is rare for repeated labels to be used in practice. However, formal backwards compatibility is possible as outlined below.</p>
</div>
<div class="paragraph">
<p>Assuming that <code>x</code> is not a <code>Pop</code> argument:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Change all <code>select(x,y,z)</code> calls to <code>selectV3d2(x,y,z)</code> calls.</p>
</li>
<li>
<p>Change all <code>select(x,y,z)</code>-step calls to <code>select(Pop.mixed,x,y,z)</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If an explicit <code>Pop</code> argument is provided, then no changes are required.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1541">TINKERPOP-1541</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_optionalstep_and_side_effects">OptionalStep and Side-Effects</h4>
<div class="paragraph">
<p>The <code>optional()</code>-step was previously implemented using <code>ChooseStep</code>. However, if the optional branch contained side-effects,
then unexpected behaviors can emerge. Thus, a potential backwards compatibility issue arises if side-effects were being
used in <code>optional()</code>. However, the behavior would be unpredictable so this backwards incompatibility is desirable.</p>
</div>
<div class="paragraph">
<p>See <a href="https://issues.apache.org/jira/browse/TINKERPOP-1506">TINKERPOP-1506</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin_console_initialization">Gremlin Console Initialization</h4>
<div class="paragraph">
<p>It is no longer possible to intialize the Gremlin Console with a script without use of <code>-e</code>. In other words, prior
versions allowed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">bin/gremlin.sh gremlin.groovy</code></pre>
</div>
</div>
<div class="paragraph">
<p>Such a command must now be written as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">bin/gremlin.sh -i gremlin.groovy</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1283">TINKERPOP-1283</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1651">TINKERPOP-1651</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_graphtraversal_valuemap_signature_updated">GraphTraversal valueMap() Signature Updated</h4>
<div class="paragraph">
<p><code>GraphTraversal.valueMap(includeTokens,propertyKeys&#8230;&#8203;)</code> now returns a <code>Map&lt;Object,E&gt;</code> to account for the presence of <code>T.id</code> or <code>T.label</code> if you pass <code>true</code> to it.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1283">TINKERPOP-1483</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_hadoop_gremlin_libs_and_spark">HADOOP_GREMLIN_LIBS and Spark</h4>
<div class="paragraph">
<p>The TinkerPop reference documentation has always mentioned that the <code>gremlin-spark</code> <code>/lib</code> directory needed to be
added to <code>HADOOP_GREMLIN_LIBS</code> environment variable. In reality, that was not truly necessary. With Spark 1.x having
<code>gremlin-spark</code> in <code>HADOOP_GREMLIN_LIBS</code> hasn&#8217;t been a problem, but Spark 2.0 introduces a check for duplicate jars
on the path which will cause job initialization to fail. As a result, going forward with TinkerPop 3.3.0, the
<code>gremlin-spark</code> <code>lib</code> directory should not be included in <code>HADOOP_GREMLIN_LIBS</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_deprecation_removal_2">Deprecation Removal</h4>
<div class="paragraph">
<p>The following deprecated classes, methods or fields have been removed in this version:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>giraph-gremlin</code></p>
<div class="ulist">
<ul>
<li>
<p><code>org.apache.tinkerpop.gremlin.giraph.groovy.plugin.GiraphGremlinPlugin</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>gremlin-console</code></p>
<div class="ulist">
<ul>
<li>
<p><code>org.apache.tinkerpop.gremlin.console.Console(String)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.console.ConsoleImportCustomizerProvider</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.console.plugin.*</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.console.groovy.plugin.DriverGremlinPlugin</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.console.groovy.plugin.DriverRemoteAcceptor</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.console.groovy.plugin.GephiGremlinPlugin</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.console.groovy.plugin.UtilitiesGremlinPlugin</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>gremlin-core</code></p>
<div class="ulist">
<ul>
<li>
<p><code>org.apache.tinkerpop.gremlin.jsr223.CoreGremlinModule</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.jsr223.CoreGremlinPlugin#INSTANCE</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.jsr223.GremlinModule</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.jsr223.SingleGremlinScriptEngineManager#getInstance()</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.jsr223.GremlinScriptEngineManager#addModule(GremlinModule)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.jsr223.console.PluginAcceptor</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.TraversalSource.Builder</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.util.ConnectiveP(P&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.util.AndP(P&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.util.OrP(P&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.util.TraversalScriptFunction</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.util.TraversalScriptHelper</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.Order.keyIncr</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.Order.valueIncr</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.Order.keyDecr</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.Order.valueIncr</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.dsl.GraphTraversal.mapKeys()</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.dsl.GraphTraversal.mapValues()</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.GraphTraversal#addV(Object&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.GraphTraversal#addE(Direction, String, String, Object&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.GraphTraversal#addOutE(String, String, Object&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.GraphTraversal#addInV(String, String, Object&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.GraphTraversal#selectV3d2()</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.Bindings()</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.GraphTraversalSource#withBindings(Bindings)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.structure.Transaction.submit(Function)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.GraphTraversal#sack(BiFunction,String)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.strategy.finalization.LazyBarrierStrategy</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.TraversalSideEffects</code> (various methods)</p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.computer.traversal.step.VertexComputing#generateComputer(Graph)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.GraphTraversal#groupV3d0(String)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.GraphTraversal#groupV3d0()</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.structure.Graph.Features.VertexPropertyFeatures#supportsAddProperty()</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.structure.Graph.Features.VertexPropertyFeatures#FEATURE_ADD_PROPERTY</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.structure.Graph.OptIn#SUITE_GROOVY_PROCESS_STANDARD</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.structure.Graph.OptIn#SUITE_GROOVY_PROCESS_COMPUTER</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.structure.Graph.OptIn#SUITE_GROOVY_ENVIRONMENT</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.structure.Graph.OptIn#SUITE_GROOVY_ENVIRONMENT_INTEGRATE</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.structure.io.Io.Builder#registry(IoRegistry)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.structure.io.graphson.GraphSONMapper.Builder#embedTypes(boolean)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.structure.Transaction.submit(Function)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.structure.util.detached.DetachedEdge(Object,String,Map,Pair,Pair)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.util.CoreImports</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.util.ScriptEngineCache</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.process.computer.util.ConfigurationTraversal</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>gremlin-driver</code></p>
<div class="ulist">
<ul>
<li>
<p><code>org.apache.tinkerpop.gremlin.driver.Cluster$Builder#reconnectIntialDelay(int)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.driver.ser.GryoMessageSerializerV1d0(GryoMapper)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.driver.ser.AbstractGraphSONMessageSerializerV2d0#TOKEN_USE_MAPPER_FROM_GRAPH</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.driver.ser.AbstractGryoSONMessageSerializerV2d0#TOKEN_USE_MAPPER_FROM_GRAPH</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>gremlin-groovy</code></p>
<div class="ulist">
<ul>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.AbstractImportCustomizerProvider</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.CompilerCustomizerProvider</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.DefaultImportCustomizerProvider</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.EmptyImportCustomizerProvider</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.ImportCustomizerProvider</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.NoImportCustomizerProvider</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.engine.ConcurrentBindings</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.engine.GremlinExecutor#build(String,List,List,List,Map)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.engine.GremlinExecutor#getScriptEngines()</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.engine.GremlinExecutor#getGlobalBindings()</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.engine.GremlinExecutor.Builder#enabledPlugins(Set)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.engine.GremlinExecutor.Builder#addEngineSettings(String,List,List,List,Map)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.engine.GremlinExecutor.Builder#engineSettings(Map)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.engine.GremlinExecutor.Builder#use(List)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.engine.ScriptEngines</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.function.*</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.plugin.*</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.plugin.credential.*</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.jsr223.DependencyManager</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.jsr223.GremlinGroovyScriptEngine(ImportCustomizerProvider)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.jsr223.GremlinGroovyScriptEngine(CompilerCustomizerProvider)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.jsr223.GremlinGroovyScriptEngine#plugins()</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.jsr223.ScriptExecutor</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.jsr223.ScriptEnginePluginAcceptor</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.jsr223.customizer.SandboxExtension</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.jsr223.customizer.*</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.util.DependencyGrabber#deleteDependenciesFromPath(org.apache.tinkerpop.gremlin.groovy.plugin.Artifact)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.groovy.util.DependencyGrabber#copyDependenciesToPath(org.apache.tinkerpop.gremlin.groovy.plugin.Artifact)</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>gremlin-python</code></p>
<div class="ulist">
<ul>
<li>
<p><code>org.apache.tinkerpop.gremlin.python.jsr223.GremlinJythonScriptEngine#()</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>gremlin-server</code></p>
<div class="ulist">
<ul>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.GremlinServer(ServerGremlinExecutor)</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.Settings#plugins</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.auth.AllowAllAuthenticator.newSaslNegotiator()</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.auth.Authenticator.newSaslNegotiator()</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.auth.Krb5Authenticator.newSaslNegotiator()</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.auth.SimpleAuthenticator.newSaslNegotiator()</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.handler.IteratorHandler</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.handler.NioGremlinResponseEncoder</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.handler.WsGremlinResponseEncoder</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.handler.OpSelectorHandler.errorMeter</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.op.control.*</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.op.AbstractEvalOpProcessor.errorMeter</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.op.AbstractEvalOpProcessor.validBindingName</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.op.session.Session.kill()</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.server.op.session.Session.manualkill()</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>hadoop-gremlin</code></p>
<div class="ulist">
<ul>
<li>
<p><code>org.apache.tinkerpop.gremlin.hadoop.Constants#GREMLIN_HADOOP_GRAPH_INPUT_FORMAT</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.hadoop.Constants#GREMLIN_HADOOP_GRAPH_OUTPUT_FORMAT</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.hadoop.Constants#GREMLIN_HADOOP_GRAPH_INPUT_FORMAT_HAS_EDGES</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.hadoop.Constants#GREMLIN_HADOOP_GRAPH_OUTPUT_FORMAT_HAS_EDGES</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.hadoop.Constants#GREMLIN_SPARK_GRAPH_INPUT_RDD</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.hadoop.Constants#GREMLIN_SPARK_GRAPH_OUTPUT_RDD</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>spark-gremlin</code></p>
<div class="ulist">
<ul>
<li>
<p><code>org.apache.tinkerpop.gremlin.spark.groovy.plugin.SparkGremlinPlugin</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>tinkergraph-gremlin</code></p>
<div class="ulist">
<ul>
<li>
<p><code>org.apache.tinkerpop.gremlin.tinkergraph.groovy.plugin.TinkerGraphGremlinPlugin</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.tinkergraph.structure.TinkerGraph#CONFIG_*</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.tinkergraph.structure.TinkerIoRegistry</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.tinkergraph.structure.TinkerIoRegistryV1d0#getInstance()</code></p>
</li>
<li>
<p><code>org.apache.tinkerpop.gremlin.tinkergraph.structure.TinkerIoRegistryV2d0#getInstance()</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please see the javadoc deprecation notes or upgrade documentation specific to when the deprecation took place to
understand how to resolve this breaking change.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-832">TINKERPOP-832</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-833">TINKERPOP-833</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-834">TINKERPOP-834</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-999">TINKERPOP-999</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1010">TINKERPOP-1010</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1028">TINKERPOP-1028</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1040">TINKERPOP-1040</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1046">TINKERPOP-1046</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1049">TINKERPOP-1049</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1142">TINKERPOP-1142</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1169">TINKERPOP-1169</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1171">TINKERPOP-1171</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1275">TINKERPOP-1275</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1283">TINKERPOP-1283</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1289">TINKERPOP-1289</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1291">TINKERPOP-1291</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1420">TINKERPOP-1420</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1421">TINKERPOP-1421</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1465">TINKERPOP-1465</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1481">TINKERPOP-1481</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1526">TINKERPOP-1526</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1603">TINKERPOP-1603</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1612">TINKERPOP-1612</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1622">TINKERPOP-1622</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1651">TINKERPOP-1651</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1694">TINKERPOP-1694</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1700">TINKERPOP-1700</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1706">TINKERPOP-1706</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1721">TINKERPOP-1721</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1719">TINKERPOP-1719</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1720">TINKERPOP-1720</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-880">TINKERPOP-880</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1170">TINKERPOP-1170</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1729">TINKERPOP-1729</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin_server_sh_and_init_scripts">Gremlin-server.sh and Init Scripts</h4>
<div class="paragraph">
<p><code>gremlin-server.sh</code> is now also an init script and can no longer be started without parameters. To start it in the
foreground with defaults like previous usage, please use the <code>console</code> parameter. Also, <code>gremlin-server.sh</code> will
continue to start in the foreground when provided a yaml configuration file.</p>
</div>
<div class="paragraph">
<p>How to install as a service has been added to the <a href="http://tinkerpop.apache.org/docs/3.3.0/reference/#_as_a_service">Reference Documentation - As A Service</a>.</p>
</div>
<div class="paragraph">
<p>The switch name has changed for installing dependencies. <code>-i</code> has been deprecated and replaced by <code>install</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-980">TINKERPOP-980</a>, <a href="http://tinkerpop.apache.org/docs/3.3.0/reference/#_configuring_2">Reference Documentation - Server Configuration</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_removal_of_usemapperfromgraph">Removal of useMapperFromGraph</h4>
<div class="paragraph">
<p>The <code>userMapperFromGraph</code> serialization configuration option was used to allow the IO configurations of a specific
graph to be assigned to a specific serializer. This feature has been removed completely now. Please use the
<code>ioRegistries</code> configuration option to add one or more specific <code>Graph</code> serialization capabilities to a serializer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">serializers</span>:
  - <span class="string"><span class="content">{ className: org.apache.tinkerpop.gremlin.driver.ser.GryoMessageSerializerV1d0, config: { ioRegistries: [org.apache.tinkerpop.gremlin.tinkergraph.structure.TinkerIoRegistryV1d0] }}</span></span>            <span class="comment"># application/vnd.gremlin-v1.0+gryo</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>see: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1699">TINKERPOP-1699</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin_server_bat">Gremlin-server.bat</h4>
<div class="paragraph">
<p>The switch name has changed for installing dependencies. <code>-i</code> has been deprecated and replaced by <code>install</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sparkgraphcomputer_gryoregistrator">SparkGraphComputer GryoRegistrator</h4>
<div class="paragraph">
<p>Historically, <code>SparkGraphComputer</code> has  used <code>GryoSerializer</code> to handle the serialization of objects in Spark. The reason
this exists is because TinkerPop uses a shaded version of Kryo and thus, couldn&#8217;t use the standard <code>KryoSerializer</code>-model
provided by Spark. However, a "shim model" was created which allows for the shaded and unshaded versions of Kryo to
interact with one another. To this end, <code>KryoSerializer</code> can now be used with a <code>GryoRegistrator</code>. The properties file
for a <code>SparkGraphComputer</code> now looks as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>spark.serializer=org.apache.spark.serializer.KryoSerializer
spark.kryo.registrator=org.apache.tinkerpop.gremlin.spark.structure.io.gryo.GryoRegistrator</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the old <code>GryoSerializer</code> model is desired, then the properties file should simply look as before:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>spark.serializer=org.apache.tinkerpop.gremlin.spark.structure.io.gryo.GryoSerializer</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1389">TINKERPOP-1389</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_scriptinputformat">ScriptInputFormat</h4>
<div class="paragraph">
<p>The API for the script provided to a <code>ScriptInputFormat</code> has changed slightly. The signature for <code>parse(line, factory)</code>
is now simply <code>parse(line)</code>. The inclusion of <code>factory</code> was deprecated in 3.1.2. Instead of using the {{factory}} to
get the {{StarGraph}} there is a {{graph}} variable in the glocal context of the script. Simply use that directly in
the script.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1137">TINKERPOP-1137</a>,
<a href="http://tinkerpop.apache.org/docs/3.3.0-SNAPSHOT/reference/#script-io-format">Reference Documentation - Script I/O Format</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_8">Upgrading for Providers</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
It is recommended that providers also review all the upgrade instructions specified for users. Many of the
changes there may prove important for the provider&#8217;s implementation.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_graph_system_providers_2">Graph System Providers</h4>
<div class="sect4">
<h5 id="_gremlinplugin">GremlinPlugin</h5>
<div class="paragraph">
<p>The previously deprecated <code>GremlinPlugin</code> system has been removed. The old <code>GremlinPlugin</code> interface formerly resided
in the <code>org.apache.tinkerpop.gremlin.groovy.plugin</code> package of <code>gremlin-groovy</code>. This interface was replaced by an
interface of the same name in 3.2.4, which now resides in the <code>org.apache.tinkerpop.gremlin.jsr223</code> package in
<code>gremlin-core</code>. Obviously, existing plugins will need to be updated to use this new interface.</p>
</div>
<div class="paragraph">
<p>The plugin model has changed slightly to be more generic and not specifically bound to Groovy based script engines.
Under the new model, the plugin simply returns <code>Customizer</code> instances that can be applied generically to any
<code>ScriptEngine</code> or specifically to a particular <code>ScriptEngine</code>. More details can be found in the
<a href="http://tinkerpop.apache.org/docs/3.4.3/dev/provider/#gremlin-plugins">Provider Documentation</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_graph_database_providers_6">Graph Database Providers</h4>
<div class="sect4">
<h5 id="_test_suite_removal">Test Suite Removal</h5>
<div class="paragraph">
<p>A number of test suites that were previously deprecated have been removed which should reduce the burden on graph
providers who are implementing TinkerPop. Test suites related to perfrmance based on <code>junit-benchmarks</code> have been
removed as have the suites in <code>gremlin-groovy-test</code> (in fact, this entire module has been removed). Specifically,
providers should be concerned with breaking changes related to the removal of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>StructurePerformanceSuite</code></p>
</li>
<li>
<p><code>ProcessPerformanceSuite</code></p>
</li>
<li>
<p><code>GroovyEnvironmentPerformanceSuite</code></p>
</li>
<li>
<p><code>GroovyProcessStandardSuite</code></p>
</li>
<li>
<p><code>GroovyProcessComputerSuite</code></p>
</li>
<li>
<p><code>GroovyEnvironmentSuite</code></p>
</li>
<li>
<p><code>GroovyEnvironmentIntegrateSuite</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Those graph providers who relied on these tests should simply remove them from their respective test suites. Beware of
<code>OptOut</code> annotations that reference tests in these suites as test failure will occur if those references are not
removed.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1235">TINKERPOP-1235</a>, <a href="https://issues.apache.org/jira/browse/TINKERPOP-1612">TINKERPOP-1612</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_transactionexception">TransactionException</h5>
<div class="paragraph">
<p>The <code>AbstractTransaction.TransactionException</code> class is now just <code>TransactionException</code> which extends <code>RuntimeExcetpion</code>
rather than <code>Exception</code>. Providers should consider using this exception to wrap their own on calls to
<code>Transaction.commit()</code> or <code>Transaction.rollback()</code>. By throwing this exception, the TinkerPop stack can better respond
to transaction problems and it allows for more common, generalized error handling for users.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1004">TINKERPOP-1004</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_driver_providers">Driver Providers</h4>
<div class="sect4">
<h5 id="_sasl_byte_array">SASL Byte Array</h5>
<div class="paragraph">
<p>Gremlin Server no longer supports accepting a byte array for the value passed to the "sasl" parameter in
authentication messages. It only accepts a Base64 encoded string.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1603">TINKERPOP-1603</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<h1 id="_tinkerpop_3_2_0" class="sect0">TinkerPop 3.2.0</h1>
<div class="openblock partintro">
<div class="content">
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/apache/tinkerpop/master/docs/static/images/nine-inch-gremlins.png" alt="nine inch gremlins" width="225">
</div>
</div>
<div class="paragraph">
<p><strong>Nine Inch Gremlins</strong></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_2_11">TinkerPop 3.2.11</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: January 2, 2019</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.2.11/CHANGELOG.asciidoc#release-3-2-11">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_2_10">TinkerPop 3.2.10</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: October 15, 2018</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.2.10/CHANGELOG.asciidoc#release-3-2-10">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_14">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_sasl_in_gremlin_net">SASL in Gremlin.Net</h4>
<div class="paragraph">
<p>The Gremlin Javascript Driver now supports SASL Plain Text authentication against a Gremlin Server.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1977">TINKERPOP-1977</a>,
<a href="http://tinkerpop.apache.org/docs/3.2.10/reference#gremlin-javascript">Reference Documentation - Gremlin Javascript</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_ssl_security">SSL Security</h4>
<div class="paragraph">
<p>TinkerPop improves its security posture by removing insecure defaults and adding forward-looking standards support.</p>
</div>
<div class="paragraph">
<p>Gremlin Server no longer supports automatically creating self-signed certificates.
Self-signed certificates can still be created manually outside of Gremlin Server.
If ssl is enabled, a key store must be configured.</p>
</div>
<div class="paragraph">
<p>Cluster client no longer trusts all certs by default as this is an insecure configuration.
Instead, if no trust store is configured, Cluster will use the default CA certs.
To revert to the previous behavior and accept all certs, it must be explicitly configured.</p>
</div>
<div class="paragraph">
<p>This release introduces JKS and PKCS12 support. JKS is the legacy Java Key Store. PKCS12 has better cross-platform support and is gaining in adoption.
Be aware that JKS is the default on Java 8.  Java 9 and higher use PKCS12 as the default. Both Java keytool and OpenSSL tools can create, read, update PKCS12 files.</p>
</div>
<div class="paragraph">
<p>Other new features include specifying SSL protocols and cipher suites.
The packaged <code>*-secure.yaml</code> files now restrict the protocol to <code>TLSv1.2</code> by default.</p>
</div>
<div class="paragraph">
<p>PEM-based configurations are deprecated and may be removed in a future release.</p>
</div>
<div class="paragraph">
<p>See also <a href="http://tinkerpop.apache.org/docs/current/reference/#_configuration">Connecting via Java Configuration</a>,
<a href="http://tinkerpop.apache.org/docs/current/reference/#_configuring_2">Gremlin Server Configuration</a>.</p>
</div>
<div class="paragraph">
<p><a href="https://issues.apache.org/jira/browse/TINKERPOP-2022">TINKERPOP-2022</a>
<a href="https://issues.apache.org/jira/browse/TINKERPOP-2023">TINKERPOP-2023</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_bulk_import_and_export">Bulk Import and Export</h4>
<div class="paragraph">
<p>TinkerPop has provided some general methods for importing and exporting data, but more and more graph providers are
producing their own bulk import/export facilities and they are more efficient and easier to use than TinkerPop&#8217;s
methods. As a result, TinkerPop will now refer users to the bulk import/export features of individual graph providers
and as such, has deprecated <code>BulkLoaderVertexProgram</code> as of this release.</p>
</div>
<div class="paragraph">
<p>As part of this change, the <code>BulkDumperVertexProgram</code> has been renamed to <code>CloneVertexProgram</code> with the former being
deprecated. <code>CloneVertexProgram</code> is more aptly named, as it essentially copies a graph from a graph <code>InputFormat</code>
to a graph <code>OutputFormat</code>.</p>
</div>
<div class="paragraph">
<p><a href="https://issues.apache.org/jira/browse/TINKERPOP-1985">TINKERPOP-1985</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_docker_images">Docker Images</h4>
<div class="paragraph">
<p>Docker images are now available on <a href="https://hub.docker.com/u/tinkerpop/">Docker Hub</a> for Gremlin Console and Gremlin
Server.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">$ docker run -it tinkerpop/gremlin-console:3.4.3
$ docker run tinkerpop/gremlin-server:3.4.3</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1897">TINKERPOP-1897</a>,
<a href="http://tinkerpop.apache.org/docs/current/reference#gremlin-console-docker-image">Reference Documentation - Gremlin Console</a>,
<a href="http://tinkerpop.apache.org/docs/current/reference#gremlin-server-docker-image">Reference Documentation - Gremlin Server</a>,</p>
</div>
</div>
<div class="sect3">
<h4 id="_timedinterruptcustomizerprovider">TimedInterruptCustomizerProvider</h4>
<div class="paragraph">
<p>In Gremlin Server, it is best not to use 'TimedInterruptCustomizerProvider' because it can compete with the
'scriptEvaluationTimeout' setting and produce a different error path. Simply rely on 'scriptEvaluationTimeout'
as it covers both script evaluation time and result iteration time.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1778">TINKERPOP-1778</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_tinkerfactory_creategratefuldead">TinkerFactory.createGratefulDead()</h4>
<div class="paragraph">
<p>The Grateful Dead dataset has been with TinkerPop since the early days of 1.x. It has always been available as a
packaged dataset that needed to be loaded through the various IO options available, while other toy graphs had the
benefit of <code>TinkerFactory</code> to help get them bootstrapped. For 3.2.10, Grateful Dead is now more conveniently loaded
via that same method as the other toy graphs with <code>TinkerFactory.createGratefulDead()</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin_javascript_script_submission">Gremlin Javascript Script Submission</h4>
<div class="paragraph">
<p>Gremlin Javascript can now submit script, with optional bindings, using the <code>Client</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const gremlin = require(<span class="string"><span class="delimiter">'</span><span class="content">gremlin</span><span class="delimiter">'</span></span>);
const client = <span class="keyword">new</span> gremlin.driver.Client(<span class="string"><span class="delimiter">'</span><span class="content">ws://localhost:8182/gremlin</span><span class="delimiter">'</span></span>, { <span class="key">traversalSource</span>: <span class="string"><span class="delimiter">'</span><span class="content">g</span><span class="delimiter">'</span></span> });

client.submit(<span class="string"><span class="delimiter">'</span><span class="content">g.V().tail()</span><span class="delimiter">'</span></span>)
    .then(result =&gt; {
        console.log(result.length);
        console.log(result.toArray()[<span class="integer">0</span>]);
    });

client.submit(<span class="string"><span class="delimiter">'</span><span class="content">g.V(vid)</span><span class="delimiter">'</span></span>, { <span class="key">vid</span>: <span class="integer">1</span> })
    .then(result =&gt; {
        console.log(result.length);
        <span class="comment">// Get the first item</span>
        console.log(result.first());
    });</code></pre>
</div>
</div>
<div class="paragraph">
<p>and also allows translation of bytecode steps into script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const gremlin = require(<span class="string"><span class="delimiter">'</span><span class="content">gremlin</span><span class="delimiter">'</span></span>);
const graph = <span class="keyword">new</span> gremlin.process.Graph();
const client = <span class="keyword">new</span> gremlin.driver.Client(<span class="string"><span class="delimiter">'</span><span class="content">ws://localhost:8182/gremlin</span><span class="delimiter">'</span></span>, { <span class="key">traversalSource</span>: <span class="string"><span class="delimiter">'</span><span class="content">g</span><span class="delimiter">'</span></span> });
const translator = <span class="keyword">new</span> gremlin.process.Translator(<span class="string"><span class="delimiter">'</span><span class="content">g</span><span class="delimiter">'</span></span>);

const g = graph.traversal();
const script = translator.translate(g.V().tail().getBytecode());

client.submit(script)
    .then(result =&gt; {
        console.log(result.length);
        console.log(result.first());
    });</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_9">Upgrading for Providers</h3>
<div class="sect3">
<h4 id="_graph_database_providers_7">Graph Database Providers</h4>
<div class="sect4">
<h5 id="_bulk_import_and_export_2">Bulk Import and Export</h5>
<div class="paragraph">
<p>As noted in the user section, TinkerPop has deprecated its bulk loading feature in <code>BulkLoaderVertexProgram</code> and will
refer TinkerPop users who need bulk import/export capabilities to the native tools of the graph database they have
chosen. If a graph database provider does not have any bulk loading tools it can choose to build graph <code>InputFormat</code>
and <code>OutputFormat</code> implementations which can be used by <code>CloneVertexProgram</code> (formerly <code>BulkDumperVertexProgram</code>) as
a easy way to get such a feature.</p>
</div>
<div class="paragraph">
<p><a href="https://issues.apache.org/jira/browse/TINKERPOP-1985">TINKERPOP-1985</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_2_9">TinkerPop 3.2.9</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: May 8, 2018</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.2.9/CHANGELOG.asciidoc#release-3-2-9">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_15">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_lambda_construction">Lambda Construction</h4>
<div class="paragraph">
<p>It was realized quite shortly after release of 3.2.8 that there was a bug in construction of <code>Lambda</code> instances:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; org.apache.tinkerpop.gremlin.util.function.Lambda.function(&quot;{ it.get() }&quot;)
(class: org/apache/tinkerpop/gremlin/util/function/Lambda$function, method: callStatic signature: (Ljava/lang/Class;[Ljava/lang/Object;)Ljava/lang/Object;) Illegal type in constant pool
Type ':help' or ':h' for help.
Display stack trace? [yN]n</code></pre>
</div>
</div>
<div class="paragraph">
<p>The problem was related to a bug in Groovy 2.4.14 and was fixed in 2.4.15.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1953">TINKERPOP-1953</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_2_8">TinkerPop 3.2.8</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: April 2, 2018</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.2.8/CHANGELOG.asciidoc#release-3-2-8">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_16">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_improved_connection_monitoring">Improved Connection Monitoring</h4>
<div class="paragraph">
<p>Gremlin Server now has two new settings: <code>idleConnectionTimeout</code> and <code>keepAliveInterval</code>. The <code>keepAliveInterval</code> tells
Gremlin Server how long it should wait between writes to a client before it issues a "ping" to that client to see if
it is still present. The <code>idleConnectionTimeout</code> represents how long Gremlin Server should wait between requests from
a client before it closes the connection on the server side. By default, these two configurations are set to zero,
meaning that they are both disabled.</p>
</div>
<div class="paragraph">
<p>This change should help to alleviate issues where connections are left open on the server longer than they should be
by clients that might mysteriously disappear without properly closing their connections.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1726">TINKERPOP-1726</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin_net_lambdas">Gremlin.Net Lambdas</h4>
<div class="paragraph">
<p>Gremlin.Net now has a <code>Lambda</code> class that can be used to construct Groovy or Java lambdas which will be evaluated on the
server.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1854">TINKERPOP-1854</a>, <a href="http://tinkerpop.apache.org/docs/3.2.8/reference/#_the_lambda_solution_3">Reference Documentation - Gremlin.Net - The Lambda Solution</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin_net_tokens_improved">Gremlin.Net Tokens Improved</h4>
<div class="paragraph">
<p>The various Gremlin tokens (e.g. <code>T</code>, <code>Order</code>, <code>Operator</code>, etc.) that were implemented as Enums before in Gremlin.Net
are now implemented as classes. This mainly allows them to implement interfaces which their Java counterparts already
did. <code>T</code> for example now implements the new interface <code>IFunction</code> which simply mirrors its Java counterpart <code>Function</code>.
Steps that expect objects for those interfaces as arguments now explicitly use the interface. Before, they used just
<code>object</code> as the type for these arguments which made it hard for users to know what kind of <code>object</code> they can use.
However, usage of these tokens themselves shouldn&#8217;t change at all (e.g. <code>T.Id</code> is still <code>T.Id</code>).</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1901">TINKERPOP-1901</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin_net_traversal_predicate_classes_merged">Gremlin.Net: Traversal Predicate Classes Merged</h4>
<div class="paragraph">
<p>Gremlin.Net used two classes for traversal predicates: <code>P</code> and <code>TraversalPredicate</code>. Steps that worked with traversal
predicates expected objects of type <code>TraversalPredicate</code>, but they were constructed from the <code>P</code> class
(e.g. <code>P.Gt(1)</code> returned a <code>TraversalPredicate</code>). Merging these two classes into the <code>P</code> class should avoid unnecessary
confusion. Most users should not notice this change as predicates can still be constructed exactly as before, e.g.,
<code>P.Gt(1).And(P.Lt(3))</code> still works without any modifications.
Only users that implemented their own predicates and used <code>TraversalPredicate</code> as the base class need to change their
implementation to now use <code>P</code> as the new base class.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1919">TINKERPOP-1919</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_10">Upgrading for Providers</h3>
<div class="sect3">
<h4 id="_graph_system_providers_3">Graph System Providers</h4>
<div class="sect4">
<h5 id="_kitchen_sink_test_graph">Kitchen Sink Test Graph</h5>
<div class="paragraph">
<p>The "Kitchen Sink" test graph has been added to the <code>gremlin-test</code> module. It contains (or will contain) various
disconnected subgraphs of that offer unique structures (e.g. a self-loop) for specific test cases. Graph systems that
use the test suite should not have to make any changes to account for this new graph unless that system performs some
form or special pre-initialization of their system in preparation for loading (e.g. requires a schema) or does the
loading of the graph test data outside of the standard method in which TinkerPop provides.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1877">TINKERPOP-1877</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_2_7">TinkerPop 3.2.7</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: December 17, 2017</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.2.7/CHANGELOG.asciidoc#release-3-2-7">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_17">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_gremlin_python_core_types">Gremlin-Python Core Types</h4>
<div class="paragraph">
<p>With the addition of <code>UUID</code>, <code>Date</code>, and <code>Timestamp</code>, Gremlin-Python now implements serializers for all core GraphSON types. Users
that were using other types to represent this data can now use the Python classes <code>datetime.datetime</code> and`uuid.UUID` in GLV traversals.
Since Python does not support a native <code>Timestamp</code> object, Gremlin-Python now offers a dummy class <code>Timestamp</code>, which allows
users to wrap a float and submit it to the Gremlin Server as a <code>Timestamp</code> GraphSON type. <code>Timestamp</code> can be found in
<code>gremlin_python.statics</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1807">TINKERPOP-1807</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_eventstrategy_detachment">EventStrategy Detachment</h4>
<div class="paragraph">
<p><code>EventStrategy</code> forced detachment of mutated elements prior to raising them in events. While this was a desired
outcome, it may not have always fit every use case. For example, a user may have wanted a reference element or the
actual element itself. As a result, <code>EventStrategy</code> has changed to allow it to be constructed with a <code>detach()</code>
option, where it is possible to specify any of the following: <code>null</code> for no detachment, <code>DetachedFactory</code> for the
original behavior, and <code>ReferenceFactory</code> for detachment that returns reference elements.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1829">TINKERPOP-1829</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_embedded_remote_connection">Embedded Remote Connection</h4>
<div class="paragraph">
<p>As Gremlin Language Variants (GLVs) expand their usage and use of <code>withRemote()</code> becomes more common, the need to mock
the "remote" in unit tests increases. To simplify mocking in Java, the new <code>EmbeddedRemoteConnection</code> provides a
simple way to provide a "remote" that is actually local to the same JVM.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1756">TINKERPOP-1756</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_dsl_type_specification">DSL Type Specification</h4>
<div class="paragraph">
<p>Prior to this version, the Java annotation processor for Gremlin DSLs has tried to infer the appropriate type
specifications when generating anonymous methods. It largely performed this inference on simple conventions in the
DSL method&#8217;s template specification and there were times where it would fail. For example, a method like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="keyword">default</span> GraphTraversal&lt;S, E&gt; person() {
    <span class="keyword">return</span> hasLabel(<span class="string"><span class="delimiter">&quot;</span><span class="content">person</span><span class="delimiter">&quot;</span></span>);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>would generate an anonymous method like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> &lt;S&gt; SocialGraphTraversal&lt;S, E&gt; person() {
    <span class="keyword">return</span> hasLabel(<span class="string"><span class="delimiter">&quot;</span><span class="content">person</span><span class="delimiter">&quot;</span></span>);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and, of course, generate a compile error and <code>E</code> was not recognized as a symbol. The preferred generation would likely
be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> &lt;S&gt; SocialGraphTraversal&lt;S, S&gt; person() {
    <span class="keyword">return</span> hasLabel(<span class="string"><span class="delimiter">&quot;</span><span class="content">person</span><span class="delimiter">&quot;</span></span>);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To remedy this situation, a new annotation has been added which allows the user to control the type specifications
more directly providing a way to avoid/override the inference system:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@GremlinDsl</span>.AnonymousMethod(returnTypeParameters = {<span class="string"><span class="delimiter">&quot;</span><span class="content">A</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">A</span><span class="delimiter">&quot;</span></span>}, methodTypeParameters = {<span class="string"><span class="delimiter">&quot;</span><span class="content">A</span><span class="delimiter">&quot;</span></span>})
<span class="directive">public</span> <span class="keyword">default</span> GraphTraversal&lt;S, E&gt; person() {
    <span class="keyword">return</span> hasLabel(<span class="string"><span class="delimiter">&quot;</span><span class="content">person</span><span class="delimiter">&quot;</span></span>);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>which will then generate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> &lt;A&gt; SocialGraphTraversal&lt;A, A&gt; person() {
    <span class="keyword">return</span> hasLabel(<span class="string"><span class="delimiter">&quot;</span><span class="content">person</span><span class="delimiter">&quot;</span></span>);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1791">TINKERPOP-1791</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_specify_a_cluster_object">Specify a Cluster Object</h4>
<div class="paragraph">
<p>The <code>:remote connect</code> command can now take a pre-defined <code>Cluster</code> object as its argument as opposed to a YAML
configuration file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; cluster = Cluster.open()
==&gt;localhost/127.0.0.1:8182
gremlin&gt; :remote connect tinkerpop.server cluster
==&gt;Configured localhost/127.0.0.1:8182</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1787">TINKERPOP-1787</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_remote_traversal_timeout">Remote Traversal Timeout</h4>
<div class="paragraph">
<p>There was limited support for "timeouts" with remote traversals (i.e. those traversals executed using the <code>withRemote()</code>
option) prior to 3.2.7. Remote traversals will now interrupt on the server using the <code>scriptEvaluationTimeout</code>
setting in the same way that normal script evaluations would. As a reminder, interruptions for traversals are always
considered "attempts to interrupt" and may not always succeed (a graph database implementation might not respect the
interruption, for example).</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1770">TINKERPOP-1770</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_modifications_to_match">Modifications to match()</h4>
<div class="paragraph">
<p>The <code>match()</code>-step has been generalized to support the local scoping of all barrier steps, not just reducing barrier steps.
Previously, the <code>order().limit()</code> clause would have worked globally yielding:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">gremlin&gt; g.V().match(
......<span class="integer">1</span>&gt;   __.as(<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>).outE(<span class="string"><span class="delimiter">'</span><span class="content">created</span><span class="delimiter">'</span></span>).order().by(<span class="string"><span class="delimiter">'</span><span class="content">weight</span><span class="delimiter">'</span></span>,decr).limit(<span class="integer">1</span>).inV().as(<span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>),
......<span class="integer">2</span>&gt;   __.as(<span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>).has(<span class="string"><span class="delimiter">'</span><span class="content">lang</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span>)
......<span class="integer">3</span>&gt; ).select(<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>).by(<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>)
==&gt;[<span class="key">a</span>:marko,<span class="key">b</span>:lop]</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, now, <code>order()</code> (and all other barriers) are treated as local computations to the pattern and thus, the result set is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">gremlin&gt; g.V().match(
......<span class="integer">1</span>&gt;   __.as(<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>).outE(<span class="string"><span class="delimiter">'</span><span class="content">created</span><span class="delimiter">'</span></span>).order().by(<span class="string"><span class="delimiter">'</span><span class="content">weight</span><span class="delimiter">'</span></span>,decr).limit(<span class="integer">1</span>).inV().as(<span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>),
......<span class="integer">2</span>&gt;   __.as(<span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>).has(<span class="string"><span class="delimiter">'</span><span class="content">lang</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span>)
......<span class="integer">3</span>&gt; ).select(<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>).by(<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>)
==&gt;[<span class="key">a</span>:marko,<span class="key">b</span>:lop]
==&gt;[<span class="key">a</span>:josh,<span class="key">b</span>:ripple]
==&gt;[<span class="key">a</span>:peter,<span class="key">b</span>:lop]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that this is not that intense of a breaking change as all of the reducing barriers behaved in this manner previously.
This includes steps like <code>count()</code>, <code>min()</code>, <code>max()</code>, <code>sum()</code>, <code>group()</code>, <code>groupCount()</code>, etc. This update has now
generalized this behavior to all barriers and thus, adds <code>aggregate()</code>, <code>dedup()</code>, <code>range()</code>, <code>limit()</code>, <code>tail()</code>, and <code>order()</code>
to the list of locally computed clauses.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1764">TINKERPOP-1764</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_clone_a_graph">Clone a Graph</h4>
<div class="paragraph">
<p>In <code>gremlin-test</code> there is a new <code>GraphHelper</code> class that has a <code>cloneElements()</code> method. It will clone elements from
the first graph to the second - <code>GraphHelper.cloneElements(Graph original, Graph clone)</code>. This helper method is
primarily intended for use in tests.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mutationlistener_changes">MutationListener Changes</h4>
<div class="paragraph">
<p>The <code>MutationListener</code> has a method called <code>vertexPropertyChanged</code> which gathered callbacks when a property on a vertex
was modified. The method had an incorrect signature though using <code>Property</code> instead of <code>VertexProperty</code>. The old method
that used <code>Property</code> has now been deprecated and a new method added that uses <code>VertexProperty</code>. This new method has a
default implementation that calls the old method, so this change should not cause breaks in compilation on upgrade.
Internally, TinkerPop no longer calls the old method except by way of that proxy. Users who have <code>MutationListener</code>
implementations can simply add the new method and override its behavior. The old method can thus be ignored completely.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1798">TINKERPOP-1798</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_11">Upgrading for Providers</h3>
<div class="sect3">
<h4 id="_direction_both_requires_duplication_of_self_edges">Direction.BOTH Requires Duplication of Self-Edges</h4>
<div class="paragraph">
<p>Prior to this release, there was no semantic check to determine whether a self-edge (e.g. <code>e[1][2-self&#8594;2]</code>) would be returned
twice on a <code>BOTH</code>. The semantics have been specified now in the test suite where the edge should be returned twice as it
is both an incoming edge and an outgoing edge.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1821">TINKERPOP-1821</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_2_6">TinkerPop 3.2.6</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: August 21, 2017</strong></p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_18">Upgrading for Users</h3>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.2.6/CHANGELOG.asciidoc#release-3-2-6">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect3">
<h4 id="_deprecated_usemapperfromgraph">Deprecated useMapperFromGraph</h4>
<div class="paragraph">
<p>The <code>userMapperFromGraph</code> configuration option for the Gremlin Server serializers has been deprecated. Change
configuration files to use the <code>ioRegistries</code> option instead. The <code>ioRegistries</code> option is not a new feature, but
it has not been promoted as the primary way to add <code>IoRegistry</code> instances to serializers.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1694">TINKERPOP-1694</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_wsandhttpchannelizer">WsAndHttpChannelizer</h4>
<div class="paragraph">
<p>The <code>WsAndHttpChannelizer</code> has been added to allow for processing both WebSocket and HTTP requests on the same
port and gremlin server. The <code>SaslAndHttpBasicAuthenticationHandler</code> has also been added to service
authentication for both protocols in conjunction with the <code>SimpleAuthenticator</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-915">TINKERPOP-915</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_12">Upgrading for Providers</h3>
<div class="sect3">
<h4 id="_referencevertex_label">ReferenceVertex Label</h4>
<div class="paragraph">
<p><code>ReferenceVertex.label()</code> was hard coded to return <code>EMPTY_STRING</code>. At some point, <code>ReferenceElements</code> were suppose to
return labels and <code>ReferenceVertex</code> was never updated as such. Note that <code>ReferenceEdge</code> and <code>ReferenceVertexProperty</code>
work as expected. However, given a general change at <code>ReferenceElement</code>, the Gryo serialization of <code>ReferenceXXX</code> is
different. If the vertex does not have a label <code>Vertex.DEFAULT_LABEL</code> is assumed.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1789">TINKERPOP-1789</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_2_5">TinkerPop 3.2.5</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: June 12, 2017</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.2.5/CHANGELOG.asciidoc#release-3-2-5">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_19">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_dsl_support">DSL Support</h4>
<div class="paragraph">
<p>It has always been possible to construct Domain Specific Languages (DSLs) with Gremlin, but the approach has required
a somewhat deep understanding of the TinkerPop code base and it is not something that has had a recommended method
for implementation. With this release, TinkerPop simplifies DSL development and provides the best practices for their
implementation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// standard Gremlin</span>
g.V().hasLabel(<span class="string"><span class="delimiter">'</span><span class="content">person</span><span class="delimiter">'</span></span>).
  where(outE(<span class="string"><span class="delimiter">&quot;</span><span class="content">created</span><span class="delimiter">&quot;</span></span>).count().is(P.gte(<span class="integer">2</span>))).count()

<span class="comment">// the same traversal as above written as a DSL</span>
social.persons().where(createdAtLeast(<span class="integer">2</span>)).count()</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-786">TINKERPOP-786</a>,
<a href="http://tinkerpop.apache.org/docs/3.2.5/reference/#dsl">Reference Documentation</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_graphson_path_serialization">GraphSON Path Serialization</h4>
<div class="paragraph">
<p>Serialization of <code>Path</code> with GraphSON was inconsistent with Gryo in that all the properties on any elements of
the <code>Path</code> were being included. With Gryo that, correctly, was not happening as that could be extraordinarily
expensive. GraphSON serialization has now been modified to properly not include properties. That change can cause
breaks in application code if that application code tries to access properties on elements in a <code>Path</code> as they
will no longer be there. Applications that require the properties will need to alter their Gremlin to better
restrict the data they want to retrieve.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1676">TINKERPOP-1676</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_authentication_configuration">Authentication Configuration</h4>
<div class="paragraph">
<p>The server settings previously used <code>authentication.className</code> to set an authenticator for the the two provided
authentication handler and channelizer classes to use. This has been deprecated in favor of <code>authentication.authenticator</code>.
A class that extends <code>AbstractAuthenticationHandler</code> may also now be provided as <code>authentication.authenticationHandler</code>
to be used in either of the provided channelizer classes to handle the provided authenticator</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1657">TINKERPOP-1657</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_default_maximum_parameters">Default Maximum Parameters</h4>
<div class="paragraph">
<p>It was learned that compilation for scripts with large numbers of parameters is more expensive than those with less
parameters. It therefore becomes possible to make some mistakes with how Gremlin Server is used. A new setting on
the <code>StandardOpProcessor</code> and <code>SessionOpProcessor</code> called <code>maxParameters</code> controls the number of parameters that can
be passed in on a request. This setting is defaulted to sixteen.</p>
</div>
<div class="paragraph">
<p>Users upgrading to this version may notice errors in their applications if they use more than sixteen parameters. To
fix this problem simply reconfigure Gremlin Server with a configuration as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">processors</span>:
  - <span class="string"><span class="content">{ className: org.apache.tinkerpop.gremlin.server.op.session.SessionOpProcessor, config: { maxParameters: 64 }}</span></span>
  - <span class="string"><span class="content">{ className: org.apache.tinkerpop.gremlin.server.op.standard.StandardOpProcessor, config: { maxParameters: 64 }}</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The above configuration allows sixty-four parameters to be passed on each request.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1663">TINKERPOP-1663</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlinscriptengine_metrics">GremlinScriptEngine Metrics</h4>
<div class="paragraph">
<p>The <code>GremlinScriptEngine</code> has a number of new metrics about its cache size and script compilation times which should
be helpful in understanding usage problems. As <code>GremlinScriptEngine</code> instances are used in Gremlin Server these metrics
are naturally exposed as part of the standard <a href="http://tinkerpop.apache.org/docs/current/reference/#_metrics">metrics</a>
set. Note that metrics are captured for both sessionless requests as well as for each individual session that is opened.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1644">TINKERPOP-1644</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_additional_error_information">Additional Error Information</h4>
<div class="paragraph">
<p>Additional information on error responses from Gremlin Server should help make debugging errors easier. Error responses
now have both the exception hierarchy and the stack trace that was generated on the server. In this way, receiving an
error on a client doesn&#8217;t mean having to rifle through Gremlin Server logs to try to find the associated error.</p>
</div>
<div class="paragraph">
<p>This change has been applied to all Gremlin Server protocols. For the binary protocol and the Java driver this change
means that the <code>ResponseException</code> thrown from calls to <code>submit()</code> requests to the server now have the following
methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> Optional&lt;<span class="predefined-type">String</span>&gt; getRemoteStackTrace()

<span class="directive">public</span> Optional&lt;<span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt;&gt; getRemoteExceptionHierarchy()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The HTTP protocol has also been updated and returns both <code>exceptions</code> and <code>stackTrace</code> fields in the response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js">{
        <span class="key"><span class="delimiter">&quot;</span><span class="content">message</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Division by zero</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">Exception-Class</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">java.lang.ArithmeticException</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">exceptions</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">java.lang.ArithmeticException</span><span class="delimiter">&quot;</span></span>],
        <span class="key"><span class="delimiter">&quot;</span><span class="content">stackTrace</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">java.lang.ArithmeticException: Division by zero</span><span class="char">\n</span><span class="char">\t</span><span class="content">at java.math.BigDecimal.divide(BigDecimal.java:1742)</span><span class="char">\n</span><span class="char">\t</span><span class="content">at org.codehaus.groovy.runtime.typehandling.BigDecimalMath.divideImpl(BigDecimalMath.java:68)</span><span class="char">\n</span><span class="char">\t</span><span class="content">at org.codehaus.groovy.runtime.typehandling.IntegerMath.divideImpl(IntegerMath.java:49)</span><span class="char">\n</span><span class="char">\t</span><span class="content">at org.codehaus.groovy.runtime.dgmimpl.NumberNumberDiv$NumberNumber.invoke(NumberNumberDiv.java:323)</span><span class="char">\n</span><span class="char">\t</span><span class="content">at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:56)</span><span class="char">\n</span><span class="char">\t</span><span class="content">at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48)</span><span class="char">\n</span><span class="char">\t</span><span class="content">at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:113)</span><span class="char">\n</span><span class="char">\t</span><span class="content">at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)</span><span class="char">\n</span><span class="char">\t</span><span class="content">at Script4.run(Script4.groovy:1)</span><span class="char">\n</span><span class="char">\t</span><span class="content">at org.apache.tinkerpop.gremlin.groovy.jsr223.GremlinGroovyScriptEngine.eval(GremlinGroovyScriptEngine.java:834)</span><span class="char">\n</span><span class="char">\t</span><span class="content">at org.apache.tinkerpop.gremlin.groovy.jsr223.GremlinGroovyScriptEngine.eval(GremlinGroovyScriptEngine.java:547)</span><span class="char">\n</span><span class="char">\t</span><span class="content">at javax.script.AbstractScriptEngine.eval(AbstractScriptEngine.java:233)</span><span class="char">\n</span><span class="char">\t</span><span class="content">at org.apache.tinkerpop.gremlin.groovy.engine.ScriptEngines.eval(ScriptEngines.java:120)</span><span class="char">\n</span><span class="char">\t</span><span class="content">at org.apache.tinkerpop.gremlin.groovy.engine.GremlinExecutor.lambda$eval$2(GremlinExecutor.java:314)</span><span class="char">\n</span><span class="char">\t</span><span class="content">at java.util.concurrent.FutureTask.run(FutureTask.java:266)</span><span class="char">\n</span><span class="char">\t</span><span class="content">at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)</span><span class="char">\n</span><span class="char">\t</span><span class="content">at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)</span><span class="char">\n</span><span class="char">\t</span><span class="content">at java.lang.Thread.run(Thread.java:745)</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the <code>Exception-Class</code> which was added in a previous version has been deprecated and replaced by these new
fields.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1044">TINKERPOP-1044</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin_console_scripting">Gremlin Console Scripting</h4>
<div class="paragraph">
<p>The <code>gremlin.sh</code> command has two flags, <code>-i</code> and <code>-e</code>, which are used to pass a script and arguments into the Gremlin
Console for execution. Those flags now allow for passing multiple scripts and related arguments to be supplied which
can yield greater flexibility in automation tasks.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ bin/gremlin.sh -i y.groovy 1 2 3 -i x.groovy
$ bin/gremlin.sh -e y.groovy 1 2 3 -e x.groovy</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1653">TINKERPOP-1653</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_path_support_for_by_from_to_modulation">Path support for by()-, from()-, to()-modulation</h4>
<div class="paragraph">
<p>It is now possible to extract analyze sub-paths using <code>from()</code> and <code>to()</code> modulations with respective, path-based steps.
Likewise, <code>simplePath()</code> and <code>cyclicPath()</code> now support, along with <code>from()</code> and <code>to()</code>, <code>by()</code>-modulation so the cyclicity
is determined by projections of the path data. This extension is fully backwards compatible.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1387">TINKERPOP-1387</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_graphmanager_versus_defaultgraphmanager">GraphManager versus DefaultGraphManager</h4>
<div class="paragraph">
<p>Gremlin Server previously implemented its own final <code>GraphManager</code> class. Now, the <code>GraphManager</code> has been changed to
an interface, and users can supply their own <code>GraphManager</code> implementations in their YAML. The previous <code>GraphManager</code>
class was meant be used by classes internal to Gremlin Server, but it was public so if it was used for some reason by
users then then a compile error can be expected. To correct this problem, which will likely manifest as a compile error
when trying to create a <code>new GraphManager()</code> instance, simply change the code to <code>new DefaultGraphManager(Settings)</code>.</p>
</div>
<div class="paragraph">
<p>In addition to the change mentioned above, several methods on <code>GraphManager</code> were deprecated:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>getGraphs()</code> should be replaced by the combination of <code>getGraphNames()</code> and then <code>getGraph(String)</code></p>
</li>
<li>
<p><code>getTraversalSources()</code> is similarly replaced and should instead use a combination of <code>getTraversalSourceNames()</code> and
<code>getTraversalSource(String)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1438">TINKERPOP-1438</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin_python_driver">Gremlin-Python Driver</h4>
<div class="paragraph">
<p>Gremlin-Python now offers a more complete driver implementation that uses connection pooling and
the Python <code>concurrent.futures</code> module to provide asynchronous I/0 using threading. The default underlying
WebSocket client implementation is still provided by Tornado, but it is trivial to plug in another client by
defining the <code>Transport</code> interface.</p>
</div>
<div class="paragraph">
<p>Using the <code>DriverRemoteConnection</code> class is the exact same as in previous versions; however,
<code>DriverRemoteConnection</code> now uses the new <code>Client</code> class to submit messages to the server.</p>
</div>
<div class="paragraph">
<p>The <code>Client</code> class implementation/interface is based on the Java Driver, with some restrictions.
Most notably, Gremlin-Python does not yet implement the <code>Cluster</code> class. Instead, <code>Client</code> is
instantiated directly. Usage is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="keyword">from</span> <span class="include">gremlin_python.driver</span> <span class="keyword">import</span> <span class="include">client</span>

client = client.Client(<span class="string"><span class="delimiter">'</span><span class="content">ws://localhost:8182/gremlin</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">g</span><span class="delimiter">'</span></span>)
result_set = client.submit(<span class="string"><span class="delimiter">'</span><span class="content">1 + 1</span><span class="delimiter">'</span></span>)
future_results = result_set.all()  <span class="comment"># returns a concurrent.futures.Future</span>
results = future_results.result()  <span class="comment"># returns a list</span>
<span class="keyword">assert</span> results == [<span class="integer">2</span>]
client.close()  <span class="comment"># don't forget to close underlying connections</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1599">TINKERPOP-1599</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_13">Upgrading for Providers</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
It is recommended that providers also review all the upgrade instructions specified for users. Many of the
changes there may prove important for the provider&#8217;s implementation.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_graph_database_providers_8">Graph Database Providers</h4>
<div class="sect4">
<h5 id="_simplepathstep_and_cyclicpathstep_now_pathfilterstep">SimplePathStep and CyclicPathStep now PathFilterStep</h5>
<div class="paragraph">
<p>The Gremlin traversal machine use to support two step instructions: <code>SimplePathStep</code> and <code>CyclicPathStep</code>. These have
been replaced by a high-level instruction called <code>PathFilterStep</code> which is boolean configured for simple or cyclic paths.
Furthermore, <code>PathFilterStep</code> also support <code>from()</code>-, <code>to()</code>-, and <code>by()</code>-modulation.</p>
</div>
</div>
<div class="sect4">
<h5 id="_lazybarrierstrategy_no_longer_end_appends_barriers">LazyBarrierStrategy No Longer End Appends Barriers</h5>
<div class="paragraph">
<p><code>LazyBarrierStrategy</code> was trying to do to much by considering <code>Traverser</code> effects on network I/O by appending an
<code>NoOpBarrierStrategy</code> to the end of the root traversal. This should not be accomplished by <code>LazyBarrierStrategy</code>,
but instead by <code>RemoteStrategy</code>. <code>RemoteStrategy</code> now tries to barrier-append. This may effect the reasoning logic in
some <code>ProviderStrategies</code>. Most likely not, but just be aware.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1627">TINKERPOP-1627</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_2_4">TinkerPop 3.2.4</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: February 8, 2017</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.2.4/CHANGELOG.asciidoc#release-3-2-4">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_20">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_tinkergraph_deserialization">TinkerGraph Deserialization</h4>
<div class="paragraph">
<p>A TinkerGraph deserialized from Gryo or GraphSON is now configured with multi-properties enabled. This change allows
TinkerGraphs returned from Gremlin Server to properly return multi-properties, which was a problem seen when
subgraphing a graph that contained properties with a setting other than <code>Cardinality.single</code>.</p>
</div>
<div class="paragraph">
<p>This change could be considered breaking in the odd chance that a TinkerGraph returned from Gremlin Server was later
mutated, because calls to <code>property(k,v)</code> would default to <code>Cardinality.list</code> instead of <code>Cardinality.single</code>. In the
event that this is a problem, simple change calls to <code>property(k,v)</code> to <code>property(Cardinality.single,k,v)</code> and
explicitly set the <code>Cardinality</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1587">TINKERPOP-1587</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_traversal_promises">Traversal Promises</h4>
<div class="paragraph">
<p>The <code>Traversal</code> API now has a new <code>promise()</code> method. These methods return a promise in the form of a
<code>CompleteableFuture</code>. Usage is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">gremlin&gt; promise = g.V().out().promise{<span class="local-variable">it</span>.next()}
==&gt;java.util.concurrent.CompletableFuture<span class="error">@</span><span class="integer">4</span>aa3d36[Completed normally]
gremlin&gt; promise.join()
==&gt;v[<span class="integer">3</span>]
gremlin&gt; promise.isDone()
==&gt;<span class="predefined-constant">true</span>
gremlin&gt; g.V().out().promise{<span class="local-variable">it</span>.toList()}.thenApply{<span class="local-variable">it</span>.size()}.get()
==&gt;<span class="integer">6</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>At this time, this method is only used for traversals that are configured using <code>withRemote()</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1490">TINKERPOP-1490</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_if_then_semantics_with_choose_step">If/Then-Semantics with Choose Step</h4>
<div class="paragraph">
<p>Gremlin&#8217;s <code>choose()</code>-step supports if/then/else-semantics. Thus, to effect if/then-semantics, <code>identity()</code> was required.
Thus, the following two traversals below are equivalent with the later being possible in this release.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">g.V().choose(hasLabel(<span class="string"><span class="delimiter">'</span><span class="content">person</span><span class="delimiter">'</span></span>),out(<span class="string"><span class="delimiter">'</span><span class="content">created</span><span class="delimiter">'</span></span>),identity())
g.V().choose(hasLabel(<span class="string"><span class="delimiter">'</span><span class="content">person</span><span class="delimiter">'</span></span>),out(<span class="string"><span class="delimiter">'</span><span class="content">created</span><span class="delimiter">'</span></span>))</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1508">TINKERPOP-1508</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_fastnosuchelementexception_converted_to_regular_nosuchelementexception">FastNoSuchElementException converted to regular NoSuchElementException</h4>
<div class="paragraph">
<p>Previously, a call to <code>Traversal.next()</code> that did not have a result would throw a <code>FastNoSuchElementException</code>.
This has been changed to a regular <code>NoSuchElementException</code> that includes the stack trace. Code that explicitly catches
<code>FastNoSuchElementException</code> should be converted to check for the more general class of <code>NoSuchElementException</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1330">TINKERPOP-1330</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_scriptengine_support_in_gremlin_core">ScriptEngine support in gremlin-core</h4>
<div class="paragraph">
<p><code>ScriptEngine</code> and <code>GremlinPlugin</code> infrastructure has been moved from gremlin-groovy to gremlin-core to allow for
better re-use across different Gremlin Language Variants. At this point, this change is non-breaking as it was
implemented through deprecation.</p>
</div>
<div class="paragraph">
<p>The basic concept of a <code>ScriptEngine</code> has been replaced by the notion of a <code>GremlinScriptEngine</code> (i.e. a
"ScriptEngine" that is specifically tuned for executing Gremlin-related scripts). "ScriptEngine" infrastructure has
been developed to help support this new interface, specifically <code>GremlinScriptEngineFactory</code> and
<code>GremlinScriptEngineManager</code>. Prefer use of this infrastructure when instantiating a <code>GremlinScriptEngine</code> rather
than trying to instantiate directly.</p>
</div>
<div class="paragraph">
<p>For example, rather than instantiate a <code>GremlinGroovyScriptEngine</code> with the constructor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">GremlinScriptEngine engine = <span class="keyword">new</span> GremlinGroovyScriptEngine();</code></pre>
</div>
</div>
<div class="paragraph">
<p>prefer to instantiate it as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">GremlinScriptEngineManager manager = <span class="keyword">new</span> CachedGremlinScriptEngineManager();
GremlinScriptEngine engine = manager.getEngineByName(<span class="string"><span class="delimiter">&quot;</span><span class="content">gremlin-groovy</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Related to the addition of <code>GremlinScriptEngine</code>, <code>org.apache.tinkerpop.gremlin.groovy.plugin.GremlinPlugin</code> in
gremlin-groovy has been deprecated and then replaced by <code>org.apache.tinkerpop.gremlin.jsr223.GremlinPlugin</code>. The new
version of <code>GremlinPlugin</code> is similar but does carry some new methods to implement that involves the new <code>Customizer</code>
interface. The <code>Customizer</code> interface is the way in which <code>GremlinScriptEngine</code> instance can be configured with
imports, initialization scripts, compiler options, etc.</p>
</div>
<div class="paragraph">
<p>Note that a <code>GremlinPlugin</code> can be applied to a <code>GremlinScriptEngine</code> by adding it to the <code>GremlinScriptEngineManager</code>
that creates it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">GremlinScriptEngineManager manager = <span class="keyword">new</span> CachedGremlinScriptEngineManager();
manager.addPlugin(ImportGremlinPlugin.build().classImports(java.awt.Color.class).create());
GremlinScriptEngine engine = manager.getEngineByName(<span class="string"><span class="delimiter">&quot;</span><span class="content">gremlin-groovy</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>All of this new infrastructure is currently optional on the 3.2.x line of code. More detailed documentation will for
these changes will be supplied as part of 3.3.0 when these features become mandatory and the deprecated code is
removed.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1562">TINKERPOP-1562</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_ssl_client_authentication">SSL Client Authentication</h4>
<div class="paragraph">
<p>Added new server configuration option <code>ssl.needClientAuth</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1602">TINKERPOP-1602</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_14">Upgrading for Providers</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
It is recommended that providers also review all the upgrade instructions specified for users. Many of the
changes there may prove important for the provider&#8217;s implementation.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_graph_database_providers_9">Graph Database Providers</h4>
<div class="sect4">
<h5 id="_closeableiterator">CloseableIterator</h5>
<div class="paragraph">
<p>Prior to TinkerPop 3.x, Blueprints had the notion of a <code>CloseableIterable</code> which exposed a way for Graph Providers
to offer a way to release resources that might have been opened when returning vertices and edges. That interface was
never exposed in TinkerPop 3.x, but has now been made available via the new <code>CloseableIterator</code>. Providers may choose
to use this interface or not when returning values from <code>Graph.vertices()</code> and <code>Graph.edges()</code>.</p>
</div>
<div class="paragraph">
<p>It will be up to users to know whether or not they need to call <code>close()</code>. Of course, users should typically not be
operating with the Graph Structure API, so it&#8217;s unlikely that they would be calling these methods directly in the
first place. It is more likely that users will be calling <code>Traversal.close()</code>. This method will essentially iterate
the steps of the <code>Traversal</code> and simply call <code>close()</code> on any steps that implement <code>AutoCloseable</code>. By default,
<code>GraphStep</code> now implements <code>AutoCloseable</code> which most Graph Providers will extend upon (as was done with TinkerGraph&#8217;s
<code>TinkerGraphStep</code>), so the integration should largely come for free if the provider simply returns a
<code>CloseableIterator</code> from <code>Graph.vertices()</code> and <code>Graph.edges()</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1589">TINKERPOP-1589</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_hascontainer_andp_splitting">HasContainer AndP Splitting</h5>
<div class="paragraph">
<p>Previously, <code>GraphTraversal</code> made it easy for providers to analyze <code>P</code>-predicates in <code>HasContainers</code>, but always
splitting <code>AndP</code> predicates into their component parts. This helper behavior is no longer provided because,
1.) <code>AndP</code> can be inserted into a <code>XXXStep</code> in other ways, 2.) the providers <code>XXXStep</code> should process <code>AndP</code>
regardless of <code>GraphTraversal</code> helper, and 3.) the <code>GraphTraversal</code> helper did not recursively split.
A simple way to split <code>AndP</code> in any custom <code>XXXStep</code> that implements <code>HasContainerHolder</code> is to use the following method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="type">void</span> addHasContainer(<span class="directive">final</span> HasContainer hasContainer) {
  <span class="keyword">if</span> (hasContainer.getPredicate() <span class="keyword">instanceof</span> AndP) {
    <span class="keyword">for</span> (<span class="directive">final</span> P&lt;?&gt; predicate : ((AndP&lt;?&gt;) hasContainer.getPredicate()).getPredicates()) {
      <span class="local-variable">this</span>.addHasContainer(<span class="keyword">new</span> HasContainer(hasContainer.getKey(), predicate));
    }
  } <span class="keyword">else</span>
    <span class="local-variable">this</span>.hasContainers.add(hasContainer);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1482">TINKERPOP-1482</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1502">TINKERPOP-1502</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_duplicate_multi_properties">Duplicate Multi-Properties</h5>
<div class="paragraph">
<p>Added <code>supportsDuplicateMultiProperties</code> to <code>VertexFeatures</code> so that graph provider who only support unique values as
multi-properties have more flexibility in describing their graph capabilities.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-919">TINKERPOP-919</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_deprecated_optin">Deprecated OptIn</h5>
<div class="paragraph">
<p>In 3.2.1, all <code>junit-benchmark</code> performance tests were deprecated. At that time, the <code>OptIn</code> representations of these
tests should have been deprecated as well, but they were not. That omission has been remedied now. Specifically, the
following fields were deprecated:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>OptIn.SUITE_GROOVY_ENVIRONMENT_PERFORMANCE</code></p>
</li>
<li>
<p><code>OptIn.SUITE_PROCESS_PERFORMANCE</code></p>
</li>
<li>
<p><code>OptIn.SUITE_STRUCTURE_PERFORMANCE</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As of 3.2.4, the following test suites were also deprecated:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>OptIn.SUITE_GROOVY_PROCESS_STANDARD</code></p>
</li>
<li>
<p><code>OptIn.SUITE_GROOVY_PROCESS_COMPUTER</code></p>
</li>
<li>
<p><code>OptIn.SUITE_GROOVY_ENVIRONMENT</code></p>
</li>
<li>
<p><code>OptIn.SUITE_GROOVY_ENVIRONMENT_INTEGRATE</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Future testing of <code>gremlin-groovy</code> (and language variants in general) will be handled differently and will not require
a Graph Provider to validate its operations with it. Graph Providers may now choose to remove these tests from their
test suites, which should reduce the testing burden.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1610">TINKERPOP-1610</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_deprecated_getinstance">Deprecated getInstance()</h5>
<div class="paragraph">
<p>TinkerPop has generally preferred static <code>instance()</code> methods over <code>getInstance()</code>, but <code>getInstance()</code> was used in
some cases nonetheless. As of this release, <code>getInstance()</code> methods have been deprecated in favor of <code>instance()</code>.
Of specific note, custom <code>IoRegistry</code> (as related to IO in general) and <code>Supplier&lt;ClassResolver&gt;</code> (as related to
Gryo serialization in general) now both prefer <code>instance()</code> over <code>getInstance()</code> given this deprecation.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1530">TINKERPOP-1530</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_drivers_providers">Drivers Providers</h4>
<div class="sect4">
<h5 id="_force_close">Force Close</h5>
<div class="paragraph">
<p>Closing a session will first attempt a proper close of any open transactions. A problem can occur, however, if there is
a long run job (e.g. an OLAP-based traversal) executing, as that job will block the calls to close the transactions.
By exercising the option to a do a "forced close" the session will skip trying to close the transactions and just
attempt to interrupt the long run job. By not closing transactions, the session leaves it up to the underlying graph
database to sort out how it will deal with those orphaned transactions. On the positive side though (for those graphs
which do that well) , long run jobs have the opportunity to be cancelled without waiting for a timeout of the job itself
which will allow resources to be released earlier.</p>
</div>
<div class="paragraph">
<p>The "force" argument is passed on the "close" message and is a boolean value. This is an optional argument to "close"
and defaults to <code>false</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-932">TINKERPOP-932</a>,
<a href="http://tinkerpop.apache.org/docs/current/dev/provider/#_session_opprocessor">Provider Documentation - Session OpProcessor</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_sasl_authentication">SASL Authentication</h5>
<div class="paragraph">
<p>Gremlin Supports SASL based authentication. The server accepts either a byte array or Base64 encoded String as the in
the <code>sasl</code> argument on the <code>RequestMessage</code>, however it sends back a byte array only. Some serializers or serializer
configurations don&#8217;t work well with that approach (specifically the "toString" configuration on the Gryo serializer) as
the byte array is returned in the <code>ResponseMessage</code> result. In the case of the "toString" serializer the byte array
gets "toString&#8217;d" and the can&#8217;t be read by the client.</p>
</div>
<div class="paragraph">
<p>In 3.2.4, the byte array is still returned in the <code>ResponseMessage</code> result, but is also returned in the status
attributes under a <code>sasl</code> key as a Base64 encoded string. In this way, the client has options on how it chooses to
process the authentication response and the change remains backward compatible. Drivers should upgrade to using the
Base64 encoded string however as the old approach will likely be removed in the future.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1600">TINKERPOP-1600</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_2_3">TinkerPop 3.2.3</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: October 17, 2016</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.2.3/CHANGELOG.asciidoc#release-3-2-3">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_21">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_renamed_null_result_preference">Renamed Null Result Preference</h4>
<div class="paragraph">
<p>In 3.2.2, the Gremlin Console introduced a setting called <code>empty.result.indicator</code>, which controlled the output that
was presented when no result was returned. For consistency, this setting has been renamed to <code>result.indicator.null</code>
and can be set as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; graph = TinkerGraph.open()
==&gt;tinkergraph[vertices:0 edges:0]
gremlin&gt; graph.close()
==&gt;null
gremlin&gt; :set result.indicator.null nil
gremlin&gt; graph = TinkerGraph.open()
==&gt;tinkergraph[vertices:0 edges:0]
gremlin&gt; graph.close()
==&gt;nil
gremlin&gt; :set result.indicator.null &quot;&quot;
gremlin&gt; graph = TinkerGraph.open()
==&gt;tinkergraph[vertices:0 edges:0]
gremlin&gt; graph.close()
gremlin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1409">TINKERPOP-1409</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_java_driver_keep_alive">Java Driver Keep-Alive</h4>
<div class="paragraph">
<p>The Java Driver now has a <code>keepAliveInterval</code> setting, which controls the amount of time in milliseconds it should wait
on an inactive connection before it sends a message to the server to keep the connection maintained. This should help
environments that use a load balancer in front of Gremlin Server by ensuring connections are actively maintained even
during periods of inactivity.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1249">TINKERPOP-1249</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_where_step_supports_by_modulation">Where Step Supports By-Modulation</h4>
<div class="paragraph">
<p>It is now possible to use <code>by()</code> with <code>where()</code> predicate-based steps. Previously, without using <code>match()</code>, if you wanted
to know who was older than their friend, the following traversal would be used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; g.V().as('a').out('knows').as('b').
......1&gt;   filter(select('a','b').by('age').where('a', lt('b')))
==&gt;v[4]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, with <code>where().by()</code> support, the above traversal can be expressed more succinctly and more naturally as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; g.V().as('a').out('knows').as('b').
......1&gt;   where('a', lt('b')).by('age')
==&gt;v[4]</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1330">TINKERPOP-1330</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_change_in_has_method_signatures">Change In has() Method Signatures</h4>
<div class="paragraph">
<p>The TinkerPop 3.2.2 release unintentionally introduced a breaking change for some <code>has()</code> method overloads. In particular the
behavior for single item array arguments was changed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; g.V().hasLabel([&quot;software&quot;] as String[]).count()
==&gt;0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Prior this change single item arrays were treated like there was only that single item:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; g.V().hasLabel([&quot;software&quot;] as String[]).count()
==&gt;2
gremlin&gt; g.V().hasLabel(&quot;software&quot;).count()
==&gt;2</code></pre>
</div>
</div>
<div class="paragraph">
<p>TinkerPop 3.2.3 fixes this misbehavior and all <code>has()</code> method overloads behave like before, except that they no longer
support no arguments.</p>
</div>
</div>
<div class="sect3">
<h4 id="_deprecated_reconnectinitialdelay">Deprecated reconnectInitialDelay</h4>
<div class="paragraph">
<p>The <code>reconnectInitialDelay</code> setting on the <code>Cluster</code> builder has been deprecated. It no longer serves any purpose.
The value for the "initial delay" now comes from <code>reconnectInterval</code> (there are no longer two separate settings to
control).</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1460">TINKERPOP-1460</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_traversalsource_close">TraversalSource.close()</h4>
<div class="paragraph">
<p><code>TraversalSource</code> now implements <code>AutoCloseable</code>, which means that the <code>close()</code> method is now available. This new
method is important in cases where <code>withRemote()</code> is used, as <code>withRemote()</code> can open "expensive" resources that need
to be released.</p>
</div>
<div class="paragraph">
<p>In the case of TinkerPop&#8217;s <code>DriverRemoteConnection</code>, <code>close()</code> will destroy the <code>Client</code> instance that is created
internally by <code>withRemote()</code> as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; graph = EmptyGraph.instance()
==&gt;emptygraph[empty]
gremlin&gt; g = graph.traversal().withRemote('conf/remote-graph.properties')
==&gt;graphtraversalsource[emptygraph[empty], standard]
gremlin&gt; g.close()
gremlin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the <code>withRemote()</code> method will call <code>close()</code> on a <code>RemoteConnection</code> passed directly to it as well, so
there is no need to do that manually.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-790">TINKERPOP-790</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_io_reference_documentation">IO Reference Documentation</h4>
<div class="paragraph">
<p>There is new reference documentation for the various IO formats. The documentation provides more details and samples
that should be helpful to users and providers who intend to work directly with the TinkerPop supported serialization
formats: GraphML, GraphSON and Gryo.</p>
</div>
<div class="paragraph">
<p>See: <a href="http://tinkerpop.apache.org/docs/3.2.3/dev/io/">IO Reference Documentation</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_15">Upgrading for Providers</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
It is recommended that providers also review all the upgrade instructions specified for users. Many of the
changes there may prove important for the provider&#8217;s implementation.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_graph_system_providers_4">Graph System Providers</h4>
<div class="sect4">
<h5 id="_default_lazybarrierstrategy">Default LazyBarrierStrategy</h5>
<div class="paragraph">
<p><code>LazyBarrierStrategy</code> has been included as a default strategy. <code>LazyBarrierStrategy</code> walks a traversal and looks for
"flatMaps" (<code>out()</code>, <code>in()</code>, <code>both()</code>, <code>values()</code>, <code>V()</code>, etc.) and adds "lazy barriers" to dam up the stream so to
increase the probability of bulking the traversers. One of the side-effects is that:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">g.V().out().V().has(a)</code></pre>
</div>
</div>
<div class="paragraph">
<p>is compiled to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">g.V().out().barrier().V().barrier().has(a)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Given that <code>LazyBarrierStrategy</code> is an <code>OptimizationStrategy</code>, it comes before <code>ProviderOptimizationStrategies</code>.
Thus, if the provider&#8217;s <code>XXXGraphStepStrategy</code> simply walks from the second <code>V()</code> looking for <code>has()</code>-only, it will not
be able to pull in the <code>has()</code> cause the <code>barrier()</code> blocks it. Please see the updates to <code>TinkerGraphStepStrategy</code> and
how it acknowledges <code>NoOpBarrierSteps</code> (i.e. <code>barrier()</code>) skipping over them and left-propagating labels to the
previous step.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1488">TINKERPOP-1488</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_configurable_strategies">Configurable Strategies</h5>
<div class="paragraph">
<p>If the provider has non-configurable <code>TraversalStrategy</code> classes, those classes should expose a static <code>instance()</code>-method.
This is typical and thus, backwards compatible. However, if the provider has a <code>TraversalStrategy</code> that can be configured
(e.g. via a <code>Builder</code>), then it should expose a static <code>create(Configuration)</code>-method, where the keys of the configuration
are the method names of the <code>Builder</code> and the values are the method arguments. For instance, for Gremlin-Python to create
a <code>SubgraphStrategy</code>, it does the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python">g = Graph().traversal().withRemote(connection).
        withStrategies(SubgraphStrategy(vertices=__.hasLabel(<span class="string"><span class="delimiter">'</span><span class="content">person</span><span class="delimiter">'</span></span>),edges=__.has(<span class="string"><span class="delimiter">'</span><span class="content">weight</span><span class="delimiter">'</span></span>,gt(<span class="float">0.5</span>))))</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>SubgraphStrategy.create(Configuration)</code>-method is defined as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> SubgraphStrategy create(<span class="directive">final</span> <span class="predefined-type">Configuration</span> configuration) {
    <span class="directive">final</span> Builder builder = SubgraphStrategy.build();
    <span class="keyword">if</span> (configuration.containsKey(VERTICES))
        builder.vertices((Traversal) configuration.getProperty(VERTICES));
    <span class="keyword">if</span> (configuration.containsKey(EDGES))
        builder.edges((Traversal) configuration.getProperty(EDGES));
    <span class="keyword">if</span> (configuration.containsKey(VERTEX_PROPERTIES))
        builder.vertexProperties((Traversal) configuration.getProperty(VERTEX_PROPERTIES));
    <span class="keyword">return</span> builder.create();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, in order to make serialization possible from JVM-based Gremlin language variants, all strategies have a
<code>TraverserStrategy.getConfiguration()</code> method which returns a <code>Configuration</code> that can be used to <code>create()</code> the
<code>TraversalStrategy</code>.</p>
</div>
<div class="paragraph">
<p>The <code>SubgraphStrategy.getConfiguration()</code>-method is defined as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="predefined-type">Configuration</span> getConfiguration() {
    <span class="directive">final</span> <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; map = <span class="keyword">new</span> <span class="predefined-type">HashMap</span>&lt;&gt;();
    map.put(STRATEGY, SubgraphStrategy.class.getCanonicalName());
    <span class="keyword">if</span> (<span class="predefined-constant">null</span> != <span class="local-variable">this</span>.vertexCriterion)
        map.put(VERTICES, <span class="local-variable">this</span>.vertexCriterion);
    <span class="keyword">if</span> (<span class="predefined-constant">null</span> != <span class="local-variable">this</span>.edgeCriterion)
            map.put(EDGES, <span class="local-variable">this</span>.edgeCriterion);
    <span class="keyword">if</span> (<span class="predefined-constant">null</span> != <span class="local-variable">this</span>.vertexPropertyCriterion)
        map.put(VERTEX_PROPERTIES, <span class="local-variable">this</span>.vertexPropertyCriterion);
    <span class="keyword">return</span> <span class="keyword">new</span> MapConfiguration(map);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The default implementation of <code>TraversalStrategy.getConfiguration()</code> is defined as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="keyword">default</span> <span class="predefined-type">Configuration</span> getConfiguration() {
    <span class="keyword">return</span> <span class="keyword">new</span> BaseConfiguration();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Thus, if the provider does not have any "builder"-based strategies, then no updates to their strategies are required.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1455">TINKERPOP-1455</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_deprecated_elementnotfound">Deprecated elementNotFound</h5>
<div class="paragraph">
<p>Both <code>Graph.Exceptions.elementNotFound()</code> methods have been deprecated. These exceptions were being asserted in the
test suite but were not being used anywhere in <code>gremlin-core</code> itself. The assertions have been modified to simply
assert that <code>NoSuchElementException</code> was thrown, which is precisely the behavior that was being indirectly asserted
when <code>Graph.Exceptions.elementNotFound()</code> were being used.</p>
</div>
<div class="paragraph">
<p>Providers should not need to take any action in this case for their tests to pass, however, it would be wise to remove
uses of these exception builders as they will be removed in the future.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-944">TINKERPOP-944</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_hidden_step_labels_for_compilation_only">Hidden Step Labels for Compilation Only</h5>
<div class="paragraph">
<p>In order for <code>SubgraphStrategy</code> to work, it was necessary to have multi-level children communicate with one another
via hidden step labels. It was decided that hidden step labels are for compilation purposes only and will be removed
prior to traversal evaluation. This is a valid decision given that hidden labels for graph system providers are
not allowed to be used by users. Likewise, hidden labels for steps should not be allowed be used by
users as well.</p>
</div>
</div>
<div class="sect4">
<h5 id="_propertymapstep_with_selection_traversal">PropertyMapStep with Selection Traversal</h5>
<div class="paragraph">
<p><code>PropertyMapStep</code> now supports selection of properties via child property traversal. If a provider was relying solely
on the provided property keys in a <code>ProviderOptimizationStrategy</code>, they will need to check if there is a child traversal
and if so, use that in their introspection for respective strategies. This model was created to support <code>SubgraphStrategy.vertexProperties()</code> filtering.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1456">TINKERPOP-1456</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-844">TINKERPOP-844</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_connectivep_nesting_inlined">ConnectiveP Nesting Inlined</h5>
<div class="paragraph">
<p>There was a bug in <code>ConnectiveP</code> (<code>AndP</code>/<code>OrP</code>), where <code>eq(1).and(eq(2).and(eq(3)))</code> was <code>AndP(eq(1),AndP(eq(2),eq(3)))</code>
instead of unnested/inlined as <code>AndP(eq(1),eq(2),eq(3))</code>. Likewise, for <code>OrP</code>. If a provider was leveraging <code>ConnectiveP</code>
predicates for their custom steps (e.g. graph- or vertex-centric index lookups), then they should be aware of the inlining
and can simplify any and/or-tree walking code in their respective <code>ProviderOptimizationStrategy</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1470">TINKERPOP-1470</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_2_2">TinkerPop 3.2.2</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: September 6, 2016</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.2.2/CHANGELOG.asciidoc#release-3-2-2">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_22">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_graphson_2_0">GraphSON 2.0</h4>
<div class="paragraph">
<p>GraphSON 2.0 has been introduced to improve and normalize the format of types embedded in GraphSON.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1274">TINKERPOP-1274</a>,
<a href="http://tinkerpop.apache.org/docs/3.2.2/reference/#graphson-2-0-types">Reference Documentation -
GraphSON 2.0</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_log4j_dependencies">Log4j Dependencies</h4>
<div class="paragraph">
<p>There were a number of changes to the Log4j dependencies in the various modules. Log4j was formerly included as part
of the <code>slf4j-log4j12</code> in <code>gremlin-core</code>, however that "forced" use of Log4j as a logger implementation when that
really wasn&#8217;t necessary or desired. If a project depended on <code>gremlin-core</code> or other TinkerPop project to get its
Log4j implementation then those applications will need to now include the dependency themselves directly.</p>
</div>
<div class="paragraph">
<p>Note that Gremlin Server and Gremlin Console explicitly package Log4j in their respective binary distributions.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1151">TINKERPOP-1151</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_default_for_gremlinpool">Default for gremlinPool</h4>
<div class="paragraph">
<p>The <code>gremlinPool</code> setting in Gremlin Server is now defaulted to zero. When set to zero, Gremlin Server will use the
value provided by <code>Runtime.availableProcessors()</code> to set the pool size. Note that the packaged YAML files no longer
contain the thread pool settings as all are now driven by sensible defaults. Obviously these values can be added
and overridden as needed.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1373">TINKERPOP-1373</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_new_console_features">New Console Features</h4>
<div class="paragraph">
<p>The Gremlin Console can now have its text colorized. For example, you can set the color of the Gremlin ascii art to
the more natural color of green by using the <code>:set</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; :set gremlin.color green</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is also possible to colorize results, like vertices, edges, and other common returns. Please see the
<a href="http://tinkerpop.apache.org/docs/3.2.2/reference/#console-preferences">reference documentation</a> for more details
on all the settings.</p>
</div>
<div class="paragraph">
<p>The console also now includes better multi-line support:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; g.V().out().
......1&gt;       has('name','josh').
......2&gt;       out('created')
==&gt;v[5]
==&gt;v[3]</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is a nice feature in that it can help you understand if a line is incomplete and unevaluated.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1285">TINKERPOP-1285</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1285">TINKERPOP-1037</a>,
<a href="http://tinkerpop.apache.org/docs/3.2.2/reference/#console-preferences">Reference Documentation -
Console Preferences</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_rest_api_renamed_to_http_api">REST API Renamed to HTTP API</h4>
<div class="paragraph">
<p>This is only a rename to clarify the design of the API. There is no change to the API itself.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_16">Upgrading for Providers</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
It is recommended that providers also review all the upgrade instructions specified for users. Many of the
changes there may prove important for the provider&#8217;s implementation.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_graph_system_providers_5">Graph System Providers</h4>
<div class="sect4">
<h5 id="_deprecated_io_builder_registry">Deprecated Io.Builder.registry()</h5>
<div class="paragraph">
<p>The <code>Io.Builder.registry()</code> has been deprecated in favor of <code>Io.Builder.onMapper(Consumer&lt;Mapper&gt;)</code>. This change gives
the <code>Graph</code> implementation greater flexibility over how to modify the <code>Mapper</code> implementation. In most cases, the
implementation will simply add its <code>IoRegistry</code> to allow the <code>Mapper</code> access to custom serialization classes, but this
approach makes it possible to also set other specific settings that aren&#8217;t generalized across all IO implementations.
A good example of this type of usage would be to provide a custom <code>ClassRessolver</code> implementation to a <code>GryoMapper</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1402">TINKERPOP-1402</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_log4j_dependencies_2">Log4j Dependencies</h5>
<div class="paragraph">
<p>There were a number of changes to the Log4j dependencies in the various modules. Log4j was formerly included as part
of the <code>slf4j-log4j12</code> in <code>gremlin-core</code>, however that "forced" use of log4j as a logger implementation when that
really wasn&#8217;t necessary or desired. The <code>slf4j-log4j12</code> dependency is now in "test" scope for most of the modules. The
exception to that rule is <code>gremlin-test</code> which prescribes it as "optional". That change means that developers
dependending on <code>gremlin-test</code> (or <code>gremlin-groovy-test</code>) will need to explicitly specify it as a dependency in their
<code>pom.xml</code> (or a different slf4j implementation if that better suits them).</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1151">TINKERPOP-1151</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_drivers_providers_2">Drivers Providers</h4>
<div class="sect4">
<h5 id="_graphson_2_0_2">GraphSON 2.0</h5>
<div class="paragraph">
<p>Drivers providers can exploit the new format of typed values JSON serialization offered by GraphSON 2.0. This format
has been created to allow easy and agnostic parsing of a GraphSON payload without type loss. Drivers of non-Java
languages can then implement their own mapping of the GraphSON&#8217;s language agnostic type IDs (e.g. <code>UUID</code>, <code>LocalDate</code>)
to the appropriate representation for the driver&#8217;s language.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1274">TINKERPOP-1274</a>,
<a href="http://tinkerpop.apache.org/docs/3.2.2/reference/#graphson-2.0-types">Reference Documentation -
GraphSON 2.0</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_traversal_serialization">Traversal Serialization</h5>
<div class="paragraph">
<p>There was an "internal" serialization format in place for <code>Traversal</code> which allowed one to be submitted to Gremlin
Server directly over <code>RemoteGraph</code>. That format has been removed completely and is wholly replaced by the non-JVM
specific approach of serializing <code>Bytecode</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1392">TINKERPOP-1392</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_2_1">TinkerPop 3.2.1</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: July 18, 2016</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.2.1/CHANGELOG.asciidoc#release-3-2-1">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_23">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_gephi_plugin">Gephi Plugin</h4>
<div class="paragraph">
<p>The Gephi Plugin has been updated to support Gephi 0.9.x. Please upgrade to this latest version to use the Gephi Plugin
for Gremlin Console.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1297">TINKERPOP-1297</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_gryomapper_construction">GryoMapper Construction</h4>
<div class="paragraph">
<p>It is now possible to override existing serializers with calls to <code>addCustom</code> on the <code>GryoMapper</code> builder. This option
allows complete control over the serializers used by Gryo. Of course, this also makes it possible to produce completely
non-compliant Gryo files. This feature should be used with caution.</p>
</div>
</div>
<div class="sect3">
<h4 id="_traversalvertexprogram">TraversalVertexProgram</h4>
<div class="paragraph">
<p><code>TraversalVertexProgram</code> always maintained a <code>HALTED_TRAVERSERS</code> <code>TraverserSet</code> for each vertex throughout the life
of the OLAP computation. However, if there are no halted traversers in the set, then there is no point in keeping that
compute property around as without it, time and space can be saved. Users that have <code>VertexPrograms</code> that are chained off
of <code>TraversalVertexProgram</code> and have previously assumed that <code>HALTED_TRAVERSERS</code> always exists at each vertex, should no
longer assume that.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">TraverserSet haltedTraversers = vertex.value(TraversalVertexProgram.HALTED_TRAVERSERS);
<span class="comment">// good code</span>
TraverserSet haltedTraversers = vertex.property(TraversalVertexProgram.HALTED_TRAVERSERS).orElse(<span class="keyword">new</span> TraverserSet());</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_interrupting_traversals">Interrupting Traversals</h4>
<div class="paragraph">
<p>Traversals now better respect calls to <code>Thread.interrupt()</code>, which mean that a running <code>Traversal</code> can now be
cancelled. There are some limitations that remain, but most OLTP-based traversals should cancel without
issue. OLAP-based traversals for Spark will also cancel and clean up running jobs in Spark itself. Mileage may vary
on other process implementations and it is possible that graph providers could potentially write custom step
implementations that prevent interruption. If it is found that there are configurations or specific traversals that
do not respect interruption, please mention them on the mailing list.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-946">TINKERPOP-946</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin_console_flags">Gremlin Console Flags</h4>
<div class="paragraph">
<p>Gremlin Console had several methods for executing scripts from file at the start-up of <code>bin/gremlin.sh</code>. There were
two options:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">bin/gremlin.sh script.groovy    <span class="invisible">//</span><b class="conum">1</b>
bin/gremlin.sh -e script.groovy <span class="invisible">//</span><b class="conum">2</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>script.groovy</code> would be executed as a console initialization script setting the console up for use and leaving
it open when the script completed successfully or closing it if the script failed.</p>
</li>
<li>
<p>The <code>script.groovy</code> would be executed by the <code>ScriptExecutor</code> which meant that commands for the Gremlin Console,
such as <code>:remote</code> and <code>:&gt;</code> would not be respected.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Changes in this version of TinkerPop have added much more flexibility here and only a minor breaking change should be
considered when using this version. First of all, recognize that hese two lines are currently equivalent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">bin/gremlin.sh script.groovy
bin/gremlin.sh -i script.groovy</code></pre>
</div>
</div>
<div class="paragraph">
<p>but users should start to explicitly specify the <code>-i</code> flag as TinkerPop will eventually remove the old syntax. Despite
the one used beware of the fact that neither will close the console on script failure anymore. In that sense, this
behavior represents a breaking change to consider. To ensure the console closes on failure or success, a script will
have to use the <code>-e</code> option.</p>
</div>
<div class="paragraph">
<p>The console also has a number of new features in addition to <code>-e</code> and <code>-i</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>View the available flags for the console with <code>-h</code>.</p>
</li>
<li>
<p>Control console output with <code>-D</code>, <code>-Q</code> and -<code>V</code></p>
</li>
<li>
<p>Get line numbers on script failures passed to <code>-i</code> and <code>-e</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1268">TINKERPOP-1268</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1155">TINKERPOP-1155</a>, <a href="https://issues.apache.org/jira/browse/TINKERPOP-1156">TINKERPOP-1156</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1157">TINKERPOP-1157</a>,
<a href="http://tinkerpop.apache.org/docs/3.2.1/reference/#interactive-mode">Reference Documentation - Interactive Mode</a>,
<a href="http://tinkerpop.apache.org/docs/3.2.1/reference/#execution-mode">Reference Documentation - Execution Mode</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_17">Upgrading for Providers</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
It is recommended that providers also review all the upgrade instructions specified for users. Many of the
changes there may prove important for the provider&#8217;s implementation.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_graph_system_providers_6">Graph System Providers</h4>
<div class="sect4">
<h5 id="_vertexcomputing_api_change">VertexComputing API Change</h5>
<div class="paragraph">
<p>The <code>VertexComputing</code> API is used by steps that wrap a <code>VertexProgram</code>. There is a method called
<code>VertexComputing.generateProgram()</code> that has changed which now takes a second argument of <code>Memory</code>. To  upgrade, simply
fix the method signature of your <code>VertexComputing</code> implementations. The <code>Memory</code> argument can be safely ignored to
effect the exact same semantics as prior. However, now previous OLAP job <code>Memory</code> can be leveraged when constructing
the next <code>VertexProgram</code> in an OLAP traversal chain.</p>
</div>
</div>
<div class="sect4">
<h5 id="_interrupting_traversals_2">Interrupting Traversals</h5>
<div class="paragraph">
<p>Several tests have been added to the TinkerPop test suite to validate that a <code>Traversal</code> can be cancelled with
<code>Thread.interrupt()</code>. The test suite does not cover all possible traversal scenarios. When implementing custom steps,
providers should take care to not ignore an <code>InterruptionException</code> that might be thrown in their code and to be sure
to check <code>Thread.isInterrupted()</code> as needed to ensure that the step remains cancellation compliant.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-946">TINKERPOP-946</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_performance_tests">Performance Tests</h5>
<div class="paragraph">
<p>All "performance" tests have been deprecated. In the previous 3.2.0-incubating release, the <code>ProcessPerformanceSuite</code>
and <code>TraversalPerformanceTest</code> were deprecated, but some other tests remained. It is the remaining tests that have
been deprecated on this release:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>`StructurePerformanceSuite</p>
<div class="ulist">
<ul>
<li>
<p><code>GraphReadPerformanceTest</code></p>
</li>
<li>
<p><code>GraphWriterPerformanceTest</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>GroovyEnvironmentPerformanceSuite</code></p>
<div class="ulist">
<ul>
<li>
<p><code>SugarLoaderPerformanceTest</code></p>
</li>
<li>
<p><code>GremlinExecutorPerformanceTest</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Gremlin Server related performance tests</p>
</li>
<li>
<p>TinkerGraph related performance tests</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Providers should implement their own performance tests and not rely on these deprecated tests as they will be removed
in a future release along with the "JUnit Benchmarks" dependency.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1294">TINKERPOP-1294</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_graph_database_providers_10">Graph Database Providers</h4>
<div class="sect4">
<h5 id="_transaction_tests">Transaction Tests</h5>
<div class="paragraph">
<p>Tests and assertions were added to the structure test suite to validate that transaction status was in the appropriate
state following calls to close the transaction with <code>commit()</code> or <code>rollback()</code>. It is unlikely that this change would
cause test breaks for providers, unless the transaction status was inherently disconnected from calls to close the
transaction somehow.</p>
</div>
<div class="paragraph">
<p>In addition, other tests were added to enforce the expected semantics for threaded transactions. Threaded transactions
are expected to behave like manual transactions. They should be open automatically when they are created and once
closed should no longer be used. This behavior is not new and is the typical expected method for working with these
types of transactions. The test suite just requires that the provider implementation conform to these semantics.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-947">TINKERPOP-947</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1059">TINKERPOP-1059</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_graphfilter_and_graphfilterstrategy">GraphFilter and GraphFilterStrategy</h5>
<div class="paragraph">
<p><code>GraphFilter</code> has been significantly advanced where the determination of an edge direction/label legality is more stringent.
Along with this, <code>GraphFilter.getLegallyPositiveEdgeLabels()</code> has been added as a helper method to make it easier for <code>GraphComputer</code>
providers to know the space of labels being accessed by the traversal and thus, better enable provider-specific push-down predicates.</p>
</div>
<div class="paragraph">
<p>Note that <code>GraphFilterStrategy</code> is now a default <code>TraversalStrategy</code> registered with <code>GraphComputer.</code> If <code>GraphFilter</code> is
expensive for the underlying <code>GraphComputer</code> implementation, it can be deactivated as is done for <code>TinkerGraphComputer</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">static</span> {
  TraversalStrategies.GlobalCache.registerStrategies(TinkerGraphComputer.class,
    TraversalStrategies.GlobalCache.getStrategies(GraphComputer.class).clone().removeStrategies(GraphFilterStrategy.class));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1293">TINKERPOP-1293</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_graph_language_providers">Graph Language Providers</h4>
<div class="sect4">
<h5 id="_vertextest_signatures">VertexTest Signatures</h5>
<div class="paragraph">
<p>The method signatures of <code>get_g_VXlistXv1_v2_v3XX_name</code> and <code>get_g_VXlistX1_2_3XX_name</code> of <code>VertexTest</code> were changed
to take arguments for the <code>Traversal</code> to be constructed by extending classes.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_2_0_2">TinkerPop 3.2.0</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: Release Date: April 8, 2016</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.2.0-incubating/CHANGELOG.asciidoc#tinkerpop-320-release-date-april-8-2016">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_24">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_hadoop_filesystem_variable">Hadoop FileSystem Variable</h4>
<div class="paragraph">
<p>The <code>HadoopGremlinPlugin</code> defines two variables: <code>hdfs</code> and <code>fs</code>. The first is a reference to the HDFS <code>FileSystemStorage</code>
and the latter is a reference to the local <code>FileSystemStorage</code>. Prior to 3.2.x, <code>fs</code> was called <code>local</code>. However,
there was a variable name conflict with <code>Scope.local</code>. As such <code>local</code> is now <code>fs</code>. This issue existed prior to 3.2.x,
but was not realized until this release. Finally, this only effects Gremlin Console users.</p>
</div>
</div>
<div class="sect3">
<h4 id="_hadoop_configurations">Hadoop Configurations</h4>
<div class="paragraph">
<p>Note that <code>gremlin.hadoop.graphInputFormat</code>, <code>gremlin.hadoop.graphOutputFormat</code>, <code>gremlin.spark.graphInputRDD</code>, and
<code>gremlin.spark.graphOuputRDD</code> have all been deprecated. Using them still works, but moving forward, users only need to
leverage <code>gremlin.hadoop.graphReader</code> and <code>gremlin.hadoop.graphWriter</code>. An example properties file snippet is provided
below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>gremlin.graph=org.apache.tinkerpop.gremlin.hadoop.structure.HadoopGraph
gremlin.hadoop.graphReader=org.apache.tinkerpop.gremlin.hadoop.structure.io.gryo.GryoInputFormat
gremlin.hadoop.graphWriter=org.apache.tinkerpop.gremlin.hadoop.structure.io.gryo.GryoOutputFormat
gremlin.hadoop.jarsInDistributedCache=true
gremlin.hadoop.defaultGraphComputer=org.apache.tinkerpop.gremlin.spark.process.computer.SparkGraphComputer</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1082">TINKERPOP-1082</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1222">TINKERPOP-1222</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_traversalsideeffects_update">TraversalSideEffects Update</h4>
<div class="paragraph">
<p>There were changes to <code>TraversalSideEffect</code> both at the semantic level and at the API level. Users that have traversals
of the form <code>sideEffect{&#8230;&#8203;}</code> that leverage global side-effects should read the following carefully. If the user&#8217;s traversals do
not use lambda-based side-effect steps (e.g. <code>groupCount("m")</code>), then the changes below will not effect them. Moreover, if user&#8217;s
traversal only uses <code>sideEffect{&#8230;&#8203;}</code> with closure (non-<code>TraversalSideEffect</code>) data references, then the changes below will not effect them.
If the user&#8217;s traversal uses sideEffects in OLTP only, the changes below will not effect them. Finally, providers should not be
effected by the changes save any tests cases.</p>
</div>
<div class="sect4">
<h5 id="_traversalsideeffects_get_api_change">TraversalSideEffects Get API Change</h5>
<div class="paragraph">
<p><code>TraversalSideEffects</code> can now logically operate within a distributed OLAP environment. In order to make this possible,
it is necessary that each side-effect be registered with a reducing <code>BinaryOperator</code>. This binary operator will combine
distributed updates into a single global side-effect at the master traversal. Many of the methods in <code>TraversalSideEffect</code>
have been <code>Deprecated</code>, but they are backwards compatible save that <code>TraversalSideEffects.get()</code> no longer returns an <code>Optional</code>,
but instead throws an <code>IllegalArgumentException</code>. While the <code>Optional</code> semantics could have remained, it was deemed best to
directly return the side-effect value to reduce object creation costs and because all side-effects must be registered apriori,
there is never a reason why an unknown side-effect key would be used. In short:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// change</span>
traversal.getSideEffects().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">m</span><span class="delimiter">&quot;</span></span>).get()
<span class="comment">// to</span>
traversal.getSideEffects().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">m</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_traversalsideeffects_registration_requirement">TraversalSideEffects Registration Requirement</h5>
<div class="paragraph">
<p>All <code>TraversalSideEffects</code> must be registered upfront. This is because, in OLAP, side-effects map to <code>Memory</code> compute keys
and as such, must be declared prior to the execution of the <code>TraversalVertexProgram</code>. If a user&#8217;s traversal creates a
side-effect mid-traversal, it will fail. The traversal must use <code>GraphTraversalSource.withSideEffect()</code> to declare
the side-effects it will use during its execution lifetime. If the user&#8217;s traversals use standard side-effect Gremlin
steps (e.g. <code>group("m")</code>), then no changes are required.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1192">TINKERPOP-1192</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_traversalsideeffects_add_requirement">TraversalSideEffects Add Requirement</h5>
<div class="paragraph">
<p>In a distributed environment, a side-effect can not be mutated and be expected to exist in the mutated form at the final,
aggregated, master traversal. For instance, if the side-effect "myCount" references a <code>Long</code>, the <code>Long</code> can not be updated
directly via <code>sideEffects.set("myCount", sideEffects.get("myCount") + 1)</code>. Instead, it must rely on the registered reducer
to do the merging and thus, the <code>Step</code> must do <code>sideEffect.add("mySet",1)</code>, where the registered reducer is <code>Operator.sum</code>.
Thus, the below will increment "a". If no operator was provided, then the operator is assumed <code>Operator.assign</code> and the
final result of "a" would be 1. Note that <code>Traverser.sideEffects(key,value)</code> uses <code>TraversalSideEffect.add()</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">gremlin&gt; traversal = g.withSideEffect(<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>,<span class="integer">0</span>,sum).V().out().sideEffect{<span class="local-variable">it</span>.sideEffects(<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>,<span class="integer">1</span>)}
==&gt;v[<span class="integer">3</span>]
==&gt;v[<span class="integer">2</span>]
==&gt;v[<span class="integer">4</span>]
==&gt;v[<span class="integer">5</span>]
==&gt;v[<span class="integer">3</span>]
==&gt;v[<span class="integer">3</span>]
gremlin&gt; traversal.getSideEffects().get(<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>)
==&gt;<span class="integer">6</span>
gremlin&gt; traversal = g.withSideEffect(<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>,<span class="integer">0</span>).V().out().sideEffect{<span class="local-variable">it</span>.sideEffects(<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>,<span class="integer">1</span>)}
==&gt;v[<span class="integer">3</span>]
==&gt;v[<span class="integer">2</span>]
==&gt;v[<span class="integer">4</span>]
==&gt;v[<span class="integer">5</span>]
==&gt;v[<span class="integer">3</span>]
==&gt;v[<span class="integer">3</span>]
gremlin&gt; traversal.getSideEffects().get(<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>)
==&gt;<span class="integer">1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1192">TINKERPOP-1192</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1166">TINKERPOP-1166</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_profilestep_update_and_graphtraversal_api_change">ProfileStep Update and GraphTraversal API Change</h4>
<div class="paragraph">
<p>The <code>profile()</code>-step has been refactored into 2 steps&#8201;&#8212;&#8201;<code>ProfileStep</code> and <code>ProfileSideEffectStep</code>. Users who previously
used the <code>profile()</code> in conjunction with <code>cap(TraversalMetrics.METRICS_KEY)</code> can now simply omit the cap step. Users who
retrieved <code>TraversalMetrics</code> from the side-effects after iteration can still do so, but will need to specify a side-effect
key when using the <code>profile()</code>. For example, <code>profile("myMetrics")</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-958">TINKERPOP-958</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_branchstep_bug_fix">BranchStep Bug Fix</h4>
<div class="paragraph">
<p>There was a bug in <code>BranchStep</code> that also rears itself in subclass steps such as <code>UnionStep</code> and <code>ChooseStep</code>.
For traversals with branches that have barriers (e.g. <code>count()</code>, <code>max()</code>, <code>groupCount()</code>, etc.), the traversal needs to be updated.
For instance, if a traversal is of the form  <code>g.V().union(out().count(),both().count())</code>, the result is now different
(the bug fix yields a different output). In order to yield the same result, the traversal should be rewritten as
<code>g.V().local(union(out().count(),both().count()))</code>. Note that if a branch does not have a barrier, then no changes are required.
For instance, <code>g.V().union(out(),both())</code> does not need to be updated. Moreover, if the user&#8217;s traversal already used
the <code>local()</code>-form, then no change are required either.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1188">TINKERPOP-1188</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_memorycomputekey_and_vertexcomputekey">MemoryComputeKey and VertexComputeKey</h4>
<div class="paragraph">
<p>Users that have custom <code>VertexProgram</code> implementations will need to change their implementations to support the new
<code>VertexComputeKey</code> and <code>MemoryComputeKey</code> classes. In the <code>VertexPrograms</code> provided by TinkerPop, these changes were trivial,
taking less than 5 minutes to make all the requisite updates.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VertexProgram.getVertexComputeKeys()</code> returns a <code>Set&lt;VertexComputeKey&gt;</code>. No longer a <code>Set&lt;String&gt;</code>.
Use <code>VertexComputeKey.of(String key,boolean transient)</code> to generate a <code>VertexComputeKey</code>.
Transient keys were not supported in the past, so to make the implementation semantically equivalent,
the boolean transient should be false.</p>
</li>
<li>
<p><code>VertexProgram.getMemoryComputeKeys()</code> returns a <code>Set&lt;MemoryComputeKey&gt;</code>. No longer a <code>Set&lt;String&gt;</code>.
Use <code>MemoryComputeKey.of(String key, BinaryOperator reducer, boolean broadcast, boolean transient)</code> to generate a <code>MemoryComputeKey</code>.
Broadcasting and transients were not supported in the past so to make the implementation semantically equivalent,
the boolean broadcast should be true and the boolean transient should be false.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An example migration looks as follows. What might currently look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>public Set&lt;String&gt; getMemoryComputeKeys() {
   return new HashSet&lt;&gt;(Arrays.asList("a","b","c"))
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Should now look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>public Set&lt;MemoryComputeKey&gt; getMemoryComputeKeys() {
  return new HashSet&lt;&gt;(Arrays.asList(
    MemoryComputeKey.of("a", Operator.and, true, false),
    MemoryComputeKey.of("b", Operator.sum, true, false),
    MemoryComputeKey.of("c", Operator.or, true, false)))
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A similar patterns should also be used for <code>VertexProgram.getVertexComputeKeys()</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1162">TINKERPOP-1162</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_sparkgraphcomputer_and_giraphgraphcomputer_persistence">SparkGraphComputer and GiraphGraphComputer Persistence</h4>
<div class="paragraph">
<p>The <code>MapReduce</code>-based steps in <code>TraversalVertexProgram</code> have been removed and replaced using a new <code>Memory</code>-reduction model.
<code>MapReduce</code> jobs always created a persistence footprint, e.g. in HDFS. <code>Memory</code> data was never persisted to HDFS.
As such, there will be no data on the disk that is accessible. For instance, there is no more <code>~reducing</code>, <code>~traversers</code>,
and specially named side-effects such as <code>m</code> from a <code>groupCount('m')</code>. The data is still accessible via <code>ComputerResult.memory()</code>,
it simply does not have a corresponding on-disk representation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_remotegraph">RemoteGraph</h4>
<div class="paragraph">
<p><code>RemoteGraph</code> is a lightweight <code>Graph</code> implementation that acts as a proxy for sending traversals to Gremlin Server for
remote execution. It is an interesting alternative to the other methods for connecting to Gremlin Server in that all
other methods involved construction of a <code>String</code> representation of the <code>Traversal</code> which is then submitted as a script
to Gremlin Server (via driver or HTTP).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">gremlin&gt; graph = RemoteGraph.open(<span class="string"><span class="delimiter">'</span><span class="content">conf/remote-graph.properties</span><span class="delimiter">'</span></span>)
==&gt;remotegraph[DriverServerConnection-localhost/<span class="float">127.0</span><span class="float">.0</span><span class="float">.1</span>:<span class="integer">8182</span> [graph=<span class="string"><span class="delimiter">'</span><span class="content">graph]]</span></span><span class="error">
</span>gremlin&gt; g = graph.traversal()
==&gt;graphtraversalsource[remotegraph[DriverServerConnection-localhost/<span class="float">127.0</span><span class="float">.0</span><span class="float">.1</span>:<span class="integer">8182</span> [graph=<span class="string"><span class="delimiter">'</span><span class="content">graph]], standard]</span></span><span class="error">
</span>gremlin&gt; g.V().valueMap(<span class="predefined-constant">true</span>)
==&gt;[<span class="key">name</span>:[marko], <span class="key">label</span>:person, <span class="key">id</span>:<span class="integer">1</span>, <span class="key">age</span>:[<span class="integer">29</span>]]
==&gt;[<span class="key">name</span>:[vadas], <span class="key">label</span>:person, <span class="key">id</span>:<span class="integer">2</span>, <span class="key">age</span>:[<span class="integer">27</span>]]
==&gt;[<span class="key">name</span>:[lop], <span class="key">label</span>:software, <span class="key">id</span>:<span class="integer">3</span>, <span class="key">lang</span>:[java]]
==&gt;[<span class="key">name</span>:[josh], <span class="key">label</span>:person, <span class="key">id</span>:<span class="integer">4</span>, <span class="key">age</span>:[<span class="integer">32</span>]]
==&gt;[<span class="key">name</span>:[ripple], <span class="key">label</span>:software, <span class="key">id</span>:<span class="integer">5</span>, <span class="key">lang</span>:[java]]
==&gt;[<span class="key">name</span>:[peter], <span class="key">label</span>:person, <span class="key">id</span>:<span class="integer">6</span>, <span class="key">age</span>:[<span class="integer">35</span>]]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that <code>g.V().valueMap(true)</code> is executing in Gremlin Server and not locally in the console.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-575">TINKERPOP-575</a>,
<a href="http://tinkerpop.apache.org/docs/3.2.0-incubating/reference/#connecting-via-remotegraph">Reference Documentation - Remote Graph</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_18">Upgrading for Providers</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
It is recommended that providers also review all the upgrade instructions specified for users. Many of the
changes there may prove important for the provider&#8217;s implementation.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_graph_system_providers_7">Graph System Providers</h4>
<div class="sect4">
<h5 id="_graphstep_compilation_requirement">GraphStep Compilation Requirement</h5>
<div class="paragraph">
<p>OLTP graph providers that have a custom <code>GraphStep</code> implementation should ensure that <code>g.V().hasId(x)</code> and <code>g.V(x)</code> compile
to the same representation. This ensures a consistent user experience around random access of elements based on ids
(as opposed to potentially the former doing a linear scan). A static helper method called <code>GraphStep.processHasContainerIds()</code>
has been added. <code>TinkerGraphStepStrategy</code> was updated as such:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>((HasContainerHolder) currentStep).getHasContainers().forEach(tinkerGraphStep::addHasContainer);</code></pre>
</div>
</div>
<div class="paragraph">
<p>is now</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>((HasContainerHolder) currentStep).getHasContainers().forEach(hasContainer -&gt; {
  if (!GraphStep.processHasContainerIds(tinkerGraphStep, hasContainer))
    tinkerGraphStep.addHasContainer(hasContainer);
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1219">TINKERPOP-1219</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_step_api_update">Step API Update</h5>
<div class="paragraph">
<p>The <code>Step</code> interface is fundamental to Gremlin. <code>Step.processNextStart()</code> and <code>Step.next()</code> both returned <code>Traverser&lt;E&gt;</code>.
We had so many <code>Traverser.asAdmin()</code> and direct typecast calls throughout (especially in <code>TraversalVertexProgram</code>) that
it was deemed prudent to have <code>Step.processNextStart()</code> and <code>Step.next()</code> return <code>Traverser.Admin&lt;E&gt;</code>. Moreover it makes
sense as this is internal logic where <code>Admins</code> are always needed. Providers with their own step definitions will simply
need to change the method signatures of <code>Step.processNextStart()</code> and <code>Step.next()</code>. No logic update is required&#8201;&#8212;&#8201;save
that <code>asAdmin()</code> can be safely removed if used. Also, <code>Step.addStart()</code> and <code>Step.addStarts()</code> take <code>Traverser.Admin&lt;S&gt;</code>
and <code>Iterator&lt;Traverser.Admin&lt;S&gt;&gt;</code>, respectively.</p>
</div>
</div>
<div class="sect4">
<h5 id="_traversal_api_update">Traversal API Update</h5>
<div class="paragraph">
<p>The way in which <code>TraverserRequirements</code> are calculated has been changed (for the better). The ramification is that post
compilation requirement additions no longer make sense and should not be allowed. To enforce this,
<code>Traversal.addTraverserRequirement()</code> method has been removed from the interface. Moreover, providers/users should never be able
to add requirements manually (this should all be inferred from the end compilation). However, if need be, there is always
<code>RequirementStrategy</code> which will allow the provider to add a requirement at strategy application time
(though again, there should not be a reason to do so).</p>
</div>
</div>
<div class="sect4">
<h5 id="_comparatorholder_api_change">ComparatorHolder API Change</h5>
<div class="paragraph">
<p>Providers that either have their own <code>ComparatorHolder</code> implementation or reason on <code>OrderXXXStep</code> will need to update their code.
<code>ComparatorHolder</code> now returns <code>List&lt;Pair&lt;Traversal,Comparator&gt;&gt;</code>. This has greatly reduced the complexity of comparison-based
steps like <code>OrderXXXStep</code>. However, its a breaking API change that is trivial to update to, just some awareness is required.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1209">TINKERPOP-1209</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_graphcomputer_semantics_and_api">GraphComputer Semantics and API</h5>
<div class="paragraph">
<p>Providers that have a custom <code>GraphComputer</code> implementation will have a lot to handle. Note that if the graph system
simply uses <code>SparkGraphComputer</code> or <code>GiraphGraphComputer</code> provided by TinkerPop, then no updates are required. This
only effects providers that have their own custom <code>GraphComputer</code> implementations.</p>
</div>
<div class="paragraph">
<p><code>Memory</code> updates:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Any <code>BinaryOperator</code> can be used for reduction and is made explicit in the <code>MemoryComputeKey</code>.</p>
</li>
<li>
<p><code>MemoryComputeKeys</code> can be marked transient and must be removed from the resultant <code>ComputerResult.memory()</code>.</p>
</li>
<li>
<p><code>MemoryComputeKeys</code> can be specified to not broadcast and thus, must not be available to workers to read in <code>VertexProgram.execute()</code>.</p>
</li>
<li>
<p>The <code>Memory</code> API has been changed. No more <code>incr()</code>, <code>and()</code>, etc. Now its just <code>set()</code> (setup/terminate) and <code>add()</code> (execute).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>VertexProgram</code> updates:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VertexComputeKeys</code> can be marked transient and must be removed from the resultant <code>ComputerResult.graph()</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1166">TINKERPOP-1166</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1164">TINKERPOP-1164</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-951">TINKERPOP-951</a></p>
</div>
<div class="paragraph">
<p>Operational semantic test cases have been added to <code>GraphComputerTest</code> to ensure that all the above are implemented correctly.</p>
</div>
</div>
<div class="sect4">
<h5 id="_barrier_step_updates">Barrier Step Updates</h5>
<div class="paragraph">
<p>The <code>Barrier</code> interface use to simply be a marker interface. Now it has methods and it is the primary means by which
distributed steps across an OLAP job are aggregated and distributed. It is unlikely that <code>Barrier</code> was ever used
directly by a provider&#8217;s custom step. Instead, a provider most likely extended <code>SupplyingBarrierStep</code>, <code>CollectingBarrierStep</code>,
and/or <code>ReducingBarrierStep</code>.</p>
</div>
<div class="paragraph">
<p>Providers that have custom extensions to these steps or that use <code>Barrier</code> directly will need to adjust their implementation slightly to
accommodate a new API that reflects the <code>Memory</code> updates above. This should be a simple change. Note that <code>FinalGet</code>
no longer exists and such post-reduction processing is handled by the reducing step (via the new <code>Generating</code> interface).</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1164">TINKERPOP-1164</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_performance_tests_2">Performance Tests</h5>
<div class="paragraph">
<p>The <code>ProcessPerformanceSuite</code> and <code>TraversalPerformanceTest</code> have been deprecated.  They are still available, but going forward,
providers should implement their own performance tests and not rely on the built-in JUnit benchmark-based performance test suite.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_graph_processor_providers">Graph Processor Providers</h4>
<div class="sect4">
<h5 id="_graphfilter_and_graphcomputer">GraphFilter and GraphComputer</h5>
<div class="paragraph">
<p>The <code>GraphComputer</code> API has changed with the addition of <code>GraphComputer.vertices(Traversal)</code> and <code>GraphComputer.edges(Traversal)</code>.
These methods construct a <code>GraphFilter</code> object which is also new to TinkerPop 3.2.0. <code>GraphFilter</code> is a "push-down predicate"
used to selectively retrieve subgraphs of the underlying graph to be OLAP processed.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the graph system provider relies on an existing <code>GraphComputer</code> implementations such as <code>SparkGraphComputer</code> and/or <code>GiraphGraphComputer</code>,
then there is no immediate action required on their part to remain TinkerPop-compliant. However, they may wish to update
their <code>InputFormat</code> or <code>InputRDD</code> implementation to be <code>GraphFilterAware</code> and handle the <code>GraphFilter</code> filtering at the disk/database
level. It is advisable to do so in order to reduce OLAP load times and memory/GC usage.</p>
</li>
<li>
<p>If the graph system provider has their own <code>GraphComputer</code> implementation, then they should implement the two new methods
and ensure that <code>GraphFilter</code> is processed correctly. There is a new test case called <code>GraphComputerTest.shouldSupportGraphFilter()</code>
which ensures the semantics of <code>GraphFilter</code> are handled correctly. For a "quick and easy" way to move forward, look to
<code>GraphFilterInputFormat</code> as a way of wrapping an existing <code>InputFormat</code> to do filtering prior to <code>VertexProgram</code> or <code>MapReduce</code>
execution.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
To quickly move forward, the <code>GraphComputer</code> implementation can simply set <code>GraphComputer.Features.supportsGraphFilter()</code>
to <code>false</code> and ensure that <code>GraphComputer.vertices()</code> and <code>GraphComputer.edges()</code> throws <code>GraphComputer.Exceptions.graphFilterNotSupported()</code>.
This is not recommended as its best to support <code>GraphFilter</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-962">TINKERPOP-962</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_job_chaining_and_graphcomputer">Job Chaining and GraphComputer</h5>
<div class="paragraph">
<p>TinkerPop 3.2.0 has integrated <code>VertexPrograms</code> into <code>GraphTraversal</code>. This means, that a single traversal can compile to multiple
<code>GraphComputer</code> OLAP jobs. This requires that <code>ComputeResults</code> be chainable. There was never any explicit tests to verify if a
provider&#8217;s <code>GraphComputer</code> could be chained, but now there are. Given a reasonable implementation, it is likely that no changes
are required of the provider. However, to ensure the implementation is "reasonable" <code>GraphComputerTests</code> have been added.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For providers that support their own <code>GraphComputer</code> implementation, note that there is a new <code>GraphComputerTest.shouldSupportJobChaining()</code>.
This tests verifies that the <code>ComputerResult</code> output of one job can be fed into the input of a subsequent job. Only linear chains are tested/required
currently. In the future, branching DAGs may be required.</p>
</li>
<li>
<p>For providers that support their own <code>GraphComputer</code> implementation, note that there is a new <code>GraphComputerTest.shouldSupportPreExistingComputeKeys()</code>.
When chaining OLAP jobs together, if an OLAP job requires the compute keys of a previous OLAP job, then the existing compute keys must be accessible.
A simple 2 line change to <code>SparkGraphComputer</code> and <code>TinkerGraphComputer</code> solved this for TinkerPop. <code>GiraphGraphComputer</code> did not need an update as
this feature was already naturally supported.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-570">TINKERPOP-570</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_graph_language_providers_2">Graph Language Providers</h4>
<div class="sect4">
<h5 id="_scripttraversal">ScriptTraversal</h5>
<div class="paragraph">
<p>Providers that have custom Gremlin language implementations (e.g. Gremlin-Scala), there is a new class called <code>ScriptTraversal</code>
which will handle script-based processing of traversals. The entire <code>GroovyXXXTest</code>-suite was updated to use this new class.
The previous <code>TraversalScriptHelper</code> class has been deprecated so immediate upgrading is not required, but do look into
<code>ScriptTraversal</code> as TinkerPop will be using it as a way to serialize "String-based traversals" over the network moving forward.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1154">TINKERPOP-1154</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_bymodulating_and_custom_steps">ByModulating and Custom Steps</h5>
<div class="paragraph">
<p>If the provider has custom steps that leverage <code>by()</code>-modulation, those will now need to implement <code>ByModulating</code>.
Most of the methods in <code>ByModulating</code> are <code>default</code> and, for most situations, only <code>ByModulating.modulateBy(Traversal)</code>
needs to be implemented. Note that this method&#8217;s body will most like be identical the custom step&#8217;s already existing
<code>TraversalParent.addLocalChild()</code>. It is recommended that the custom step not use <code>TraversalParent.addLocalChild()</code>
as this method may be deprecated in a future release. Instead, barring any complex usages, simply rename the
<code>CustomStep.addLocalChild(Traversal)</code> to <code>CustomStep.modulateBy(Traversal)</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1153">TINKERPOP-1153</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_traversalengine_deprecation_and_graphprovider">TraversalEngine Deprecation and GraphProvider</h5>
<div class="paragraph">
<p>The <code>TraversalSource</code> infrastructure has been completely rewritten. Fortunately for users, their code is backwards compatible.
Unfortunately for graph system providers, a few tweaks to their implementation are in order.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the graph system supports more than <code>Graph.compute()</code>, then implement <code>GraphProvider.getGraphComputer()</code>.</p>
</li>
<li>
<p>For custom <code>TraversalStrategy</code> implementations, change <code>traverser.getEngine().isGraphComputer()</code> to <code>TraversalHelper.onGraphComputer(Traversal)</code>.</p>
</li>
<li>
<p>For custom <code>Steps</code>, change <code>implements EngineDependent</code> to <code>implements GraphComputing</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-971">TINKERPOP-971</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<h1 id="_tinkerpop_3_1_0" class="sect0">TinkerPop 3.1.0</h1>
<div class="openblock partintro">
<div class="content">
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/apache/tinkerpop/master/docs/static/images/gremlin-gangster.png" alt="gremlin gangster" width="225">
</div>
</div>
<div class="paragraph">
<p><strong>A 187 On The Undercover Gremlinz</strong></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_1_8">TinkerPop 3.1.8</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: August 21, 2017</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.1.8/CHANGELOG.asciidoc#tinkerpop-318-release-date-august-21-2017">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_1_7">TinkerPop 3.1.7</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: June 12, 2017</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.1.7/CHANGELOG.asciidoc#tinkerpop-317-release-date-june-12-2017">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_25">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_graphml_xslt">GraphML XSLT</h4>
<div class="paragraph">
<p>There were some inconsistencies in the GraphML format supported in TinkerPop 2.x. These issues were corrected on the
initial release of TinkerPop 3.0.0, but as a result, attempting to read GraphML from 2.x will end with an error. A
newly added XSLT file in <code>gremlin-core</code>, called <code>tp2-to-tp3-graphml.xslt</code>, transforms 2.x GraphML into 3.x GraphML,
making it possible easily read in legacy GraphML through a 3.x <code>GraphMLReader</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1608">TINKERPOP-1608</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_1_6">TinkerPop 3.1.6</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: February 3, 2017</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.1.6/CHANGELOG.asciidoc#tinkerpop-316-release-date-february-3-2017">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_19">Upgrading for Providers</h3>
<div class="sect3">
<h4 id="_driver_providers_2">Driver Providers</h4>
<div class="sect4">
<h5 id="_session_close_confirmation">Session Close Confirmation</h5>
<div class="paragraph">
<p>When a session is closed, it now returns a confirmation in the form of a single <code>NO CONTENT</code> message. When the message
arrives, it means that the server has already destroyed the session. Prior to this change, the request was somewhat
one-way, in that the client could send the request and the server would silently honor it. The confirmation makes it
a bit easier to ensure from the client perspective that the close did what it was supposed to do, allowing the client
to proceed only when the server was fully complete with its work.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1544">TINKERPOP-1544</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_1_5">TinkerPop 3.1.5</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: October 17, 2016</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.1.5/CHANGELOG.asciidoc#tinkerpop-315-release-date-october-17-2016">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_26">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_java_driver_and_close">Java Driver and close()</h4>
<div class="paragraph">
<p>There were a few problems noted around the <code>close()</code> of <code>Cluster</code> and <code>Client</code> instances, including issues that
presented as system hangs. These issues have been resolved, however, it is worth noting that an unchecked exception
that was thrown under a certain situation has changed as part of the bug fixes. When submitting an in-session request
on a <code>Client</code> that was closed (or closing) an <code>IllegalStateException</code> is thrown. This replaces older functionality
that threw a <code>ConnectionException</code> and relied logic far deeper in the driver to produce that error and had the
potential to open additional resources despite the intention of the user to "close".</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1467">TINKERPOP-1467</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_1_4">TinkerPop 3.1.4</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: September 6, 2016</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.1.4/CHANGELOG.asciidoc#tinkerpop-314-release-date-september-6-2016">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_27">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_gremlin_server_workers">Gremlin Server Workers</h4>
<div class="paragraph">
<p>In release 3.1.3, a <a href="http://tinkerpop.apache.org/docs/3.1.3/upgrade/#_tinkerpop_3_1_3">recommendation</a> was made to
ensure that the <code>threadPoolWorker</code> setting for Gremlin Server was no less than <code>2</code> in cases where Gremlin Server was
being used with sessions that accept parallel requests. In 3.1.4, that is no longer the case and a size of <code>1</code> remains
acceptable even in that specific case.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1350">TINKERPOP-1350</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_1_3">TinkerPop 3.1.3</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: July 18, 2016</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.1.3/CHANGELOG.asciidoc#tinkerpop-313-release-date-july-18-2016">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_28">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_reserved_gremlin_server_keys">Reserved Gremlin Server Keys</h4>
<div class="paragraph">
<p>Gremlin Server has always considered certain binding keys (request parameters) as reserved, but that list has now
expanded to be more inclusive all the static enums that are imported to the script engine. It is possible that those
using Gremlin Server may have to rename their keys if they somehow successfully were using some of the now reserved
terms in previous versions.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1354">TINKERPOP-1354</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_remote_timeout">Remote Timeout</h4>
<div class="paragraph">
<p>Disabling the timeout for a <code>:remote</code> to Gremlin Server was previously accomplished by setting the timeout to <code>max</code> as
in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">:remote config timeout max</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>max</code> would set the timeout to be <code>Integer.MAX_VALUE</code>. While this feature is still supported, it has been
deprecated in favor of the new configuration option of <code>none</code>, as in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">:remote config timeout none</code></pre>
</div>
</div>
<div class="paragraph">
<p>The use of <code>none</code> completely disables the timeout rather than just setting an arbitrarily high one. Note that it is
still possible to get a timeout on a request if the server timeout limits are reached. The console timeout value only
refers to how long the console will wait for a response from the server before giving up. By default, the timeout is
set to <code>none</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1267">TINKERPOP-1267</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin_server_workers_2">Gremlin Server Workers</h4>
<div class="paragraph">
<p>Past configuration recommendations for the <code>threadPoolWorker</code> setting on Gremlin Server stated this value could be
safely set to <code>1</code> at the low end. A size of <code>1</code> is still valid for most cases, however, if Gremlin Server is being used
with sessions that accept parallel requests, then this value should be no less than <code>2</code> or else certain scripts (i.e.
those that block for an extended period of time) may cause Gremlin Server to lock up the session.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1350">TINKERPOP-1350</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_20">Upgrading for Providers</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
It is recommended that providers also review all the upgrade instructions specified for users. Many of the
changes there may prove important for the provider&#8217;s implementation.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_graph_database_providers_11">Graph Database Providers</h4>
<div class="sect4">
<h5 id="_property_keys_and_hyphens">Property Keys and Hyphens</h5>
<div class="paragraph">
<p>Graph providers should no longer rely on the test suite to validate that hyphens work for labels and property keys.</p>
</div>
</div>
<div class="sect4">
<h5 id="_vertex_and_edge_counts">Vertex and Edge Counts</h5>
<div class="paragraph">
<p>A large number of asserts for vertex and edge counts in the test suite were not being applied. This problem has been
rectified, but could manifest as test errors for different implementations. The chances of the new assertions
identifying previously unrecognized bugs seems slim however, as there are many other tests that validate these counts
in other ways. If those were passing previously, then these new asserts should likely not pose a problem.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1300">TINKERPOP-1300</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_test_feature_annotations">Test Feature Annotations</h5>
<div class="paragraph">
<p>A large number of <code>gremlin-test</code> feature annotations were incorrect which caused test cases to run against graphs that
did not support those features. The annotations have been fixed, but this opened the possibility that more test cases
will run against the graph implementation. Providers should ensure that their graph <code>features()</code> are consistent with
the capabilities of the graph implementation.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1319">TINKERPOP-1319</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_graph_language_providers_3">Graph Language Providers</h4>
<div class="sect4">
<h5 id="_andtest_renaming">AndTest Renaming</h5>
<div class="paragraph">
<p>The <code>get_g_V_andXhasXage_gt_27X<em>outE_count_gt_2X_name</code> test in <code>AndTest</code> was improperly named and did not match the
nature of the traversal it was providing. It has been renamed to: <code>get_g_V_andXhasXage_gt_27X</em>outE_count_gte_2X_name</code>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_driver_providers_3">Driver Providers</h4>
<div class="sect4">
<h5 id="_sasl_mechanism">SASL Mechanism</h5>
<div class="paragraph">
<p>Note that the Gremlin Driver for Java now passes a new parameter for SASL authentication called <code>saslMechanism</code>. This
is an optional argument and does not represent a breaking change, but it does make the overall implementation more
complete. While the default authentication implementations packaged with Gremlin Server don&#8217;t utilize this argument
other implementations might, so the drivers should be able to pass it as per the SASL specification.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/">TINKERPOP-1263</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_1_2">TinkerPop 3.1.2</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: April 8, 2016</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.1.2-incubating/CHANGELOG.asciidoc#tinkerpop-312-release-date-april-8-2016">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_29">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_aliasing_sessions">Aliasing Sessions</h4>
<div class="paragraph">
<p>Calls to <code>SessionedClient.alias()</code> used to throw <code>UnsupportedOperationException</code> and it was therefore not possible to
use that capability with a session. That method is now properly implemented and aliasing is allowed.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1096">TINKERPOP-1096</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_remote_console">Remote Console</h4>
<div class="paragraph">
<p>The <code>:remote console</code> command provides a way to avoid having to prefix the <code>:&gt;</code> command to scripts when remoting. This
mode of console usage can be convenient when working exclusively with a remote like Gremlin Server and there is only a
desire to view the returned data and not to actually work with it locally in any way.</p>
</div>
<div class="paragraph">
<p>See: <a href="http://tinkerpop.apache.org/docs/3.1.2-incubating/reference/#console-remote-console">Reference Documentation - Remote Console</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_console_remote_sessions">Console Remote Sessions</h4>
<div class="paragraph">
<p>The <code>:remote tinkerpop.server</code> command now allows for a "session" argument to be passed to <code>connect</code>. This argument,
tells the remote to configure it with a Gremlin Server session. In this way, the console can act as a window to script
exception on the server and behave more like a standard "local" console when it comes to script execution.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1097">TINKERPOP-1097</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_tinkerpop_archetypes">TinkerPop Archetypes</h4>
<div class="paragraph">
<p>TinkerPop now offers <a href="https://maven.apache.org/guides/introduction/introduction-to-archetypes.html">Maven archetypes</a>,
which provide example project templates to quickly get started with TinkerPop. The available archetypes are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>gremlin-archetype-server</code> - An example project that demonstrates the basic structure of a Gremlin Server project,
how to connect with the Gremlin Driver, and how to embed Gremlin Server in a testing framework.</p>
</li>
<li>
<p><code>gremlin-archetype-tinkergraph</code> - A basic example of how to structure a TinkerPop project with Maven.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1085">TINKERPOP-1085</a>,
<a href="http://tinkerpop.apache.org/docs/3.1.2-incubating/reference/#gremlin-archetypes">Reference Documentation - Archetypes</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_session_transaction_management">Session Transaction Management</h4>
<div class="paragraph">
<p>When connecting to a session with <code>gremlin-driver</code>, it is now possible to configure the <code>Client</code> instance so as to
request that the server manage the transaction for each requests.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Cluster cluster = Cluster.open();
Client client = cluster.connect(<span class="string"><span class="delimiter">&quot;</span><span class="content">sessionName</span><span class="delimiter">&quot;</span></span>, <span class="predefined-constant">true</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Specifying <code>true</code> to the <code>connect()</code> method signifies that the <code>client</code> should make each request as one encapsulated
in a transaction. With this configuration of <code>client</code> there is no need to close a transaction manually.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1039">TINKERPOP-1039</a>,
<a href="http://tinkerpop.apache.org/docs/3.1.2-incubating/reference/#sessions">Reference Documentation - Considering Sessions</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_session_timeout_setting">Session Timeout Setting</h4>
<div class="paragraph">
<p>The <code>gremlin-driver</code> now has a setting called <code>maxWaitForSessionClose</code> that allows control of how long it will wait for
an in-session connection to respond to a close request before it simply times-out and moves on.  When that happens,
the server will either eventually close the connection via at session expiration or at the time of shutdown.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1160">TINKERPOP-1160</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_21">Upgrading for Providers</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
It is recommended that providers also review all the upgrade instructions specified for users. Many of the
changes there may prove important for the provider&#8217;s implementation.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_all_providers">All Providers</h4>
<div class="sect4">
<h5 id="_provider_documentation">Provider Documentation</h5>
<div class="paragraph">
<p>Documentation related to the lower-level APIs used by a provider, that was formerly in the reference documentation,
has been moved to its own documentation set that is now referred to as the
<a href="http://tinkerpop.apache.org/docs/3.4.3/dev/provider/">Provider Documentation</a>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-937">TINKERPOP-937</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_graph_system_providers_8">Graph System Providers</h4>
<div class="sect4">
<h5 id="_graphprovider_clear_semantics">GraphProvider.clear() Semantics</h5>
<div class="paragraph">
<p>The semantics of the various <code>clear()</code> methods on <code>GraphProvider</code> didn&#8217;t really change, but it would be worth reviewing
their implementations to ensure that implementations can be called successfully in an idempotent fashion. Multiple
calls to <code>clear()</code> may occur for a single test on the same <code>Graph</code> instance, as <code>3.1.1-incubating</code> introduced an
automated method for clearing graphs at the end of a test and some tests call <code>clear()</code> manually.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1146">TINKERPOP-1146</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_driver_providers_4">Driver Providers</h4>
<div class="sect4">
<h5 id="_session_transaction_management_2">Session Transaction Management</h5>
<div class="paragraph">
<p>Up until now transaction management has been a feature of sessionless requests only, but the new <code>manageTransaction</code>
request argument for the <a href="http://tinkerpop.apache.org/docs/3.1.2-incubating/reference/#_session_opprocessor">Session OpProcessor</a>
changes that.  Session-based requests can now pass this boolean value on each request to signal to
Gremlin Server that it should attempt to commit (or rollback) the transaction at the end of the request. By default,
this value as <code>false</code>, so there is no change to the protocol for this feature.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1039">TINKERPOP-1039</a>,
<a href="http://tinkerpop.apache.org/docs/3.1.2-incubating/reference/#sessions">Reference Documentation - Considering Sessions</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_scriptevaltimeout_override">scriptEvalTimeout Override</h5>
<div class="paragraph">
<p>The Gremlin Server protocol now allows the passing of <code>scriptEvaluationTimeout</code> as an argument to the <code>SessionOpProcessor</code>
and the <code>StandardOpProcessor</code>. This value will override the setting of the same name provided in the Gremlin Server
configuration file on a per request basis.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_plugin_providers">Plugin Providers</h4>
<div class="sect4">
<h5 id="_remoteacceptor_allowremoteconsole">RemoteAcceptor allowRemoteConsole</h5>
<div class="paragraph">
<p>The <code>RemoteAcceptor</code> now has a new method called <code>allowRemoteConsole()</code>.  It has a default implementation that
returns <code>false</code> and should thus be a non-breaking change for current implementations.  This value should only be set
to <code>true</code> if the implementation expects the user to always use <code>:&gt;</code> to interact with it.  For example, the
<code>tinkerpop.server</code> plugin expects all user interaction through <code>:&gt;</code>, where the line is sent to Gremlin Server.  In
that case, that <code>RemoteAcceptor</code> implementation can return <code>true</code>.  On the other hand, the <code>tinkerpop.gephi</code> plugin,
expects that the user sometimes call <code>:&gt;</code> and sometimes work with local evaluation as well. It interacts with the
local variable bindings in the console itself. For <code>tinkerpop.gephi</code>, this method returns <code>false</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="http://tinkerpop.apache.org/docs/3.1.2-incubating/reference/#console-remote-console">Reference Documentation - Remote Console</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_1_1">TinkerPop 3.1.1</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: February 8, 2016</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.1.1-incubating/CHANGELOG.asciidoc#tinkerpop-311-release-date-february-8-2016">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_30">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_storage_i_o">Storage I/O</h4>
<div class="paragraph">
<p>The <code>gremlin-core</code> io-package now has a <code>Storage</code> interface. The methods that were available via <code>hdfs</code>
(e.g. <code>rm()</code>, <code>ls()</code>, <code>head()</code>, etc.) are now part of <code>Storage</code>. Both HDFS and Spark implement <code>Storage</code> via
<code>FileSystemStorage</code> and <code>SparkContextStorage</code>, respectively.  <code>SparkContextStorage</code> adds support for interacting with
persisted RDDs in the Spark cache.</p>
</div>
<div class="paragraph">
<p>This update changed a few of the file handling methods. As it stands, these changes only effect manual Gremlin Console
usage as HDFS support was previously provided via Groovy meta-programing. Thus, these are not "code-based" breaking changes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>hdfs.rmr()</code> no longer exists. <code>hdfs.rm()</code> is now recursive. Simply change all references to <code>rmr()</code> to <code>rm()</code> for identical behavior.</p>
</li>
<li>
<p><code>hdfs.head(location,lines,writableClass)</code> no longer exists.</p>
<div class="ulist">
<ul>
<li>
<p>For graph locations, use <code>hdfs.head(location,writableClass,lines)</code>.</p>
</li>
<li>
<p>For memory locations, use <code>hdfs.head(location,memoryKey,writableClass,lines)</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>hdfs.head(&#8230;&#8203;,ObjectWritable)</code> no longer exists. Use <code>SequenceFileInputFormat</code> as an input format is the parsing class.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Given that HDFS (and now Spark) interactions are possible via <code>Storage</code> and no longer via Groovy meta-programming,
developers can use these <code>Storage</code> implementations in their Java code. In fact, <code>Storage</code> has greatly simplified
complex file/RDD operations in both <code>GiraphGraphComputer</code> and <code>SparkGraphComputer</code>.</p>
</div>
<div class="paragraph">
<p>Finally, note that the following low-level/internal classes have been removed: <code>HadoopLoader</code> and <code>HDFSTools</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1033">TINKERPOP-1033</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1023">TINKERPOP-1023</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin_server_transaction_management">Gremlin Server Transaction Management</h4>
<div class="paragraph">
<p>Gremlin Server now has a setting called <code>strictTransactionManagement</code>, which forces the user to pass
<code>aliases</code> for all requests. The aliases are then used to determine which graphs will have their transactions closed
for that request. The alternative is to continue with default operations where the transactions of all configured
graphs will be closed. It is likely that <code>strictTransactionManagement</code> (which is <code>false</code> by default so as to be
backward compatible with previous versions) will become the future standard mode of operation for Gremlin Server as
it provides a more efficient method for transaction management.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-930">TINKERPOP-930</a>,
<a href="http://tinkerpop.apache.org/docs/3.1.1-incubating/reference/#considering-transactions">Reference Documentation - Considering Transactions</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_deprecated_credentialsdblocation">Deprecated credentialsDbLocation</h4>
<div class="paragraph">
<p>The <code>credentialsDbLocation</code> setting was a TinkerGraph only configuration option to the <code>SimpleAuthenticator</code> for
Gremlin Server.  It provided the file system location to a "credentials graph" that TinkerGraph would read from a
Gryo file at that spot.  This setting was only required because TinkerGraph did not support file persistence at the
time that <code>SimpleAuthenticator</code> was created.</p>
</div>
<div class="paragraph">
<p>As of 3.1.0-incubating, TinkerGraph received a limited persistence feature that allowed the "credentials graph"
location to be specified in the TinkerGraph properties file via <code>gremlin.tinkergraph.graphLocation</code> and as such the
need for <code>credentialsDbLocation</code> was eliminated.</p>
</div>
<div class="paragraph">
<p>This deprecation is not a breaking change, however users should be encouraged to convert their configurations to use
the <code>gremlin.tinkergraph.graphLocation</code> as soon as possible, as the deprecated setting will be removed in a future
release.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-981">TINKERPOP-981</a>,
<a href="http://tinkerpop.apache.org/docs/3.1.1-incubating/reference/#_security">Reference Documentation - Gremlin Server Security</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_tinkergraph_supports_any_i_o">TinkerGraph Supports Any I/O</h4>
<div class="paragraph">
<p>TinkerGraph&#8217;s 'gremlin.tinkergraph.graphLocation' configuration setting can now take a fully qualified class name
of a <code>Io.Builder</code> implementation, which means that custom IO implementations can be used to read and write
TinkerGraph instances.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-886">TINKERPOP-886</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_authenticator_method_deprecation">Authenticator Method Deprecation</h4>
<div class="paragraph">
<p>For users who have a custom <code>Authenticator</code> implementation for Gremlin Server, there will be a new method present:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="keyword">default</span> SaslNegotiator newSaslNegotiator(<span class="directive">final</span> <span class="predefined-type">InetAddress</span> remoteAddress)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Implementation of this method is now preferred over the old method with the same name that has no arguments. The old
method has been deprecated.  This is a non-breaking change as the new method has a default implementation that simply
calls the old deprecated method.  In this way, existing <code>Authenticator</code> implementations will still work.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-995">TINKERPOP-995</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_spark_persistence_updates">Spark Persistence Updates</h4>
<div class="paragraph">
<p>Spark RDD persistence is now much safer with a "job server" system that ensures that persisted RDDs are not garbage
collected by Spark. With this, the user is provider a <code>spark</code> object that enables them to manage persisted RDDs
much like the <code>hdfs</code> object is used for managing files in HDFS.</p>
</div>
<div class="paragraph">
<p>Finally, <code>InputRDD</code> instance no longer need a <code>reduceByKey()</code> postfix as view merges happen prior to writing the
<code>graphRDD</code>. Note that a <code>reduceByKey()</code> postfix will not cause problems if continued, it is simply inefficient
and no longer required.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1023">TINKERPOP-1023</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1027">TINKERPOP-1027</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_logging">Logging</h4>
<div class="paragraph">
<p>Logging to Gremlin Server and Gremlin Console can now be consistently controlled by the <code>log4j-server.properties</code>
and <code>log4j-console.properties</code> which are in the respective <code>conf/</code> directories of the packaged distributions.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-859">TINKERPOP-859</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin_server_sandboxing">Gremlin Server Sandboxing</h4>
<div class="paragraph">
<p>A number of improvements were made to the sandboxing feature of Gremlin Server (more specifically the
<code>GremlinGroovyScriptEngine</code>).  A new base class for sandboxing was introduce with the <code>AbstractSandboxExtension</code>,
which makes it a bit easier to build white list style sandboxes. A usable implementation of this was also supplied
with the <code>FileSandboxExtension</code>, which takes a configuration file containing a white list of accessible methods and
variables that can be used in scripts. Note that the original <code>SandboxExtension</code> has been deprecated in favor of
the <code>AbsstractSandboxExtension</code> or extending directly from Groovy&#8217;s <code>TypeCheckingDSL</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-891">TINKERPOP-891</a>,
<a href="http://tinkerpop.apache.org/docs/3.1.0-incubating/#script-execution">Reference Documentation - Script Execution</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_deprecated_supportsaddproperty">Deprecated supportsAddProperty()</h4>
<div class="paragraph">
<p>It was realized that <code>VertexPropertyFeatures.supportsAddProperty()</code> was effectively a duplicate of
<code>VertexFeatures.supportsMetaProperties()</code>.  As a result, <code>supportsAddProperty()</code> was deprecated in favor of the other.
If using <code>supportsAddProperty()</code>, simply modify that code to instead utilize <code>supportsMetaProperties()</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_22">Upgrading for Providers</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
It is recommended that providers also review all the upgrade instructions specified for users. Many of the
changes there may prove important for the provider&#8217;s implementation.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_graph_system_providers_9">Graph System Providers</h4>
<div class="sect4">
<h5 id="_data_types_in_tests">Data Types in Tests</h5>
<div class="paragraph">
<p>There were a number of fixes related to usage of appropriate types in the test suite. There were cases where tests
were mixing types, such that a single property key might have two different values.  This mixed typing caused problems
for some graphs and wasn&#8217;t really something TinkerPop was looking to explicitly enforce as a rule of implementing the
interfaces.</p>
</div>
<div class="paragraph">
<p>While the changes should not have been breaking, providers should be aware that improved consistencies in the tests
may present opportunities for test failures.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-984">TINKERPOP-984</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-990">TINKERPOP-990</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-1000">TINKERPOP-1000</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_graph_database_providers_12">Graph Database Providers</h4>
<div class="sect4">
<h5 id="_custom_classresolver">Custom ClassResolver</h5>
<div class="paragraph">
<p>For providers who have built custom serializers in Gryo, there is a new feature open that can be considered.  A
<code>GryoMapper</code> can now take a custom Kryo <code>ClassResolver</code>, which means that custom types can be coerced to other types
during serialization (e.g. a custom identifier could be serialized as a <code>HashMap</code>).  The advantage to taking this
approach is that users will not need to have the provider&#8217;s serializers on the client side.  They will only need to
exist on the server (presuming that the a type is coerced to a type available on the client, of course).  The downside
is that serialization is then no longer a two way street. For example, a custom <code>ClassResolver</code> that coerced a
custom identifier to <code>HashMap</code> would let the client work with the identifier as a <code>HashMap</code>, but the client would then
have to send that identifier back to the server as a <code>HashMap</code> where it would be recognized as a <code>HashMap</code> (not an
identifier).</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-1064">TINKERPOP-1064</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_feature_consistency">Feature Consistency</h5>
<div class="paragraph">
<p>There were a number of corrections made around the consistency of <code>Features</code> and how they were applied in tests.
Corrections fell into two groups of changes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Bugs in the how <code>Features</code> were applied to certain tests.</p>
</li>
<li>
<p>Refactoring around the realization that <code>VertexFeatures.supportsMetaProperties()</code> is really just a duplicate of
features already exposed as <code>VertexPropertyFeatures.supportsAddProperty()</code>.
<code>VertexPropertyFeatures.supportsAddProperty()</code> has been deprecated.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>These changes related to "Feature Consistency" open up a number of previously non-executing tests for graphs that did
not support meta-properties, so providers should be wary of potential test failure on previously non-executing tests.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-985">TINKERPOP-985</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-997">TINKERPOP-997</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-998">TINKERPOP-998</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_graph_processor_providers_2">Graph Processor Providers</h4>
<div class="sect4">
<h5 id="_inputrdd_and_outputrdd_updates">InputRDD and OutputRDD Updates</h5>
<div class="paragraph">
<p>There are two new methods on the Spark-Gremlin RDD interfaces.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>InputRDD.readMemoryRDD()</code>: get a <code>ComputerResult.memory()</code> from an RDD.</p>
</li>
<li>
<p><code>OutputRDD.writeMemoryRDD()</code>: write a <code>ComputerResult.memory()</code> to an RDD.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that both these methods have default implementations which simply work with empty RDDs. Most providers will never
need to implement these methods as they are specific to file/RDD management for <code>GraphComputer</code>. The four classes that
implement these methods are <code>PersistedOutputRDD</code>, <code>PersistedInputRDD</code>, <code>InputFormatRDD</code>, and <code>OutputFormatRDD</code>. For the
interested provider, study the implementations therein to see the purpose of these two new methods.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_1_0_2">TinkerPop 3.1.0</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: November 16, 2015</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.1.0-incubating/CHANGELOG.asciidoc#tinkerpop-310-release-date-november-16-2015">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="paragraph">
<p>Additional upgrade information can be found here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#_tinkerpop_3_0_2">TinkerPop 3.0.2</a></p>
</li>
<li>
<p><a href="#_tinkerpop_3_0_1">TinkerPop 3.0.1</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_31">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_shading_jackson">Shading Jackson</h4>
<div class="paragraph">
<p>The Jackson library is now shaded to <code>gremlin-shaded</code>, which will allow Jackson to version independently without
breaking compatibility with dependent libraries or with those who depend on TinkerPop.  The downside is that if a
library depends on TinkerPop and uses the Jackson classes, those classes will no longer exist with the standard
Jackson package naming.  They will have to shifted as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.objenesis</code> becomes <code>org.apache.tinkerpop.shaded.objenesis</code></p>
</li>
<li>
<p><code>com.esotericsoftware.minlog</code> becomes <code>org.apache.tinkerpop.shaded.minlog</code></p>
</li>
<li>
<p><code>com.fasterxml.jackson</code> becomes <code>org.apache.tinkerpop.shaded.jackson</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-835">TINKERPOP-835</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_partitionstrategy_and_vertexproperty">PartitionStrategy and VertexProperty</h4>
<div class="paragraph">
<p><code>PartitionStrategy</code> now supports partitioning within <code>VertexProperty</code>.  The <code>Graph</code> needs to be able to support
meta-properties for this feature to work.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-333">TINKERPOP-333</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin_server_and_epoll">Gremlin Server and Epoll</h4>
<div class="paragraph">
<p>Gremlin Server provides a configuration option to turn on support for Netty
<a href="http://netty.io/wiki/native-transports.html">native transport</a> on Linux, which has been shown to help improve
performance.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-901">TINKERPOP-901</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_rebindings_deprecated">Rebindings Deprecated</h4>
<div class="paragraph">
<p>The notion of "rebindings" has been deprecated in favor of the term "aliases".  Alias is a better and more intuitive
term than rebindings which should make it easier for newcomers to understand what they are for.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-913">TINKERPOP-913</a>,
<a href="http://tinkerpop.apache.org/docs/3.1.0-incubating/#_aliases">Reference Documentation - Aliases</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_configurable_driver_channelizer">Configurable Driver Channelizer</h4>
<div class="paragraph">
<p>The Gremlin Driver now allows the <code>Channerlizer</code> to be supplied as a configuration, which means that custom
implementations may be supplied.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-680">TINKERPOP-680</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_graphson_and_strict_option">GraphSON and Strict Option</h4>
<div class="paragraph">
<p>The <code>GraphMLReader</code> now has a <code>strict</code> option on the <code>Builder</code> so that if a data type for a value is invalid in some
way, GraphMLReader will simply skip that problem value. In that way, it is a bit more forgiving than before especially
with empty data.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-756">TINKERPOP-756</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_transaction_close_default_behavior">Transaction.close() Default Behavior</h4>
<div class="paragraph">
<p>The default behavior of <code>Transaction.close()</code> is to rollback the transaction.  This is in contrast to previous versions
where the default behavior was commit.  Using rollback as the default should be thought of as a like a safer approach
to closing where a user must now explicitly call <code>commit()</code> to persist their mutations.</p>
</div>
<div class="paragraph">
<p>See <a href="https://issues.apache.org/jira/browse/TINKERPOP-805">TINKERPOP-805</a> for more information.</p>
</div>
</div>
<div class="sect3">
<h4 id="_threadlocal_transaction_settings">ThreadLocal Transaction Settings</h4>
<div class="paragraph">
<p>The <code>Transaction.onReadWrite()</code> and <code>Transaction.onClose()</code> settings now need to be set for each thread (if another
behavior than the default is desired). For gremlin-server users that may be changing these settings via scripts.
If the settings are changed for a sessionless request they will now only apply to that one request. If the settings are
changed for an in-session request they will now only apply to all future requests made in the scope of that session.</p>
</div>
<div class="paragraph">
<p>See <a href="https://issues.apache.org/jira/browse/TINKERPOP-885">TINKERPOP-885</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_hadoop_gremlin">Hadoop-Gremlin</h4>
<div class="ulist">
<ul>
<li>
<p>Hadoop1 is no longer supported. Hadoop2 is now the only supported Hadoop version in TinkerPop.</p>
</li>
<li>
<p>Spark and Giraph have been split out of Hadoop-Gremlin into their own respective packages (Spark-Gremlin and Giraph-Gremlin).</p>
</li>
<li>
<p>The directory where application jars are stored in HDFS is now <code>hadoop-gremlin-3.4.3-libs</code>.</p>
<div class="ulist">
<ul>
<li>
<p>This versioning is important so that cross-version TinkerPop use does not cause jar conflicts.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>See link:https://issues.apache.org/jira/browse/TINKERPOP-616</p>
</div>
</div>
<div class="sect3">
<h4 id="_spark_gremlin">Spark-Gremlin</h4>
<div class="ulist">
<ul>
<li>
<p>Providers that wish to reuse a graphRDD can leverage the new <code>PersistedInputRDD</code> and <code>PersistedOutputRDD</code>.</p>
<div class="ulist">
<ul>
<li>
<p>This allows the graphRDD to avoid serialization into HDFS for reuse. Be sure to enabled persisted <code>SparkContext</code> (see documentation).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>See link:https://issues.apache.org/jira/browse/TINKERPOP-868,
link:https://issues.apache.org/jira/browse/TINKERPOP-925</p>
</div>
</div>
<div class="sect3">
<h4 id="_tinkergraph_serialization">TinkerGraph Serialization</h4>
<div class="paragraph">
<p>TinkerGraph is serializable over Gryo, which means that it can shipped over the wire from Gremlin Server.  This
feature can be useful when working with remote subgraphs.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-728">TINKERPOP-728</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_deprecation_in_tinkergraph">Deprecation in TinkerGraph</h4>
<div class="paragraph">
<p>The <code>public static String</code> configurations have been renamed. The old <code>public static</code> variables have been deprecated.
If the deprecated variables were being used, then convert to the replacements as soon as possible.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-926">TINKERPOP-926</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_deprecation_in_gremlin_groovy">Deprecation in Gremlin-Groovy</h4>
<div class="paragraph">
<p>The closure wrappers classes <code>GFunction</code>, <code>GSupplier</code>, <code>GConsumer</code> have been deprecated. In Groovy, a closure can be
specified using <code>as Function</code> and thus, these wrappers are not needed. Also, the <code>GremlinExecutor.promoteBindings()</code>
method which was previously deprecated has been removed.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-879">TINKERPOP-879</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-897">TINKERPOP-897</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_gephi_traversal_visualization">Gephi Traversal Visualization</h4>
<div class="paragraph">
<p>The process for visualizing a traversal has been simplified.  There is no longer a need to "name" steps that will
represent visualization points for Gephi.  It is possible to just "configure" a <code>visualTraversal</code> in the console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">gremlin&gt; :remote config visualTraversal graph vg</code></pre>
</div>
</div>
<div class="paragraph">
<p>which creates a special <code>TraversalSource</code> from <code>graph</code> called <code>vg</code>.  The traversals created from <code>vg</code> can be used
to <code>:submit</code> to Gephi.</p>
</div>
<div class="paragraph">
<p>See: <a href="http://tinkerpop.apache.org/docs/3.1.0-SNAPSHOT/#gephi-plugin">Reference Documentation - Gephi</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_alterations_to_graphtraversal">Alterations to GraphTraversal</h4>
<div class="paragraph">
<p>There were a number of changes to <code>GraphTraversal</code>.  Many of the changes came by way of deprecation, but some semantics
have changed as well:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ConjunctionStrategy</code> has been renamed to <code>ConnectiveStrategy</code> (no other behaviors changed).</p>
</li>
<li>
<p><code>ConjunctionP</code> has been renamed to <code>ConnectiveP</code> (no other behaviors changed).</p>
</li>
<li>
<p><code>DedupBijectionStrategy</code> has been renamed (and made more effective) as <code>FilterRankingStrategy</code>.</p>
</li>
<li>
<p>The <code>GraphTraversal</code> mutation API has change significantly with all previous methods being supported but deprecated.</p>
<div class="ulist">
<ul>
<li>
<p>The general pattern used now is <code>addE('knows').from(select('a')).to(select('b')).property('weight',1.0)</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The <code>GraphTraversal</code> sack API has changed with all previous methods being supported but deprecated.</p>
<div class="ulist">
<ul>
<li>
<p>The old <code>sack(mult,'weight')</code> is now <code>sack(mult).by('weight')</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>GroupStep</code> has been redesigned such that there is now only a key- and value-traversal. No more reduce-traversal.</p>
<div class="ulist">
<ul>
<li>
<p>The previous <code>group()</code>-methods have been renamed to <code>groupV3d0()</code>. To immediately upgrade, rename all your <code>group()</code>-calls to <code>groupV3d0()</code>.</p>
</li>
<li>
<p>To migrate to the new <code>group()</code>-methods, what was <code>group().by('age').by(outE()).by(sum(local))</code> is now <code>group().by('age').by(outE().sum())</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>There was a bug in <code>fold()</code>, where if a bulked traverser was provided, the traverser was only represented once.</p>
<div class="ulist">
<ul>
<li>
<p>This bug fix might cause a breaking change to a user query if the non-bulk behavior was being counted on. If so, used <code>dedup()</code> prior to <code>fold()</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Both <code>GraphTraversal().mapKeys()</code> and <code>GraphTraversal.mapValues()</code> has been deprecated.</p>
<div class="ulist">
<ul>
<li>
<p>Use <code>select(keys)</code> and <code>select(columns)</code>. However, note that <code>select()</code> will not unroll the keys/values. Thus, <code>mapKeys()</code> &#8658; <code>select(keys).unfold()</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The data type of <code>Operator</code> enums will now always be the highest common data type of the two given numbers, rather than the data type of the first number, as it&#8217;s been before.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_aliasing_remotes_in_the_console">Aliasing Remotes in the Console</h4>
<div class="paragraph">
<p>The <code>:remote</code> command in Gremlin Console has a new <code>alias</code> configuration option.  This <code>alias</code> option allows
specification of a set of key/value alias/binding pairs to apply to the remote.  In this way, it becomes possible
to refer to a variable on the server as something other than what it is referred to for purpose of the submitted
script.  For example once a <code>:remote</code> is created, this command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">:remote alias x g</code></pre>
</div>
</div>
<div class="paragraph">
<p>would allow "g" on the server to be referred to as "x".</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">:&gt; x.E().label().groupCount()</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-914">TINKERPOP-914</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_23">Upgrading for Providers</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
It is recommended that providers also review all the upgrade instructions specified for users. Many of the
changes there may prove important for the provider&#8217;s implementation.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>All providers should be aware that Jackson is now shaded to <code>gremlin-shaded</code> and could represent breaking change if
there was usage of the dependency by way of TinkerPop, a direct dependency to Jackson may be required on the
provider&#8217;s side.</p>
</div>
<div class="sect3">
<h4 id="_graph_system_providers_10">Graph System Providers</h4>
<div class="sect4">
<h5 id="_graphstep_alterations">GraphStep Alterations</h5>
<div class="ulist">
<ul>
<li>
<p><code>GraphStep</code> is no longer in <code>sideEffect</code>-package, but now in <code>map</code>-package as traversals support mid-traversal <code>V()</code>.</p>
</li>
<li>
<p>Traversals now support mid-traversal <code>V()</code>-steps. Graph system providers should ensure that a mid-traversal <code>V()</code> can leverage any suitable index.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See link:https://issues.apache.org/jira/browse/TINKERPOP-762</p>
</div>
</div>
<div class="sect4">
<h5 id="_decomposition_of_abstracttransaction">Decomposition of AbstractTransaction</h5>
<div class="paragraph">
<p>The <code>AbstractTransaction</code> class has been abstracted into two different classes supporting two different modes of
operation: <code>AbstractThreadLocalTransaction</code> and <code>AbstractThreadedTransaction</code>, where the former should be used when
supporting <code>ThreadLocal</code> transactions and the latter for threaded transactions.  Of course, providers may still
choose to build their own implementation on <code>AbstractTransaction</code> itself or simply implement the <code>Transaction</code>
interface.</p>
</div>
<div class="paragraph">
<p>The <code>AbstractTransaction</code> gains the following methods to potentially implement (though default implementations
are supplied in <code>AbstractThreadLocalTransaction</code> and <code>AbstractThreadedTransaction</code>):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>doReadWrite</code> that should execute the read-write consumer.</p>
</li>
<li>
<p><code>doClose</code> that should execute the close consumer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-765">TINKERPOP-765</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-885">TINKERPOP-885</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_transaction_close_default_behavior_2">Transaction.close() Default Behavior</h5>
<div class="paragraph">
<p>The default behavior for <code>Transaction.close()</code> is to rollback the transaction and is enforced by tests, which
previously asserted the opposite (i.e. commit on close).  These tests have been renamed to suite the new semantics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>shouldCommitOnCloseByDefault</code> became <code>shouldCommitOnCloseWhenConfigured</code></p>
</li>
<li>
<p><code>shouldRollbackOnCloseWhenConfigured</code> became <code>shouldRollbackOnCloseByDefault</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If these tests were referenced in an <code>OptOut</code>, then their names should be updated.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-805">TINKERPOP-805</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_graph_traversal_updates">Graph Traversal Updates</h5>
<div class="paragraph">
<p>There were numerous changes to the <code>GraphTraversal</code> API. Nearly all changes are backwards compatible with respective
"deprecated" annotations. Please review the respective updates specified in the "Graph System Users" section.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>GraphStep</code> is no longer in <code>sideEffect</code> package. Now in <code>map</code> package.</p>
</li>
<li>
<p>Make sure mid-traversal <code>GraphStep</code> calls are folding <code>HasContainers</code> in for index-lookups.</p>
</li>
<li>
<p>Think about copying <code>TinkerGraphStepStrategyTest</code> for your implementation so you know folding is happening correctly.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_element_removal">Element Removal</h5>
<div class="paragraph">
<p><code>Element.Exceptions.elementAlreadyRemoved</code> has been deprecated and test enforcement for consistency have been removed.
 Providers are free to deal with deleted elements as they see fit.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-297">TINKERPOP-297</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_vendoroptimizationstrategy_rename">VendorOptimizationStrategy Rename</h5>
<div class="paragraph">
<p>The <code>VendorOptimizationStrategy</code> has been renamed to <code>ProviderOptimizationStrategy</code>.  This renaming is consistent
with revised terminology for what were formerly referred to as "vendors".</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-876">TINKERPOP-876</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_graphcomputer_updates">GraphComputer Updates</h5>
<div class="paragraph">
<p><code>GraphComputer.configure(String key, Object value)</code> is now a method (with default implementation).
This allows the user to specify engine-specific parameters to the underlying OLAP system. These parameters are not intended
to be cross engine supported. Moreover, if there are not parameters that can be altered (beyond the standard <code>GraphComputer</code>
methods), then the provider&#8217;s <code>GraphComputer</code> implementation should simply return and do nothing.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_driver_providers_5">Driver Providers</h4>
<div class="sect4">
<h5 id="_aliases_parameter">Aliases Parameter</h5>
<div class="paragraph">
<p>The "rebindings" argument to the "standard" <code>OpProcessor</code> has been renamed to "aliases". While "rebindings" is still
supported it is recommended that the upgrade to "aliases" be made as soon as possible as support will be removed in
the future.  Gremlin Server will not accept both parameters at the same time - a request must contain either one
parameter or the other if either is supplied.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-913">TINKERPOP-913</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_threadlocal_transaction_settings_2">ThreadLocal Transaction Settings</h5>
<div class="paragraph">
<p>If a driver configures the <code>Transaction.onReadWrite()</code> or <code>Transaction.onClose()</code> settings, note that these settings no
longer apply to all future requests. If the settings are changed for a sessionless request they will only apply to
that one request. If the settings are changed from an in-session request they will only apply to all future requests
made in the scope of that session.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-885">TINKERPOP-885</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<h1 id="_tinkerpop_3_0_0" class="sect0">TinkerPop 3.0.0</h1>
<div class="openblock partintro">
<div class="content">
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/apache/tinkerpop/master/docs/static/images/gremlin-hindu.png" alt="gremlin hindu" width="225">
</div>
</div>
<div class="paragraph">
<p><strong>A Gremlin Rga in 7/16 Time</strong></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_0_2">TinkerPop 3.0.2</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: October 19, 2015</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.0.2-incubating/CHANGELOG.asciidoc#tinkerpop-302-release-date-october-19-2015">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_32">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_bulkloadervertexprogram_blvp">BulkLoaderVertexProgram (BLVP)</h4>
<div class="paragraph">
<p><code>BulkLoaderVertexProgram</code> now supports arbitrary inputs (i addition to <code>HadoopGraph</code>, which was already supported in
version 3.0.1-incubating). It can now also read from any TP3 enabled graph, like <code>TinkerGraph</code>
or <code>Neo4jGraph</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-814">TINKERPOP-319</a>,
<a href="http://tinkerpop.apache.org/docs/3.0.2-incubating/#bulkloadervertexprogram">Reference Documentation - BLVP</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_tinkergraph">TinkerGraph</h4>
<div class="paragraph">
<p>TinkerGraph can now be configured to support persistence, where TinkerGraph will try to load a graph from a specified
location and calls to <code>close()</code> will save the graph data to that location.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-828">TINKERPOP-828</a>,
<a href="http://tinkerpop.apache.org/docs/3.0.2-incubating/#_configuration">Reference Documentation - TinkerGraph</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin_driver_and_server">Gremlin Driver and Server</h4>
<div class="paragraph">
<p>There were a number of fixes to <code>gremlin-driver</code> that prevent protocol desynchronization when talking to Gremlin
Server.</p>
</div>
<div class="paragraph">
<p>On the Gremlin Server side, Websocket sub-protocol introduces a new "close" operation to explicitly close sessions.
Prior to this change, sessions were closed in a more passive fashion (i.e. session timeout).  There were also so
bug fixes around the protocol as it pertained to third-party drivers (e.g. python) using JSON for authentication.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-814">TINKERPOP-814</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-816">TINKERPOP-816</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-817">TINKERPOP-817</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-855">TINKERPOP-855</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-870">TINKERPOP-870</a>,
<a href="https://issues.apache.org/jira/browse/TINKERPOP-877">TINKERPOP-877</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_24">Upgrading for Providers</h3>
<div class="sect3">
<h4 id="_graph_driver_providers_4">Graph Driver Providers</h4>
<div class="sect4">
<h5 id="_gremlin_server_close_operation">Gremlin Server close Operation</h5>
<div class="paragraph">
<p>It is important to note that this feature of the sub-protocol applies to the <code>SessionOpProcessor</code> (i.e. for
session-based requests).  Prior to this change, there was no way to explicitly close a session.  Sessions would get
closed by the server after timeout of activity.  This new "op" gives drivers the ability to close the session
explicitly and as needed.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-849">TINKERPOP-849</a>,
<a href="http://tinkerpop.apache.org/docs/3.0.2-incubating/#_opprocessors_arguments">Reference Documentation - OpProcessor</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tinkerpop_3_0_1">TinkerPop 3.0.1</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Release Date: September 2, 2015</strong></p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://github.com/apache/tinkerpop/blob/3.0.1-incubating/CHANGELOG.asciidoc#tinkerpop-301-release-date-september-2-2015">changelog</a> for a complete list of all the modifications that are part of this release.</p>
</div>
<div class="sect2">
<h3 id="_upgrading_for_users_33">Upgrading for Users</h3>
<div class="sect3">
<h4 id="_gremlin_server">Gremlin Server</h4>
<div class="paragraph">
<p>Gremlin Server now supports a <a href="https://en.wikipedia.org/wiki/Simple_Authentication_and_Security_Layer">SASL-based</a>
(Simple Authentication and Security Layer) authentication model and a default <code>SimpleAuthenticator</code> which implements
the <code>PLAIN</code> SASL mechanism (i.e. plain text) to authenticate requests.  This gives Gremlin Server some basic security
capabilities, especially when combined with its built-in SSL feature.</p>
</div>
<div class="paragraph">
<p>There have also been changes in how global variable bindings in Gremlin Server are established via initialization
scripts.  The initialization scripts now allow for a <code>Map</code> of values that can be returned from those scripts.
That <code>Map</code> will be used to set global bindings for the server. See this
<a href="https://github.com/apache/tinkerpop/blob/3.0.1-incubating/gremlin-server/scripts/generate-modern.groovy">sample script</a>
for an example.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-576">TINKERPOP-576</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_neo4j">Neo4j</h4>
<div class="paragraph">
<p>Problems related to using <code>:install</code> to get the Neo4j plugin operating in Gremlin Console on Windows have been
resolved.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-804">TINKERPOP-804</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_for_providers_25">Upgrading for Providers</h3>
<div class="sect3">
<h4 id="_graph_system_providers_11">Graph System Providers</h4>
<div class="sect4">
<h5 id="_graphfactoryclass_annotation">GraphFactoryClass Annotation</h5>
<div class="paragraph">
<p>Providers can consider the use of the new <code>GraphFactoryClass</code> annotation to specify the factory class that <code>GraphFactory</code> will use to open a new <code>Graph</code> instance. This is an optional feature and will generally help implementations that have an interface extending <code>Graph</code>.  If that is the case, then this annotation can be used in the following fashion:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@GraphFactory</span>(MyGraphFactory.class)
<span class="directive">public</span> <span class="type">interface</span> <span class="class">MyGraph</span> <span class="directive">extends</span> Graph{
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>MyGraphFactory</code> must contain the static <code>open</code> method that is normally expected by <code>GraphFactory</code>.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-778">TINKERPOP-778</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_graphprovider_descriptor_annotation">GraphProvider.Descriptor Annotation</h5>
<div class="paragraph">
<p>There was a change that affected providers who implemented <code>GraphComputer</code> related tests such as the <code>ProcessComputerSuite</code>.  If the provider runs those tests, then edit the <code>GraphProvider</code> implementation for those suites to include the <code>GraphProvider.Descriptor</code> annotation as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@GraphProvider</span>.Descriptor(computer = GiraphGraphComputer.class)
<span class="directive">public</span> <span class="directive">final</span> <span class="type">class</span> <span class="class">HadoopGiraphGraphProvider</span> <span class="directive">extends</span> HadoopGraphProvider {

    <span class="directive">public</span> GraphTraversalSource traversal(<span class="directive">final</span> Graph graph) {
        <span class="keyword">return</span> GraphTraversalSource.build().engine(ComputerTraversalEngine.build().computer(GiraphGraphComputer.class)).create(graph);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-690">TINKERPOP-690</a> for more information.</p>
</div>
</div>
<div class="sect4">
<h5 id="_semantics_of_transaction_close">Semantics of Transaction.close()</h5>
<div class="paragraph">
<p>There were some adjustments to the test suite with respect to how <code>Transaction.close()</code> was being validated.  For most providers, this will generally mean checking <code>OptOut</code> annotations for test renaming problems.  The error that occurs when running the test suite should make it apparent that a test name is incorrect in an <code>OptOut</code> if there are issues there.</p>
</div>
<div class="paragraph">
<p>See: <a href="https://issues.apache.org/jira/browse/TINKERPOP-764">TINKERPOP-764</a> for more information.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_graph_driver_providers_5">Graph Driver Providers</h4>
<div class="sect4">
<h5 id="_authentication">Authentication</h5>
<div class="paragraph">
<p>Gremlin Server now supports SASL-based authentication.  By default, Gremlin Server is not configured with
authentication turned on and authentication is not required, so existing drivers should still work without any
additional change.  Drivers should however consider implementing this feature as it is likely that many users will
want the security capabilities that it provides.</p>
</div>
<div class="paragraph">
<p>See: <a href="http://tinkerpop.apache.org/docs/3.0.1-incubating/#_authentication">Reference Documentation - Gremlin Server Authentication</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<h1 id="appendix" class="sect0">Appendix</h1>
<div class="sect1">
<h2 id="_tinkerpop_2_x">TinkerPop 2.x</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section contains a few notes that reference differences between TinkerPop 2.x and 3.x.</p>
</div>
<div class="paragraph">
<p>One of the major differences between TinkerPop 2.x and TinkerPop 3.x is that in TinkerPop 3.x, the Java convention of
using setters and getters was abandoned in favor of a syntax that is more aligned with the syntax of Gremlin-Groovy in
TinkerPop2. Given that Gremlin-Java8 and Gremlin-Groovy are nearly identical due to the inclusion of Java 8 lambdas, a
big effort was made to ensure that both languages were as similar as possible.</p>
</div>
<div class="paragraph">
<p>In addition, TinkerPop2 and below made a sharp distinction between the various TinkerPop projects: Blueprints, Pipes,
Gremlin, Frames, Furnace, and Rexster. With TinkerPop 3.x, all of these projects have been merged and are generally
known as Gremlin. <strong>Blueprints</strong> &#8594; Gremlin Structure API : <strong>Pipes</strong> &#8594; <code>GraphTraversal</code> : <strong>Frames</strong> &#8594; <code>Traversal</code> :
<strong>Furnace</strong> &#8594; <code>GraphComputer</code> and <code>VertexProgram</code> : <strong>Rexster</strong> &#8594; GremlinServer.</p>
</div>
<div class="sect2">
<h3 id="graphml-format">GraphML Format</h3>
<div class="paragraph">
<p>GraphML was a supported format in TinkerPop 2.x, but there were several issues that made it inconsistent with the
specification that were corrected for 3.x. As a result, attempting to read a GraphML file generated by 2.x with the
3.x <code>GraphMLReader</code> will result in error. To help with this problem, an XSLT file is provided as a resource in
<code>gremlin-core</code> which will transform 2.x GraphML to 3.x GraphML. It can be used as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">javax.xml.parsers.DocumentBuilderFactory</span>;
<span class="keyword">import</span> <span class="include">javax.xml.transform.TransformerFactory</span>;
<span class="keyword">import</span> <span class="include">javax.xml.transform.dom.DOMSource</span>;
<span class="keyword">import</span> <span class="include">javax.xml.transform.stream.StreamSource</span>;
<span class="keyword">import</span> <span class="include">javax.xml.transform.stream.StreamResult</span>;

<span class="predefined-type">InputStream</span> stylesheet = <span class="predefined-type">Thread</span>.currentThread().getContextClassLoader().getResourceAsStream(<span class="string"><span class="delimiter">&quot;</span><span class="content">tp2-to-tp3-graphml.xslt</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">File</span> datafile = <span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">'</span><span class="content">/tmp/tp2-graphml.xml</span><span class="delimiter">'</span></span>);
<span class="predefined-type">File</span> outfile = <span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">'</span><span class="content">/tmp/tp3-graphml.xml</span><span class="delimiter">'</span></span>);

<span class="predefined-type">TransformerFactory</span> tFactory = <span class="predefined-type">TransformerFactory</span>.newInstance();
<span class="predefined-type">StreamSource</span> stylesource = <span class="keyword">new</span> <span class="predefined-type">StreamSource</span>(stylesheet);
<span class="predefined-type">Transformer</span> transformer = tFactory.newTransformer(stylesource);

<span class="predefined-type">StreamSource</span> source = <span class="keyword">new</span> <span class="predefined-type">StreamSource</span>(datafile);
<span class="predefined-type">StreamResult</span> result = <span class="keyword">new</span> <span class="predefined-type">StreamResult</span>(<span class="keyword">new</span> <span class="predefined-type">FileWriter</span>(outfile));
transformer.transform(source, result);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tinkerpop2_data_migration">TinkerPop2 Data Migration</h3>
<div class="paragraph">
<p><span class="image" style="float: right"><img src="../images/data-migration.png" alt="data migration" width="300"></span> For those using TinkerPop 2.x, migrating to TinkerPop 3.x will mean a
number of programming changes, but may also require a migration of the data depending on the graph implementation.  For
example, trying to open <code>TinkerGraph</code> data from TinkerPop 2.x with TinkerPop 3.x code will not work, however opening a
TinkerPop2 <code>Neo4jGraph</code> with a TinkerPop 3.x <code>Neo4jGraph</code> should work provided there aren&#8217;t Neo4j version compatibility
mismatches preventing the read.</p>
</div>
<div class="paragraph">
<p>If such a situation arises that a particular TinkerPop 2.x <code>Graph</code> can not be read by TinkerPop 3.x, a "legacy" data
migration approach exists.  The migration involves writing the TinkerPop2 <code>Graph</code> to GraphSON, then reading it to
TinkerPop 3.x with the <code>LegacyGraphSONReader</code> (a limited implementation of the <code>GraphReader</code> interface).</p>
</div>
<div class="paragraph">
<p>The following represents an example migration of the "classic" toy graph.  In this example, the "classic" graph is
saved to GraphSON using TinkerPop 2.x.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">gremlin&gt; Gremlin.version()
==&gt;<span class="float">2.5</span>.z
gremlin&gt; graph = TinkerGraphFactory.createTinkerGraph()
==&gt;tinkergraph[<span class="key">vertices</span>:<span class="integer">6</span> <span class="key">edges</span>:<span class="integer">6</span>]
gremlin&gt; GraphSONWriter.outputGraph(graph,<span class="string"><span class="delimiter">'</span><span class="content">/tmp/tp2.json</span><span class="delimiter">'</span></span>,GraphSONMode.EXTENDED)
==&gt;<span class="predefined-constant">null</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The above console session uses the <code>gremlin-groovy</code> distribution from TinkerPop2.  It is important to generate the
<code>tp2.json</code> file using the <code>EXTENDED</code> mode as it will include data types when necessary which will help limit
"lossiness" on the TinkerPop 3.x side when imported.  Once <code>tp2.json</code> is created, it can then be imported to a
TinkerPop 3.x <code>Graph</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">gremlin&gt; Gremlin.version()
==&gt;3.4.3
gremlin&gt; graph = TinkerGraph.open()
==&gt;tinkergraph[<span class="key">vertices</span>:<span class="integer">0</span> <span class="key">edges</span>:<span class="integer">0</span>]
gremlin&gt; r = LegacyGraphSONReader.build().create()
==&gt;org.apache.tinkerpop.gremlin.structure.io.graphson.LegacyGraphSONReader<span class="error">@</span><span class="integer">64337702</span>
gremlin&gt; r.readGraph(<span class="keyword">new</span> <span class="predefined-type">FileInputStream</span>(<span class="string"><span class="delimiter">'</span><span class="content">/tmp/tp2.json</span><span class="delimiter">'</span></span>), graph)
==&gt;<span class="predefined-constant">null</span>
gremlin&gt; g = graph.traversal()
==&gt;graphtraversalsource[tinkergraph[<span class="key">vertices</span>:<span class="integer">6</span> <span class="key">edges</span>:<span class="integer">6</span>], standard]
gremlin&gt; g.E()
==&gt;e[<span class="integer">11</span>][<span class="integer">4</span>-created-&gt;<span class="integer">3</span>]
==&gt;e[<span class="integer">12</span>][<span class="integer">6</span>-created-&gt;<span class="integer">3</span>]
==&gt;e[<span class="integer">7</span>][<span class="integer">1</span>-knows-&gt;<span class="integer">2</span>]
==&gt;e[<span class="integer">8</span>][<span class="integer">1</span>-knows-&gt;<span class="integer">4</span>]
==&gt;e[<span class="integer">9</span>][<span class="integer">1</span>-created-&gt;<span class="integer">3</span>]
==&gt;e[<span class="integer">10</span>][<span class="integer">4</span>-created-&gt;<span class="integer">5</span>]</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-08-05 21:07:31 EDT
</div>
</div>
</body>
</html>
